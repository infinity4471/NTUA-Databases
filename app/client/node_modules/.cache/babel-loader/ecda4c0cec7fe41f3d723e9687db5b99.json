{"ast":null,"code":"import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { useInternationalization, useLocalization } from '@progress/kendo-react-intl';\nimport { classNames, guid, getTabIndex, dispatchEvent } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport { numericIncreaseValue, messages, numericDecreaseValue } from '../messages';\nimport { formatValue, sanitizeNumber, rangeValue, increaseValue, decreaseValue, getStateOrPropsValue, getInitialState } from './utils';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\n/**\n * Represents the [KendoReact NumericTextBox component]({% slug overview_numerictextbox %}).\n */\n\nexport var NumericTextBox = React.forwardRef(function (props, target) {\n  var calculatedId = React.useMemo(function () {\n    return guid();\n  }, []);\n  var inputId = props.id || calculatedId;\n  var intlService = useInternationalization();\n  var localizationService = useLocalization();\n  var elementRef = React.useRef(null);\n  var elementWrapperRef = React.useRef(null);\n  var valueDuringChangeRef = React.useRef();\n\n  var _a = React.useState(false),\n      forceUpdate = _a[0],\n      setForceUpdate = _a[1];\n\n  var stateRef = React.useRef(getInitialState());\n  var isPasteRef = React.useRef(false);\n  var prevLooseValueRef = React.useRef();\n  var stateValueRef = React.useRef(props.defaultValue);\n  var looseValue = formatValue(stateRef.current.focused ? stateRef.current.currentLooseValue : getStateOrPropsValue(props.value, stateValueRef.current), props.format, intlService);\n  prevLooseValueRef.current = looseValue;\n  React.useEffect(function () {\n    if (elementRef.current && elementRef.current.setCustomValidity) {\n      elementRef.current.setCustomValidity(validityGetter().valid ? '' : props.validationMessage || VALIDATION_MESSAGE);\n    }\n  });\n  var focusElement = React.useCallback(function () {\n    if (elementRef.current) {\n      elementRef.current.focus();\n    }\n  }, []);\n  var valueGetter = React.useCallback(function () {\n    if (valueDuringChangeRef.current !== undefined) {\n      return valueDuringChangeRef.current;\n    } else {\n      return getStateOrPropsValue(props.value, stateValueRef.current);\n    }\n  }, [props.value]);\n  var nameGetter = React.useCallback(function () {\n    return props.name;\n  }, [props.name]);\n  var requiredGetter = React.useCallback(function () {\n    return props.required;\n  }, [props.required]);\n  var validityGetter = React.useCallback(function () {\n    var customError = props.validationMessage !== undefined;\n    var currentValue = valueGetter();\n    var valid = props.valid !== undefined ? props.valid : !stateRef.current.valueIsOutOfRange && (!requiredGetter() || currentValue !== null && currentValue !== undefined);\n    return {\n      customError: customError,\n      valid: valid,\n      valueMissing: currentValue === null || currentValue === undefined\n    };\n  }, [props.validationMessage, props.valid, valueGetter, requiredGetter]);\n  var validityStylesGetter = React.useCallback(function () {\n    return props.validityStyles;\n  }, [props.validityStyles]);\n  var propsGetter = React.useCallback(function () {\n    return props;\n  }, [props]);\n  var getImperativeHandle = React.useCallback(function () {\n    var options = {\n      element: elementRef,\n      focus: focusElement\n    };\n    Object.defineProperty(options, 'name', {\n      get: nameGetter\n    });\n    Object.defineProperty(options, 'value', {\n      get: valueGetter\n    });\n    Object.defineProperty(options, 'validity', {\n      get: validityGetter\n    });\n    Object.defineProperty(options, 'validityStyles', {\n      get: validityStylesGetter\n    });\n    Object.defineProperty(options, 'required', {\n      get: requiredGetter\n    });\n    Object.defineProperty(options, 'props', {\n      get: propsGetter\n    });\n    return options;\n  }, [nameGetter, valueGetter, validityGetter, validityStylesGetter, requiredGetter, focusElement, propsGetter]);\n  React.useImperativeHandle(target, getImperativeHandle);\n  var getCurrentState = React.useCallback(function () {\n    return {\n      eventValue: getStateOrPropsValue(props.value, stateValueRef.current),\n      prevLooseValue: prevLooseValueRef.current,\n      currentLooseValue: elementRef.current.value,\n      selectionStart: elementRef.current.selectionStart,\n      selectionEnd: elementRef.current.selectionEnd,\n      decimalSelect: false,\n      valueIsCorrected: false,\n      valueIsOutOfRange: false,\n      isPaste: isPasteRef.current,\n      focused: stateRef.current.focused\n    };\n  }, [props.value]);\n  var triggerChange = React.useCallback(function (event, newState) {\n    if (props.disabled) {\n      return;\n    }\n\n    valueDuringChangeRef.current = newState.eventValue;\n    stateValueRef.current = newState.eventValue;\n    var formattedValue = formatValue(rangeValue(newState.eventValue, props.min, props.max), props.format, intlService);\n    var rangedValue = rangeValue(intlService.parseNumber(formattedValue, props.format), props.min, props.max);\n\n    if (rangedValue !== newState.eventValue) {\n      newState.valueIsOutOfRange = true;\n      newState.eventValue = rangedValue;\n    }\n\n    if (newState.valueIsCorrected) {\n      var wrapper_1 = elementWrapperRef.current;\n\n      if (wrapper_1 && wrapper_1.className.indexOf(\"k-state-invalid\") === -1) {\n        wrapper_1.className += ' k-state-invalid';\n        setTimeout(function () {\n          return wrapper_1.className = wrapper_1.className.replace(' k-state-invalid', '');\n        }, 50);\n      }\n    }\n\n    var shouldFireEvent = props.value !== newState.eventValue;\n\n    if (shouldFireEvent) {\n      dispatchEvent(props.onChange, event, getImperativeHandle(), {\n        value: newState.eventValue\n      });\n    }\n\n    valueDuringChangeRef.current = undefined;\n    stateRef.current = newState;\n    setForceUpdate(function (_x) {\n      return !_x;\n    });\n  }, [props.value, props.onChange, props.disabled, setForceUpdate, getImperativeHandle]);\n  var onChangeHandler = React.useCallback(function (event) {\n    var stateCandidate = getCurrentState();\n    isPasteRef.current = false;\n    triggerChange(event, sanitizeNumber(stateCandidate, props.format, intlService));\n  }, [props.format, props.onChange, intlService, triggerChange, getCurrentState]);\n  var onKeyDown = React.useCallback(function (event) {\n    var newState = getCurrentState();\n    var currentValue = intlService.parseNumber(String(newState.currentLooseValue), props.format); // Select All\n\n    if (newState.selectionEnd > newState.selectionStart && newState.selectionEnd - newState.selectionStart === String(newState.currentLooseValue).length) {\n      return;\n    }\n\n    switch (event.keyCode) {\n      case 38:\n        // Arrow up\n        increaseValue(currentValue, newState, props.step, props.min, props.max, props.format, intlService);\n        break;\n\n      case 40:\n        // Arrow down\n        decreaseValue(currentValue, newState, props.step, props.min, props.max, props.format, intlService);\n        break;\n\n      case 13:\n        // Enter - range values\n        if (props.rangeOnEnter === false) {\n          return;\n        }\n\n        var formattedValue = formatValue(rangeValue(currentValue, props.min, props.max), props.format, intlService);\n        var rangedValue = rangeValue(intlService.parseNumber(formattedValue, props.format), props.min, props.max);\n        newState.eventValue = rangedValue;\n        newState.currentLooseValue = formatValue(rangedValue, props.format, intlService);\n        newState.selectionStart = newState.selectionEnd = newState.currentLooseValue.length;\n        break;\n\n      case 110:\n        // Numpad decimal key\n        var element = elementRef.current;\n        var symbols = intlService.numberSymbols();\n\n        if (element) {\n          newState.currentLooseValue = newState.currentLooseValue.slice(0, newState.selectionStart) + symbols.decimal + newState.currentLooseValue.slice(newState.selectionEnd);\n          newState.selectionStart = newState.selectionEnd = newState.selectionStart + 1;\n          newState = sanitizeNumber(newState, props.format, intlService);\n        }\n\n        break;\n\n      default:\n        return;\n    }\n\n    event.preventDefault();\n    triggerChange(event, newState);\n  }, [props.format, props.min, props.max, props.step, props.onChange, props.rangeOnEnter, triggerChange, getCurrentState]);\n  var onPasteHandler = React.useCallback(function () {\n    isPasteRef.current = true;\n  }, []);\n  var onIncrease = React.useCallback(function (event) {\n    var newState = getCurrentState();\n    increaseValue(intlService.parseNumber(String(newState.currentLooseValue), props.format), newState, props.step, props.min, props.max, props.format, intlService);\n    triggerChange(event, newState);\n  }, [props.format, props.min, props.max, props.step, props.onChange, triggerChange, getCurrentState]);\n  var onDecrease = React.useCallback(function (event) {\n    var newState = getCurrentState();\n    decreaseValue(intlService.parseNumber(String(newState.currentLooseValue), props.format), newState, props.step, props.min, props.max, props.format, intlService);\n    triggerChange(event, newState);\n  }, [props.format, props.min, props.max, props.step, props.onChange, triggerChange, getCurrentState]);\n  var onWheelHandler = React.useCallback(function (event) {\n    if (!document || document.activeElement !== elementRef.current || !elementRef.current) {\n      return;\n    }\n\n    if (event.nativeEvent.deltaY < 0) {\n      onIncrease(event);\n    }\n\n    if (event.nativeEvent.deltaY > 0) {\n      onDecrease(event);\n    }\n  }, [onIncrease, onDecrease]);\n  var onFocus = React.useCallback(function (event) {\n    stateRef.current.currentLooseValue = prevLooseValueRef.current;\n    stateRef.current.focused = true;\n    dispatchEvent(props.onFocus, event, getImperativeHandle(), {});\n    setForceUpdate(function (x) {\n      return !x;\n    });\n  }, [props.onFocus, setForceUpdate, getImperativeHandle]);\n  var onBlur = React.useCallback(function (event) {\n    stateRef.current = getInitialState();\n    dispatchEvent(props.onBlur, event, getImperativeHandle(), {});\n    setForceUpdate(function (x) {\n      return !x;\n    });\n  }, [props.onBlur, setForceUpdate, getImperativeHandle]);\n  var onMouseDown = React.useCallback(function (e) {\n    if (document && elementRef.current) {\n      e.preventDefault();\n\n      if (document.activeElement !== elementRef.current) {\n        elementRef.current.focus();\n      }\n    }\n  }, []);\n  React.useLayoutEffect(function () {\n    if (elementRef.current && stateRef.current.selectionStart !== undefined && stateRef.current.selectionEnd !== undefined) {\n      elementRef.current.selectionStart = stateRef.current.selectionStart;\n      elementRef.current.selectionEnd = stateRef.current.selectionEnd;\n      stateRef.current.selectionStart = undefined;\n      stateRef.current.selectionEnd = undefined;\n    }\n  }, [forceUpdate]);\n  var isValid = !validityStylesGetter() || validityGetter().valid;\n  var numerictextbox = React.createElement(\"span\", {\n    dir: props.dir,\n    style: !props.label ? {\n      width: props.width\n    } : undefined,\n    className: 'k-widget k-numerictextbox' + (props.className ? ' ' + props.className : ''),\n    \"aria-disabled\": props.disabled ? 'true' : undefined\n  }, React.createElement(\"span\", {\n    className: classNames('k-numeric-wrap', {\n      'k-state-disabled': props.disabled,\n      'k-state-invalid': !isValid\n    }),\n    ref: elementWrapperRef\n  }, React.createElement(\"input\", {\n    value: looseValue === null ? '' : looseValue,\n    tabIndex: getTabIndex(props.tabIndex, props.disabled),\n    accessKey: props.accessKey,\n    disabled: props.disabled,\n    title: props.title,\n    \"aria-valuemin\": props.min,\n    \"aria-valuemax\": props.max,\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy,\n    placeholder: props.placeholder,\n    spellCheck: false,\n    autoComplete: 'off',\n    autoCorrect: 'off',\n    type: props.inputType || 'tel',\n    className: 'k-input k-formatted-value',\n    id: inputId,\n    name: props.name,\n    onChange: onChangeHandler,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    onKeyDown: onKeyDown,\n    onPaste: onPasteHandler,\n    onWheel: onWheelHandler,\n    ref: elementRef\n  }), props.children, props.spinners && React.createElement(\"span\", {\n    className: \"k-select\",\n    onMouseDown: onMouseDown\n  }, React.createElement(\"span\", {\n    className: \"k-link k-link-increase\",\n    \"aria-label\": localizationService.toLanguageString(numericIncreaseValue, messages[numericIncreaseValue]),\n    title: localizationService.toLanguageString(numericIncreaseValue, messages[numericIncreaseValue]),\n    onClick: onIncrease\n  }, React.createElement(\"span\", {\n    className: \"k-icon k-i-arrow-n\"\n  })), React.createElement(\"span\", {\n    className: \"k-link k-link-decrease\",\n    \"aria-label\": localizationService.toLanguageString(numericDecreaseValue, messages[numericDecreaseValue]),\n    title: localizationService.toLanguageString(numericDecreaseValue, messages[numericDecreaseValue]),\n    onClick: onDecrease\n  }, React.createElement(\"span\", {\n    className: \"k-icon k-i-arrow-s\"\n  })))));\n  return props.label ? React.createElement(FloatingLabel, {\n    label: props.label,\n    editorId: inputId,\n    editorValue: looseValue === null ? '' : looseValue,\n    editorValid: isValid,\n    editorDisabled: props.disabled,\n    editorPlaceholder: props.placeholder,\n    children: numerictextbox,\n    style: {\n      width: props.width\n    },\n    dir: props.dir\n  }) : numerictextbox;\n});\nNumericTextBox.propTypes = {\n  value: PropTypes.number,\n  defaultValue: PropTypes.number,\n  step: PropTypes.number,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.shape({\n    style: PropTypes.oneOf(['decimal', 'currency', 'percent', 'scientific', 'accounting']),\n    currency: PropTypes.string,\n    currencyDisplay: PropTypes.oneOf(['symbol', 'code', 'name']),\n    useGrouping: PropTypes.bool,\n    minimumIntegerDigits: PropTypes.number,\n    minimumFractionDigits: PropTypes.number,\n    maximumFractionDigits: PropTypes.number\n  })]),\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  tabIndex: PropTypes.number,\n  accessKey: PropTypes.string,\n  title: PropTypes.string,\n  placeholder: PropTypes.string,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  spinners: PropTypes.bool,\n  disabled: PropTypes.bool,\n  dir: PropTypes.string,\n  name: PropTypes.string,\n  label: PropTypes.string,\n  validationMessage: PropTypes.string,\n  required: PropTypes.bool,\n  id: PropTypes.string,\n  rangeOnEnter: PropTypes.bool,\n  ariaLabelledBy: PropTypes.string,\n  ariaDescribedBy: PropTypes.string,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func\n};\nNumericTextBox.displayName = 'KendoNumericTextBox';\nNumericTextBox.defaultProps = {\n  step: 1,\n  spinners: true,\n  disabled: false,\n  required: false,\n  validityStyles: true,\n  rangeOnEnter: true,\n  onChange: function (_) {\n    return;\n  },\n  onFocus: function (_) {\n    return;\n  },\n  onBlur: function (_) {\n    return;\n  }\n};","map":{"version":3,"sources":["../../../src/numerictextbox/NumericTextBox.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { useInternationalization, useLocalization } from '@progress/kendo-react-intl';\nimport { classNames, guid, getTabIndex, dispatchEvent } from '@progress/kendo-react-common';\nimport { FloatingLabel } from '@progress/kendo-react-labels';\nimport { numericIncreaseValue, messages, numericDecreaseValue } from '../messages';\nimport { formatValue, sanitizeNumber, rangeValue, increaseValue, decreaseValue, getStateOrPropsValue, getInitialState } from './utils';\nvar VALIDATION_MESSAGE = 'Please enter a valid value!';\n/**\n * Represents the [KendoReact NumericTextBox component]({% slug overview_numerictextbox %}).\n */\nexport var NumericTextBox = React.forwardRef(function (props, target) {\n    var calculatedId = React.useMemo(function () { return guid(); }, []);\n    var inputId = props.id || calculatedId;\n    var intlService = useInternationalization();\n    var localizationService = useLocalization();\n    var elementRef = React.useRef(null);\n    var elementWrapperRef = React.useRef(null);\n    var valueDuringChangeRef = React.useRef();\n    var _a = React.useState(false), forceUpdate = _a[0], setForceUpdate = _a[1];\n    var stateRef = React.useRef(getInitialState());\n    var isPasteRef = React.useRef(false);\n    var prevLooseValueRef = React.useRef();\n    var stateValueRef = React.useRef(props.defaultValue);\n    var looseValue = formatValue(stateRef.current.focused ?\n        stateRef.current.currentLooseValue :\n        getStateOrPropsValue(props.value, stateValueRef.current), props.format, intlService);\n    prevLooseValueRef.current = looseValue;\n    React.useEffect(function () {\n        if (elementRef.current && elementRef.current.setCustomValidity) {\n            elementRef.current.setCustomValidity(validityGetter().valid\n                ? ''\n                : props.validationMessage || VALIDATION_MESSAGE);\n        }\n    });\n    var focusElement = React.useCallback(function () {\n        if (elementRef.current) {\n            elementRef.current.focus();\n        }\n    }, []);\n    var valueGetter = React.useCallback(function () {\n        if (valueDuringChangeRef.current !== undefined) {\n            return valueDuringChangeRef.current;\n        }\n        else {\n            return getStateOrPropsValue(props.value, stateValueRef.current);\n        }\n    }, [props.value]);\n    var nameGetter = React.useCallback(function () {\n        return props.name;\n    }, [props.name]);\n    var requiredGetter = React.useCallback(function () {\n        return props.required;\n    }, [props.required]);\n    var validityGetter = React.useCallback(function () {\n        var customError = props.validationMessage !== undefined;\n        var currentValue = valueGetter();\n        var valid = props.valid !== undefined ?\n            props.valid :\n            !stateRef.current.valueIsOutOfRange &&\n                (!requiredGetter() || (currentValue !== null && currentValue !== undefined));\n        return {\n            customError: customError,\n            valid: valid,\n            valueMissing: currentValue === null || currentValue === undefined\n        };\n    }, [props.validationMessage, props.valid, valueGetter, requiredGetter]);\n    var validityStylesGetter = React.useCallback(function () {\n        return props.validityStyles;\n    }, [props.validityStyles]);\n    var propsGetter = React.useCallback(function () {\n        return props;\n    }, [props]);\n    var getImperativeHandle = React.useCallback(function () {\n        var options = {\n            element: elementRef,\n            focus: focusElement\n        };\n        Object.defineProperty(options, 'name', { get: nameGetter });\n        Object.defineProperty(options, 'value', { get: valueGetter });\n        Object.defineProperty(options, 'validity', { get: validityGetter });\n        Object.defineProperty(options, 'validityStyles', { get: validityStylesGetter });\n        Object.defineProperty(options, 'required', { get: requiredGetter });\n        Object.defineProperty(options, 'props', { get: propsGetter });\n        return options;\n    }, [nameGetter, valueGetter, validityGetter, validityStylesGetter, requiredGetter, focusElement, propsGetter]);\n    React.useImperativeHandle(target, getImperativeHandle);\n    var getCurrentState = React.useCallback(function () {\n        return {\n            eventValue: getStateOrPropsValue(props.value, stateValueRef.current),\n            prevLooseValue: prevLooseValueRef.current,\n            currentLooseValue: elementRef.current.value,\n            selectionStart: elementRef.current.selectionStart,\n            selectionEnd: elementRef.current.selectionEnd,\n            decimalSelect: false,\n            valueIsCorrected: false,\n            valueIsOutOfRange: false,\n            isPaste: isPasteRef.current,\n            focused: stateRef.current.focused\n        };\n    }, [props.value]);\n    var triggerChange = React.useCallback(function (event, newState) {\n        if (props.disabled) {\n            return;\n        }\n        valueDuringChangeRef.current = newState.eventValue;\n        stateValueRef.current = newState.eventValue;\n        var formattedValue = formatValue(rangeValue(newState.eventValue, props.min, props.max), props.format, intlService);\n        var rangedValue = rangeValue(intlService.parseNumber(formattedValue, props.format), props.min, props.max);\n        if (rangedValue !== newState.eventValue) {\n            newState.valueIsOutOfRange = true;\n            newState.eventValue = rangedValue;\n        }\n        if (newState.valueIsCorrected) {\n            var wrapper_1 = elementWrapperRef.current;\n            if (wrapper_1 && wrapper_1.className.indexOf(\"k-state-invalid\") === -1) {\n                wrapper_1.className += ' k-state-invalid';\n                setTimeout(function () { return wrapper_1.className = wrapper_1.className.replace(' k-state-invalid', ''); }, 50);\n            }\n        }\n        var shouldFireEvent = props.value !== newState.eventValue;\n        if (shouldFireEvent) {\n            dispatchEvent(props.onChange, event, getImperativeHandle(), { value: newState.eventValue });\n        }\n        valueDuringChangeRef.current = undefined;\n        stateRef.current = newState;\n        setForceUpdate(function (_x) { return !_x; });\n    }, [props.value, props.onChange, props.disabled, setForceUpdate, getImperativeHandle]);\n    var onChangeHandler = React.useCallback(function (event) {\n        var stateCandidate = getCurrentState();\n        isPasteRef.current = false;\n        triggerChange(event, sanitizeNumber(stateCandidate, props.format, intlService));\n    }, [props.format, props.onChange, intlService, triggerChange, getCurrentState]);\n    var onKeyDown = React.useCallback(function (event) {\n        var newState = getCurrentState();\n        var currentValue = intlService.parseNumber(String(newState.currentLooseValue), props.format);\n        // Select All\n        if (newState.selectionEnd > newState.selectionStart &&\n            newState.selectionEnd - newState.selectionStart === String(newState.currentLooseValue).length) {\n            return;\n        }\n        switch (event.keyCode) {\n            case 38:\n                // Arrow up\n                increaseValue(currentValue, newState, props.step, props.min, props.max, props.format, intlService);\n                break;\n            case 40:\n                // Arrow down\n                decreaseValue(currentValue, newState, props.step, props.min, props.max, props.format, intlService);\n                break;\n            case 13:\n                // Enter - range values\n                if (props.rangeOnEnter === false) {\n                    return;\n                }\n                var formattedValue = formatValue(rangeValue(currentValue, props.min, props.max), props.format, intlService);\n                var rangedValue = rangeValue(intlService.parseNumber(formattedValue, props.format), props.min, props.max);\n                newState.eventValue = rangedValue;\n                newState.currentLooseValue = formatValue(rangedValue, props.format, intlService);\n                newState.selectionStart = newState.selectionEnd = newState.currentLooseValue.length;\n                break;\n            case 110:\n                // Numpad decimal key\n                var element = elementRef.current;\n                var symbols = intlService.numberSymbols();\n                if (element) {\n                    newState.currentLooseValue = newState.currentLooseValue.slice(0, newState.selectionStart) +\n                        symbols.decimal +\n                        newState.currentLooseValue.slice(newState.selectionEnd);\n                    newState.selectionStart = newState.selectionEnd = newState.selectionStart + 1;\n                    newState = sanitizeNumber(newState, props.format, intlService);\n                }\n                break;\n            default:\n                return;\n        }\n        event.preventDefault();\n        triggerChange(event, newState);\n    }, [props.format, props.min, props.max, props.step, props.onChange, props.rangeOnEnter, triggerChange, getCurrentState]);\n    var onPasteHandler = React.useCallback(function () {\n        isPasteRef.current = true;\n    }, []);\n    var onIncrease = React.useCallback(function (event) {\n        var newState = getCurrentState();\n        increaseValue(intlService.parseNumber(String(newState.currentLooseValue), props.format), newState, props.step, props.min, props.max, props.format, intlService);\n        triggerChange(event, newState);\n    }, [props.format, props.min, props.max, props.step, props.onChange, triggerChange, getCurrentState]);\n    var onDecrease = React.useCallback(function (event) {\n        var newState = getCurrentState();\n        decreaseValue(intlService.parseNumber(String(newState.currentLooseValue), props.format), newState, props.step, props.min, props.max, props.format, intlService);\n        triggerChange(event, newState);\n    }, [props.format, props.min, props.max, props.step, props.onChange, triggerChange, getCurrentState]);\n    var onWheelHandler = React.useCallback(function (event) {\n        if (!document || document.activeElement !== elementRef.current || !elementRef.current) {\n            return;\n        }\n        if (event.nativeEvent.deltaY < 0) {\n            onIncrease(event);\n        }\n        if (event.nativeEvent.deltaY > 0) {\n            onDecrease(event);\n        }\n    }, [onIncrease, onDecrease]);\n    var onFocus = React.useCallback(function (event) {\n        stateRef.current.currentLooseValue = prevLooseValueRef.current;\n        stateRef.current.focused = true;\n        dispatchEvent(props.onFocus, event, getImperativeHandle(), {});\n        setForceUpdate(function (x) { return !x; });\n    }, [props.onFocus, setForceUpdate, getImperativeHandle]);\n    var onBlur = React.useCallback(function (event) {\n        stateRef.current = getInitialState();\n        dispatchEvent(props.onBlur, event, getImperativeHandle(), {});\n        setForceUpdate(function (x) { return !x; });\n    }, [props.onBlur, setForceUpdate, getImperativeHandle]);\n    var onMouseDown = React.useCallback(function (e) {\n        if (document && elementRef.current) {\n            e.preventDefault();\n            if (document.activeElement !== elementRef.current) {\n                elementRef.current.focus();\n            }\n        }\n    }, []);\n    React.useLayoutEffect(function () {\n        if (elementRef.current && stateRef.current.selectionStart !== undefined && stateRef.current.selectionEnd !== undefined) {\n            elementRef.current.selectionStart = stateRef.current.selectionStart;\n            elementRef.current.selectionEnd = stateRef.current.selectionEnd;\n            stateRef.current.selectionStart = undefined;\n            stateRef.current.selectionEnd = undefined;\n        }\n    }, [forceUpdate]);\n    var isValid = !validityStylesGetter() || validityGetter().valid;\n    var numerictextbox = (React.createElement(\"span\", { dir: props.dir, style: !props.label\n            ? { width: props.width }\n            : undefined, className: 'k-widget k-numerictextbox' + (props.className ? ' ' + props.className : ''), \"aria-disabled\": props.disabled ? 'true' : undefined },\n        React.createElement(\"span\", { className: classNames('k-numeric-wrap', {\n                'k-state-disabled': props.disabled,\n                'k-state-invalid': !isValid\n            }), ref: elementWrapperRef },\n            React.createElement(\"input\", { value: looseValue === null ? '' : looseValue, tabIndex: getTabIndex(props.tabIndex, props.disabled), accessKey: props.accessKey, disabled: props.disabled, title: props.title, \"aria-valuemin\": props.min, \"aria-valuemax\": props.max, \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy, placeholder: props.placeholder, spellCheck: false, autoComplete: 'off', autoCorrect: 'off', type: props.inputType || 'tel', className: 'k-input k-formatted-value', id: inputId, name: props.name, onChange: onChangeHandler, onFocus: onFocus, onBlur: onBlur, onKeyDown: onKeyDown, onPaste: onPasteHandler, onWheel: onWheelHandler, ref: elementRef }),\n            props.children,\n            props.spinners &&\n                (React.createElement(\"span\", { className: \"k-select\", onMouseDown: onMouseDown },\n                    React.createElement(\"span\", { className: \"k-link k-link-increase\", \"aria-label\": localizationService\n                            .toLanguageString(numericIncreaseValue, messages[numericIncreaseValue]), title: localizationService\n                            .toLanguageString(numericIncreaseValue, messages[numericIncreaseValue]), onClick: onIncrease },\n                        React.createElement(\"span\", { className: \"k-icon k-i-arrow-n\" })),\n                    React.createElement(\"span\", { className: \"k-link k-link-decrease\", \"aria-label\": localizationService\n                            .toLanguageString(numericDecreaseValue, messages[numericDecreaseValue]), title: localizationService\n                            .toLanguageString(numericDecreaseValue, messages[numericDecreaseValue]), onClick: onDecrease },\n                        React.createElement(\"span\", { className: \"k-icon k-i-arrow-s\" })))))));\n    return props.label\n        ? (React.createElement(FloatingLabel, { label: props.label, editorId: inputId, editorValue: looseValue === null ? '' : looseValue, editorValid: isValid, editorDisabled: props.disabled, editorPlaceholder: props.placeholder, children: numerictextbox, style: { width: props.width }, dir: props.dir }))\n        : numerictextbox;\n});\nNumericTextBox.propTypes = {\n    value: PropTypes.number,\n    defaultValue: PropTypes.number,\n    step: PropTypes.number,\n    format: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.shape({\n            style: PropTypes.oneOf(['decimal', 'currency', 'percent', 'scientific', 'accounting']),\n            currency: PropTypes.string,\n            currencyDisplay: PropTypes.oneOf(['symbol', 'code', 'name']),\n            useGrouping: PropTypes.bool,\n            minimumIntegerDigits: PropTypes.number,\n            minimumFractionDigits: PropTypes.number,\n            maximumFractionDigits: PropTypes.number\n        })\n    ]),\n    width: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.number\n    ]),\n    tabIndex: PropTypes.number,\n    accessKey: PropTypes.string,\n    title: PropTypes.string,\n    placeholder: PropTypes.string,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    spinners: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.string,\n    name: PropTypes.string,\n    label: PropTypes.string,\n    validationMessage: PropTypes.string,\n    required: PropTypes.bool,\n    id: PropTypes.string,\n    rangeOnEnter: PropTypes.bool,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func\n};\nNumericTextBox.displayName = 'KendoNumericTextBox';\nNumericTextBox.defaultProps = {\n    step: 1,\n    spinners: true,\n    disabled: false,\n    required: false,\n    validityStyles: true,\n    rangeOnEnter: true,\n    onChange: function (_) { return; },\n    onFocus: function (_) { return; },\n    onBlur: function (_) { return; }\n};\n//# sourceMappingURL=NumericTextBox.js.map"]},"metadata":{},"sourceType":"module"}