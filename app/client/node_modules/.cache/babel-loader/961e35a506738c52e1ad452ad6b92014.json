{"ast":null,"code":"import { isEqual } from '@progress/kendo-date-math';\nimport { MIDNIGHT_DATE } from '../../utils';\nimport { range, setMinutes } from '../utils';\nvar MINUTES_IN_HOUR = 60;\n\nvar clampToRange = function (rangeValue) {\n  return function (value) {\n    return value % rangeValue;\n  };\n};\n\nvar clamp = clampToRange(MINUTES_IN_HOUR);\n\nvar stepper = function (start, step) {\n  return function (idx) {\n    return clamp(start + idx * step);\n  };\n};\n\nvar distanceFromMin = function (value, min) {\n  return clamp(MINUTES_IN_HOUR + value - min);\n};\n\nvar limit = function (borderValue) {\n  return function (barrier, value) {\n    var useBarrier = !value || barrier.getHours() === value.getHours();\n    return useBarrier ? barrier : setMinutes(barrier, borderValue);\n  };\n};\n\nvar limitDown = limit(0);\nvar limitUp = limit(MINUTES_IN_HOUR - 1);\n/**\n * @hidden\n */\n\nvar MinutesService =\n/** @class */\nfunction () {\n  function MinutesService(intl) {\n    this.intl = intl;\n    this.insertUndividedMax = false;\n  }\n\n  MinutesService.prototype.apply = function (value, candidate) {\n    return setMinutes(value, candidate.getMinutes());\n  };\n\n  MinutesService.prototype.configure = function (settings) {\n    var _this = this;\n\n    var _a = settings.insertUndividedMax,\n        insertUndividedMax = _a === void 0 ? this.insertUndividedMax : _a,\n        _b = settings.min,\n        min = _b === void 0 ? this.min : _b,\n        _c = settings.max,\n        max = _c === void 0 ? this.max : _c,\n        part = settings.part,\n        _d = settings.step,\n        step = _d === void 0 ? this.step : _d;\n    this.insertUndividedMax = insertUndividedMax;\n\n    this.toListItem = function (minute) {\n      var date = setMinutes(MIDNIGHT_DATE, minute);\n      return {\n        text: _this.intl.formatDate(date, part.pattern),\n        value: date\n      };\n    };\n\n    this.min = min;\n    this.max = max;\n    this.step = step;\n  };\n\n  MinutesService.prototype.data = function (selectedValue) {\n    var _this = this;\n\n    var min = this.range(selectedValue)[0];\n    var getMinute = stepper(min, this.step);\n\n    var convertToItem = function (idx) {\n      return _this.toListItem(getMinute(idx));\n    };\n\n    var data = range(0, this.countFromMin(selectedValue)).map(convertToItem);\n    this.addLast(data);\n\n    if (selectedValue) {\n      this.addMissing(data, selectedValue);\n    }\n\n    return data;\n  };\n\n  MinutesService.prototype.isRangeChanged = function (min, max) {\n    return !isEqual(this.min, min) || !isEqual(this.max, max);\n  };\n\n  MinutesService.prototype.limitRange = function (min, max, value) {\n    return [limitDown(min, value), limitUp(max, value)];\n  };\n\n  MinutesService.prototype.total = function (value) {\n    var last = this.insertUndividedMax && this.isLastMissing(value) ? 1 : 0;\n    var missing = this.isMissing(value) ? 1 : 0;\n    return this.countFromMin(value) + missing + last;\n  };\n\n  MinutesService.prototype.selectedIndex = function (value) {\n    return Math.ceil(this.divideByStep(value));\n  };\n\n  MinutesService.prototype.valueInList = function (value) {\n    if (!value) {\n      return true;\n    }\n\n    var matchMax = this.insertUndividedMax && this.lastMinute(value) === value.getMinutes();\n    return matchMax || !this.isMissing(value);\n  };\n\n  MinutesService.prototype.addLast = function (data, value) {\n    if (this.insertUndividedMax && this.isLastMissing(value)) {\n      data.push(this.toListItem(this.lastMinute(value)));\n    }\n\n    return data;\n  };\n\n  MinutesService.prototype.addMissing = function (data, value) {\n    if (this.valueInList(value)) {\n      return data;\n    }\n\n    var missingItem = this.toListItem(value.getMinutes());\n    data.splice(this.selectedIndex(value), 0, missingItem);\n    return data;\n  };\n\n  MinutesService.prototype.countFromMin = function (value) {\n    var _a = this.range(value),\n        min = _a[0],\n        max = _a[1];\n\n    return Math.floor(distanceFromMin(max, min) / this.step) + 1;\n    /* include min */\n  };\n\n  MinutesService.prototype.isMissing = function (value) {\n    if (!value) {\n      return false;\n    }\n\n    return this.selectedIndex(value) !== this.divideByStep(value);\n  };\n\n  MinutesService.prototype.isLastMissing = function (value) {\n    return this.isMissing(setMinutes(this.max, this.lastMinute(value)));\n  };\n\n  MinutesService.prototype.divideByStep = function (value) {\n    return distanceFromMin(value.getMinutes(), this.min.getMinutes()) / this.step;\n  };\n\n  MinutesService.prototype.lastMinute = function (value) {\n    return this.range(value)[1];\n  };\n\n  MinutesService.prototype.range = function (value) {\n    var _a = this.limitRange(this.min, this.max, value),\n        min = _a[0],\n        max = _a[1];\n\n    return [min.getMinutes(), max.getMinutes()];\n  };\n\n  return MinutesService;\n}();\n\nexport { MinutesService };","map":{"version":3,"sources":["../../../../src/timepicker/services/MinutesService.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { isEqual } from '@progress/kendo-date-math';\nimport { MIDNIGHT_DATE } from '../../utils';\nimport { range, setMinutes } from '../utils';\nvar MINUTES_IN_HOUR = 60;\nvar clampToRange = function (rangeValue) { return function (value) { return value % rangeValue; }; };\nvar clamp = clampToRange(MINUTES_IN_HOUR);\nvar stepper = function (start, step) { return function (idx) { return clamp(start + (idx * step)); }; };\nvar distanceFromMin = function (value, min) { return clamp(MINUTES_IN_HOUR + value - min); };\nvar limit = function (borderValue) { return function (barrier, value) {\n    var useBarrier = !value || barrier.getHours() === value.getHours();\n    return useBarrier ? barrier : setMinutes(barrier, borderValue);\n}; };\nvar limitDown = limit(0);\nvar limitUp = limit(MINUTES_IN_HOUR - 1);\n/**\n * @hidden\n */\nvar MinutesService = /** @class */ (function () {\n    function MinutesService(intl) {\n        this.intl = intl;\n        this.insertUndividedMax = false;\n    }\n    MinutesService.prototype.apply = function (value, candidate) {\n        return setMinutes(value, candidate.getMinutes());\n    };\n    MinutesService.prototype.configure = function (settings) {\n        var _this = this;\n        var _a = settings.insertUndividedMax, insertUndividedMax = _a === void 0 ? this.insertUndividedMax : _a, _b = settings.min, min = _b === void 0 ? this.min : _b, _c = settings.max, max = _c === void 0 ? this.max : _c, part = settings.part, _d = settings.step, step = _d === void 0 ? this.step : _d;\n        this.insertUndividedMax = insertUndividedMax;\n        this.toListItem = function (minute) {\n            var date = setMinutes(MIDNIGHT_DATE, minute);\n            return {\n                text: _this.intl.formatDate(date, part.pattern),\n                value: date\n            };\n        };\n        this.min = min;\n        this.max = max;\n        this.step = step;\n    };\n    MinutesService.prototype.data = function (selectedValue) {\n        var _this = this;\n        var min = this.range(selectedValue)[0];\n        var getMinute = stepper(min, this.step);\n        var convertToItem = function (idx) { return (_this.toListItem(getMinute(idx))); };\n        var data = range(0, this.countFromMin(selectedValue)).map(convertToItem);\n        this.addLast(data);\n        if (selectedValue) {\n            this.addMissing(data, selectedValue);\n        }\n        return data;\n    };\n    MinutesService.prototype.isRangeChanged = function (min, max) {\n        return !isEqual(this.min, min) || !isEqual(this.max, max);\n    };\n    MinutesService.prototype.limitRange = function (min, max, value) {\n        return [limitDown(min, value), limitUp(max, value)];\n    };\n    MinutesService.prototype.total = function (value) {\n        var last = this.insertUndividedMax && this.isLastMissing(value) ? 1 : 0;\n        var missing = this.isMissing(value) ? 1 : 0;\n        return this.countFromMin(value) + missing + last;\n    };\n    MinutesService.prototype.selectedIndex = function (value) {\n        return Math.ceil(this.divideByStep(value));\n    };\n    MinutesService.prototype.valueInList = function (value) {\n        if (!value) {\n            return true;\n        }\n        var matchMax = this.insertUndividedMax && this.lastMinute(value) === value.getMinutes();\n        return matchMax || !this.isMissing(value);\n    };\n    MinutesService.prototype.addLast = function (data, value) {\n        if (this.insertUndividedMax && this.isLastMissing(value)) {\n            data.push(this.toListItem(this.lastMinute(value)));\n        }\n        return data;\n    };\n    MinutesService.prototype.addMissing = function (data, value) {\n        if (this.valueInList(value)) {\n            return data;\n        }\n        var missingItem = this.toListItem(value.getMinutes());\n        data.splice(this.selectedIndex(value), 0, missingItem);\n        return data;\n    };\n    MinutesService.prototype.countFromMin = function (value) {\n        var _a = this.range(value), min = _a[0], max = _a[1];\n        return Math.floor(distanceFromMin(max, min) / this.step) + 1; /* include min */\n    };\n    MinutesService.prototype.isMissing = function (value) {\n        if (!value) {\n            return false;\n        }\n        return this.selectedIndex(value) !== this.divideByStep(value);\n    };\n    MinutesService.prototype.isLastMissing = function (value) {\n        return this.isMissing(setMinutes(this.max, this.lastMinute(value)));\n    };\n    MinutesService.prototype.divideByStep = function (value) {\n        return distanceFromMin(value.getMinutes(), this.min.getMinutes()) / this.step;\n    };\n    MinutesService.prototype.lastMinute = function (value) {\n        return this.range(value)[1];\n    };\n    MinutesService.prototype.range = function (value) {\n        var _a = this.limitRange(this.min, this.max, value), min = _a[0], max = _a[1];\n        return [min.getMinutes(), max.getMinutes()];\n    };\n    return MinutesService;\n}());\nexport { MinutesService };\n//# sourceMappingURL=MinutesService.js.map"]},"metadata":{},"sourceType":"module"}