{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as React from 'react';\nimport { GridColumnMenuItem } from './GridColumnMenuItem';\nimport { GridColumnMenuItemGroup } from './GridColumnMenuItemGroup';\nimport { normalize } from '../interfaces/GridSortSettings';\nimport { provideLocalizationService, registerForIntl, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, sortAscending, sortDescending } from '../messages';\n/**\n * @hidden\n */\n\nvar ASC_DIR = 'asc';\n/**\n * @hidden\n */\n\nvar DESC_DIR = 'desc';\n/**\n * @hidden\n */\n\nvar sortSeqMap = {\n  true: {\n    'asc': {\n      'asc': '',\n      'desc': 'desc'\n    },\n    'desc': {\n      'asc': 'asc',\n      'desc': ''\n    },\n    '': {\n      'asc': 'asc',\n      'desc': 'desc'\n    }\n  },\n  false: {\n    'asc': {\n      'asc': 'asc',\n      'desc': 'desc'\n    },\n    'desc': {\n      'asc': 'asc',\n      'desc': 'desc'\n    },\n    '': {\n      'asc': 'asc',\n      'desc': 'desc'\n    }\n  }\n};\n/**\n * @hidden\n */\n\nvar sortIndex = function (field, sort) {\n  if (!sort) {\n    return -1;\n  }\n\n  return sort.findIndex(function (s) {\n    return s.field === field;\n  });\n};\n/**\n * @hidden\n */\n\n\nvar sortedAsc = function (sortedIndex, sort) {\n  return !!(sort && sortedIndex > -1 && sort[sortedIndex].dir === ASC_DIR);\n};\n/**\n * @hidden\n */\n\n\nvar sortedDesc = function (sortedIndex, sort) {\n  return !!(sort && sortedIndex > -1 && sort[sortedIndex].dir === DESC_DIR);\n};\n/**\n * @example\n * ```jsx-no-run\n * class ColumnMenu extends React.Component {\n *     render() {\n *         return (\n *         <div>\n *             <GridColumnMenuSort {...this.props} />\n *         </div>);\n *     }\n * }\n *\n * class App extends React.PureComponent {\n *     constructor(props) {\n *         super(props);\n *\n *         this.state = this.createAppState({\n *             take: 10,\n *             skip: 0\n *         });\n *     }\n *\n *     createAppState(dataState) {\n *         return {\n *             result: process(products.slice(0), dataState),\n *             dataState: dataState\n *         };\n *     }\n *\n *     dataStateChange = (event) => {\n *         this.setState(this.createAppState(event.data));\n *     }\n *\n *     render() {\n *         return (\n *             <div>\n *                 <Grid\n *                     data={this.state.result}\n *                     {...this.state.dataState}\n *                     onDataStateChange={this.dataStateChange}\n *                     sortable={true}\n *                     pageable={true}\n *                 >\n *                     <Column field=\"ProductID\" title=\"Product ID\" columnMenu={ColumnMenu}/>\n *                     <Column field=\"ProductName\" />\n *                 </Grid>\n *                 <br />\n *             </div>\n *         );\n *     }\n * }\n *\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\n\n\nvar GridColumnMenuSort =\n/** @class */\nfunction (_super) {\n  __extends(GridColumnMenuSort, _super);\n\n  function GridColumnMenuSort() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.onAscClick = function (e) {\n      _this.onSort(e, ASC_DIR);\n\n      if (_this.props.onCloseMenu) {\n        _this.props.onCloseMenu();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onDescClick = function (e) {\n      _this.onSort(e, DESC_DIR);\n\n      if (_this.props.onCloseMenu) {\n        _this.props.onCloseMenu();\n      }\n    };\n\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  GridColumnMenuSort.prototype.onSort = function (e, selectedDir) {\n    e.preventDefault();\n\n    if (!this.props.onSortChange) {\n      return;\n    }\n\n    var _a = this.props,\n        column = _a.column,\n        sortable = _a.sortable,\n        sort = _a.sort;\n\n    var _b = normalize(sortable || false, false),\n        allowUnsort = _b.allowUnsort,\n        mode = _b.mode;\n\n    var oldDescriptor = (sort || []).filter(function (d) {\n      return d.field === column.field;\n    })[0];\n    var dir = sortSeqMap[allowUnsort][oldDescriptor && oldDescriptor.dir || ''][selectedDir];\n    var newDescriptor = mode === 'single' ? [] : (this.props.sort || []).filter(function (d) {\n      return d.field !== column.field;\n    });\n\n    if (dir !== '' && column.field) {\n      newDescriptor.push({\n        field: column.field,\n        dir: dir\n      });\n    }\n\n    this.props.onSortChange(newDescriptor, e);\n  };\n  /**\n   * @hidden\n   */\n\n\n  GridColumnMenuSort.prototype.render = function () {\n    var _a = this.props,\n        sort = _a.sort,\n        column = _a.column;\n    var currentSortIndex = sortIndex(column.field, sort);\n    var localizationService = provideLocalizationService(this);\n    return React.createElement(GridColumnMenuItemGroup, null, React.createElement(GridColumnMenuItem, {\n      title: localizationService.toLanguageString(sortAscending, messages[sortAscending]),\n      iconClass: 'k-i-sort-asc-sm',\n      selected: sortedAsc(currentSortIndex, sort),\n      onClick: this.onAscClick\n    }), React.createElement(GridColumnMenuItem, {\n      title: localizationService.toLanguageString(sortDescending, messages[sortDescending]),\n      iconClass: 'k-i-sort-desc-sm',\n      selected: sortedDesc(currentSortIndex, sort),\n      onClick: this.onDescClick\n    }));\n  }; // tslint:disable:max-line-length\n\n  /**\n   * Can be used to check if sorting is applied to a specific field ([see example]({% slug column_menu_grid %}#toc-styling-the-column-menu-icon)). Useful for creating active sort indicators.\n   */\n  // tslint:enable:max-line-length\n\n\n  GridColumnMenuSort.active = function (field, sort) {\n    var currentSortIndex = sortIndex(field, sort);\n    return sortedDesc(currentSortIndex, sort) || sortedAsc(currentSortIndex, sort);\n  };\n\n  return GridColumnMenuSort;\n}(React.Component);\n\nexport { GridColumnMenuSort };\nregisterForIntl(GridColumnMenuSort);\nregisterForLocalization(GridColumnMenuSort);","map":{"version":3,"sources":["../../../src/columnMenu/GridColumnMenuSort.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as React from 'react';\nimport { GridColumnMenuItem } from './GridColumnMenuItem';\nimport { GridColumnMenuItemGroup } from './GridColumnMenuItemGroup';\nimport { normalize } from '../interfaces/GridSortSettings';\nimport { provideLocalizationService, registerForIntl, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, sortAscending, sortDescending } from '../messages';\n/**\n * @hidden\n */\nvar ASC_DIR = 'asc';\n/**\n * @hidden\n */\nvar DESC_DIR = 'desc';\n/**\n * @hidden\n */\nvar sortSeqMap = {\n    true: {\n        'asc': { 'asc': '', 'desc': 'desc' },\n        'desc': { 'asc': 'asc', 'desc': '' },\n        '': { 'asc': 'asc', 'desc': 'desc' }\n    },\n    false: {\n        'asc': { 'asc': 'asc', 'desc': 'desc' },\n        'desc': { 'asc': 'asc', 'desc': 'desc' },\n        '': { 'asc': 'asc', 'desc': 'desc' }\n    }\n};\n/**\n * @hidden\n */\nvar sortIndex = function (field, sort) {\n    if (!sort) {\n        return -1;\n    }\n    return sort.findIndex(function (s) { return s.field === field; });\n};\n/**\n * @hidden\n */\nvar sortedAsc = function (sortedIndex, sort) {\n    return !!(sort && sortedIndex > -1 && sort[sortedIndex].dir === ASC_DIR);\n};\n/**\n * @hidden\n */\nvar sortedDesc = function (sortedIndex, sort) {\n    return !!(sort && sortedIndex > -1 && sort[sortedIndex].dir === DESC_DIR);\n};\n/**\n * @example\n * ```jsx-no-run\n * class ColumnMenu extends React.Component {\n *     render() {\n *         return (\n *         <div>\n *             <GridColumnMenuSort {...this.props} />\n *         </div>);\n *     }\n * }\n *\n * class App extends React.PureComponent {\n *     constructor(props) {\n *         super(props);\n *\n *         this.state = this.createAppState({\n *             take: 10,\n *             skip: 0\n *         });\n *     }\n *\n *     createAppState(dataState) {\n *         return {\n *             result: process(products.slice(0), dataState),\n *             dataState: dataState\n *         };\n *     }\n *\n *     dataStateChange = (event) => {\n *         this.setState(this.createAppState(event.data));\n *     }\n *\n *     render() {\n *         return (\n *             <div>\n *                 <Grid\n *                     data={this.state.result}\n *                     {...this.state.dataState}\n *                     onDataStateChange={this.dataStateChange}\n *                     sortable={true}\n *                     pageable={true}\n *                 >\n *                     <Column field=\"ProductID\" title=\"Product ID\" columnMenu={ColumnMenu}/>\n *                     <Column field=\"ProductName\" />\n *                 </Grid>\n *                 <br />\n *             </div>\n *         );\n *     }\n * }\n *\n * ReactDOM.render(<App />, document.querySelector('my-app'));\n * ```\n */\nvar GridColumnMenuSort = /** @class */ (function (_super) {\n    __extends(GridColumnMenuSort, _super);\n    function GridColumnMenuSort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * @hidden\n         */\n        _this.onAscClick = function (e) {\n            _this.onSort(e, ASC_DIR);\n            if (_this.props.onCloseMenu) {\n                _this.props.onCloseMenu();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.onDescClick = function (e) {\n            _this.onSort(e, DESC_DIR);\n            if (_this.props.onCloseMenu) {\n                _this.props.onCloseMenu();\n            }\n        };\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    GridColumnMenuSort.prototype.onSort = function (e, selectedDir) {\n        e.preventDefault();\n        if (!this.props.onSortChange) {\n            return;\n        }\n        var _a = this.props, column = _a.column, sortable = _a.sortable, sort = _a.sort;\n        var _b = normalize(sortable || false, false), allowUnsort = _b.allowUnsort, mode = _b.mode;\n        var oldDescriptor = (sort || []).filter(function (d) { return d.field === column.field; })[0];\n        var dir = sortSeqMap[allowUnsort][oldDescriptor && oldDescriptor.dir || ''][selectedDir];\n        var newDescriptor = (mode === 'single') ?\n            [] : (this.props.sort || []).filter(function (d) { return d.field !== column.field; });\n        if (dir !== '' && column.field) {\n            newDescriptor.push({ field: column.field, dir: dir });\n        }\n        this.props.onSortChange(newDescriptor, e);\n    };\n    /**\n     * @hidden\n     */\n    GridColumnMenuSort.prototype.render = function () {\n        var _a = this.props, sort = _a.sort, column = _a.column;\n        var currentSortIndex = sortIndex(column.field, sort);\n        var localizationService = provideLocalizationService(this);\n        return (React.createElement(GridColumnMenuItemGroup, null,\n            React.createElement(GridColumnMenuItem, { title: localizationService.toLanguageString(sortAscending, messages[sortAscending]), iconClass: 'k-i-sort-asc-sm', selected: sortedAsc(currentSortIndex, sort), onClick: this.onAscClick }),\n            React.createElement(GridColumnMenuItem, { title: localizationService.toLanguageString(sortDescending, messages[sortDescending]), iconClass: 'k-i-sort-desc-sm', selected: sortedDesc(currentSortIndex, sort), onClick: this.onDescClick })));\n    };\n    // tslint:disable:max-line-length\n    /**\n     * Can be used to check if sorting is applied to a specific field ([see example]({% slug column_menu_grid %}#toc-styling-the-column-menu-icon)). Useful for creating active sort indicators.\n     */\n    // tslint:enable:max-line-length\n    GridColumnMenuSort.active = function (field, sort) {\n        var currentSortIndex = sortIndex(field, sort);\n        return sortedDesc(currentSortIndex, sort) || sortedAsc(currentSortIndex, sort);\n    };\n    return GridColumnMenuSort;\n}(React.Component));\nexport { GridColumnMenuSort };\nregisterForIntl(GridColumnMenuSort);\nregisterForLocalization(GridColumnMenuSort);\n//# sourceMappingURL=GridColumnMenuSort.js.map"]},"metadata":{},"sourceType":"module"}