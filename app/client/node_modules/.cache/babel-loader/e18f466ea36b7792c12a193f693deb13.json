{"ast":null,"code":"var _a;\n\nimport { addMonths, addYears, createDate, durationInYears, firstMonthOfYear, lastMonthOfYear } from '@progress/kendo-date-math';\nimport { Action } from '../models/NavigationAction';\nimport { getToday, isInRange, isInSelectionRange, range } from '../../utils';\nimport { EMPTY_SELECTIONRANGE } from '../models/SelectionRange';\nimport { cloneDate } from '@progress/kendo-react-common';\nvar EMPTY_DATA = [[]];\nvar CELLS_LENGTH = 5;\nvar ROWS_LENGTH = 3;\n\nvar upStep = function (month) {\n  if (month > 4) {\n    return -5;\n  }\n\n  if (month < 2) {\n    return -2;\n  }\n\n  return -7;\n};\n\nvar downStep = function (month) {\n  if (month < 7) {\n    return 5;\n  }\n\n  if (month < 10) {\n    return 7;\n  }\n\n  return 2;\n};\n\nvar ACTIONS = (_a = {}, _a[Action.Left] = function (date) {\n  return addMonths(date, -1);\n}, _a[Action.Up] = function (date) {\n  return addMonths(date, upStep(date.getMonth()));\n}, _a[Action.Right] = function (date) {\n  return addMonths(date, 1);\n}, _a[Action.Down] = function (date) {\n  return addMonths(date, downStep(date.getMonth()));\n}, _a[Action.PrevView] = function (date) {\n  return addYears(date, -1);\n}, _a[Action.NextView] = function (date) {\n  return addYears(date, 1);\n}, _a[Action.FirstInView] = function (date) {\n  return firstMonthOfYear(date);\n}, _a[Action.LastInView] = function (date) {\n  return lastMonthOfYear(date);\n}, _a);\n/**\n * @hidden\n */\n\nvar YearViewService =\n/** @class */\nfunction () {\n  function YearViewService(intl) {\n    this._intl = intl;\n  }\n\n  YearViewService.prototype.addToDate = function (min, skip) {\n    return addYears(min, skip);\n  };\n\n  YearViewService.prototype.datesList = function (start, count) {\n    return range(0, count).map(function (i) {\n      return addYears(start, i);\n    });\n  };\n\n  YearViewService.prototype.data = function (options) {\n    var _this = this;\n\n    var cellUID = options.cellUID,\n        focusedDate = options.focusedDate,\n        isActiveView = options.isActiveView,\n        max = options.max,\n        min = options.min,\n        selectedDate = options.selectedDate,\n        _a = options.selectionRange,\n        selectionRange = _a === void 0 ? EMPTY_SELECTIONRANGE : _a,\n        viewDate = options.viewDate;\n\n    if (!viewDate) {\n      return EMPTY_DATA;\n    }\n\n    var months = this.abbrMonthNames();\n    var firstDate = firstMonthOfYear(viewDate);\n    var lastDate = lastMonthOfYear(viewDate);\n    var currentYear = firstDate.getFullYear();\n    var cells = range(0, CELLS_LENGTH);\n    var today = getToday();\n    return range(0, ROWS_LENGTH).map(function (rowOffset) {\n      var baseDate = addMonths(firstDate, rowOffset * CELLS_LENGTH);\n      return cells.map(function (cellOffset) {\n        var cellDate = _this.normalize(addMonths(baseDate, cellOffset), min, max);\n\n        var changedYear = currentYear < cellDate.getFullYear();\n\n        if (changedYear) {\n          return null;\n        }\n\n        var isRangeStart = _this.isEqual(cellDate, selectionRange.start);\n\n        var isRangeEnd = _this.isEqual(cellDate, selectionRange.end);\n\n        var isInMiddle = !isRangeStart && !isRangeEnd;\n        var isRangeMid = isInMiddle && isInSelectionRange(cellDate, selectionRange);\n        var isSelected = isActiveView && (!Array.isArray(selectedDate) ? isInRange(selectedDate, min, max) && _this.isEqual(cellDate, selectedDate) : _this.isSelectedFromArray(cellDate, selectedDate, min, max));\n        return {\n          formattedValue: months[cellDate.getMonth()],\n          id: \"\" + cellUID + cellDate.getTime(),\n          isFocused: _this.isEqual(cellDate, focusedDate),\n          isSelected: isSelected,\n          isInRange: isInRange(cellDate, min, max),\n          isWeekend: false,\n          isRangeStart: isRangeStart,\n          isRangeMid: isRangeMid,\n          isRangeEnd: isRangeEnd,\n          isRangeSplitEnd: isRangeMid && _this.isEqual(cellDate, lastDate),\n          isRangeSplitStart: isRangeMid && _this.isEqual(cellDate, firstDate),\n          isToday: _this.isEqual(cellDate, today),\n          title: _this.cellTitle(cellDate),\n          value: cellDate\n        };\n      });\n    });\n  };\n\n  YearViewService.prototype.isSelectedFromArray = function (candidate, dates, min, max) {\n    var _this = this;\n\n    var result = false;\n    dates.forEach(function (date) {\n      if (isInRange(candidate, min, max) && _this.isEqual(candidate, date)) {\n        result = true;\n      }\n    });\n    return result;\n  };\n\n  YearViewService.prototype.isEqual = function (candidate, expected) {\n    if (!candidate || !expected) {\n      return false;\n    }\n\n    return candidate.getFullYear() === expected.getFullYear() && candidate.getMonth() === expected.getMonth();\n  };\n\n  YearViewService.prototype.isInArray = function (date, dates) {\n    if (!dates.length) {\n      return false;\n    }\n\n    var year = date.getFullYear();\n    return dates[0].getFullYear() <= year && year <= dates[dates.length - 1].getFullYear();\n  };\n\n  YearViewService.prototype.isInRange = function (candidate, min, max) {\n    var candidateValue = createDate(candidate.getFullYear(), candidate.getMonth(), 1);\n    var aboveMin = !min || createDate(min.getFullYear(), min.getMonth(), 1) <= candidateValue;\n    var belowMax = !max || candidateValue <= createDate(max.getFullYear(), max.getMonth(), 1);\n    return aboveMin && belowMax;\n  };\n\n  YearViewService.prototype.isInSameView = function (candidate, value) {\n    return durationInYears(candidate, value) === 0;\n  };\n\n  YearViewService.prototype.isRangeStart = function (value) {\n    return value.getFullYear() % 10 === 0;\n  };\n\n  YearViewService.prototype.move = function (value, action) {\n    var modifier = ACTIONS[action];\n\n    if (!modifier) {\n      return value;\n    }\n\n    return modifier(value);\n  };\n\n  YearViewService.prototype.cellTitle = function (value) {\n    return value.getFullYear() + \" \" + this.value(value);\n  };\n\n  YearViewService.prototype.navigationTitle = function (value) {\n    return this.title(value);\n  };\n\n  YearViewService.prototype.title = function (current) {\n    return current ? current.getFullYear().toString() : '';\n  };\n\n  YearViewService.prototype.rowLength = function (_) {\n    return CELLS_LENGTH;\n  };\n\n  YearViewService.prototype.skip = function (value, min) {\n    return durationInYears(min, value);\n  };\n\n  YearViewService.prototype.total = function (min, max) {\n    return durationInYears(min, max) + 1;\n  };\n\n  YearViewService.prototype.value = function (current) {\n    return current ? this.abbrMonthNames()[current.getMonth()] : '';\n  };\n\n  YearViewService.prototype.viewDate = function (date, max, border) {\n    if (border === void 0) {\n      border = 1;\n    }\n\n    var renderTwoViews = durationInYears(date, max) < border;\n    return renderTwoViews ? addYears(date, -1) : date;\n  };\n\n  YearViewService.prototype.abbrMonthNames = function () {\n    return this._intl.dateFormatNames({\n      nameType: 'abbreviated',\n      type: 'months'\n    });\n  };\n\n  YearViewService.prototype.normalize = function (cellDate, min, max) {\n    if (cellDate < min && this.isEqual(cellDate, min)) {\n      return cloneDate(min);\n    }\n\n    if (cellDate > max && this.isEqual(cellDate, max)) {\n      return cloneDate(max);\n    }\n\n    return cellDate;\n  };\n\n  return YearViewService;\n}();\n\nexport { YearViewService };","map":{"version":3,"sources":["../../../../src/calendar/services/YearViewService.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var _a;\nimport { addMonths, addYears, createDate, durationInYears, firstMonthOfYear, lastMonthOfYear } from '@progress/kendo-date-math';\nimport { Action } from '../models/NavigationAction';\nimport { getToday, isInRange, isInSelectionRange, range } from '../../utils';\nimport { EMPTY_SELECTIONRANGE } from '../models/SelectionRange';\nimport { cloneDate } from '@progress/kendo-react-common';\nvar EMPTY_DATA = [[]];\nvar CELLS_LENGTH = 5;\nvar ROWS_LENGTH = 3;\nvar upStep = function (month) {\n    if (month > 4) {\n        return -5;\n    }\n    if (month < 2) {\n        return -2;\n    }\n    return -7;\n};\nvar downStep = function (month) {\n    if (month < 7) {\n        return 5;\n    }\n    if (month < 10) {\n        return 7;\n    }\n    return 2;\n};\nvar ACTIONS = (_a = {},\n    _a[Action.Left] = function (date) { return addMonths(date, -1); },\n    _a[Action.Up] = function (date) { return addMonths(date, upStep(date.getMonth())); },\n    _a[Action.Right] = function (date) { return addMonths(date, 1); },\n    _a[Action.Down] = function (date) { return addMonths(date, downStep(date.getMonth())); },\n    _a[Action.PrevView] = function (date) { return addYears(date, -1); },\n    _a[Action.NextView] = function (date) { return addYears(date, 1); },\n    _a[Action.FirstInView] = function (date) { return firstMonthOfYear(date); },\n    _a[Action.LastInView] = function (date) { return lastMonthOfYear(date); },\n    _a);\n/**\n * @hidden\n */\nvar YearViewService = /** @class */ (function () {\n    function YearViewService(intl) {\n        this._intl = intl;\n    }\n    YearViewService.prototype.addToDate = function (min, skip) {\n        return addYears(min, skip);\n    };\n    YearViewService.prototype.datesList = function (start, count) {\n        return range(0, count).map(function (i) { return addYears(start, i); });\n    };\n    YearViewService.prototype.data = function (options) {\n        var _this = this;\n        var cellUID = options.cellUID, focusedDate = options.focusedDate, isActiveView = options.isActiveView, max = options.max, min = options.min, selectedDate = options.selectedDate, _a = options.selectionRange, selectionRange = _a === void 0 ? EMPTY_SELECTIONRANGE : _a, viewDate = options.viewDate;\n        if (!viewDate) {\n            return EMPTY_DATA;\n        }\n        var months = this.abbrMonthNames();\n        var firstDate = firstMonthOfYear(viewDate);\n        var lastDate = lastMonthOfYear(viewDate);\n        var currentYear = firstDate.getFullYear();\n        var cells = range(0, CELLS_LENGTH);\n        var today = getToday();\n        return range(0, ROWS_LENGTH).map(function (rowOffset) {\n            var baseDate = addMonths(firstDate, rowOffset * CELLS_LENGTH);\n            return cells.map(function (cellOffset) {\n                var cellDate = _this.normalize(addMonths(baseDate, cellOffset), min, max);\n                var changedYear = currentYear < cellDate.getFullYear();\n                if (changedYear) {\n                    return null;\n                }\n                var isRangeStart = _this.isEqual(cellDate, selectionRange.start);\n                var isRangeEnd = _this.isEqual(cellDate, selectionRange.end);\n                var isInMiddle = !isRangeStart && !isRangeEnd;\n                var isRangeMid = isInMiddle && isInSelectionRange(cellDate, selectionRange);\n                var isSelected = isActiveView && (!Array.isArray(selectedDate)\n                    ? isInRange(selectedDate, min, max) && _this.isEqual(cellDate, selectedDate)\n                    : _this.isSelectedFromArray(cellDate, selectedDate, min, max));\n                return {\n                    formattedValue: months[cellDate.getMonth()],\n                    id: \"\" + cellUID + cellDate.getTime(),\n                    isFocused: _this.isEqual(cellDate, focusedDate),\n                    isSelected: isSelected,\n                    isInRange: isInRange(cellDate, min, max),\n                    isWeekend: false,\n                    isRangeStart: isRangeStart,\n                    isRangeMid: isRangeMid,\n                    isRangeEnd: isRangeEnd,\n                    isRangeSplitEnd: isRangeMid && _this.isEqual(cellDate, lastDate),\n                    isRangeSplitStart: isRangeMid && _this.isEqual(cellDate, firstDate),\n                    isToday: _this.isEqual(cellDate, today),\n                    title: _this.cellTitle(cellDate),\n                    value: cellDate\n                };\n            });\n        });\n    };\n    YearViewService.prototype.isSelectedFromArray = function (candidate, dates, min, max) {\n        var _this = this;\n        var result = false;\n        dates.forEach(function (date) {\n            if (isInRange(candidate, min, max) && _this.isEqual(candidate, date)) {\n                result = true;\n            }\n        });\n        return result;\n    };\n    YearViewService.prototype.isEqual = function (candidate, expected) {\n        if (!candidate || !expected) {\n            return false;\n        }\n        return candidate.getFullYear() === expected.getFullYear() &&\n            candidate.getMonth() === expected.getMonth();\n    };\n    YearViewService.prototype.isInArray = function (date, dates) {\n        if (!dates.length) {\n            return false;\n        }\n        var year = date.getFullYear();\n        return dates[0].getFullYear() <= year && year <= dates[dates.length - 1].getFullYear();\n    };\n    YearViewService.prototype.isInRange = function (candidate, min, max) {\n        var candidateValue = createDate(candidate.getFullYear(), candidate.getMonth(), 1);\n        var aboveMin = !min || createDate(min.getFullYear(), min.getMonth(), 1) <= candidateValue;\n        var belowMax = !max || candidateValue <= createDate(max.getFullYear(), max.getMonth(), 1);\n        return aboveMin && belowMax;\n    };\n    YearViewService.prototype.isInSameView = function (candidate, value) {\n        return durationInYears(candidate, value) === 0;\n    };\n    YearViewService.prototype.isRangeStart = function (value) {\n        return value.getFullYear() % 10 === 0;\n    };\n    YearViewService.prototype.move = function (value, action) {\n        var modifier = ACTIONS[action];\n        if (!modifier) {\n            return value;\n        }\n        return modifier(value);\n    };\n    YearViewService.prototype.cellTitle = function (value) {\n        return value.getFullYear() + \" \" + this.value(value);\n    };\n    YearViewService.prototype.navigationTitle = function (value) {\n        return this.title(value);\n    };\n    YearViewService.prototype.title = function (current) {\n        return current ? current.getFullYear().toString() : '';\n    };\n    YearViewService.prototype.rowLength = function (_) {\n        return CELLS_LENGTH;\n    };\n    YearViewService.prototype.skip = function (value, min) {\n        return durationInYears(min, value);\n    };\n    YearViewService.prototype.total = function (min, max) {\n        return durationInYears(min, max) + 1;\n    };\n    YearViewService.prototype.value = function (current) {\n        return current ? this.abbrMonthNames()[current.getMonth()] : '';\n    };\n    YearViewService.prototype.viewDate = function (date, max, border) {\n        if (border === void 0) { border = 1; }\n        var renderTwoViews = durationInYears(date, max) < border;\n        return renderTwoViews ? addYears(date, -1) : date;\n    };\n    YearViewService.prototype.abbrMonthNames = function () {\n        return this._intl.dateFormatNames({ nameType: 'abbreviated', type: 'months' });\n    };\n    YearViewService.prototype.normalize = function (cellDate, min, max) {\n        if (cellDate < min && this.isEqual(cellDate, min)) {\n            return cloneDate(min);\n        }\n        if (cellDate > max && this.isEqual(cellDate, max)) {\n            return cloneDate(max);\n        }\n        return cellDate;\n    };\n    return YearViewService;\n}());\nexport { YearViewService };\n//# sourceMappingURL=YearViewService.js.map"]},"metadata":{},"sourceType":"module"}