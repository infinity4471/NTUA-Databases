{"ast":null,"code":"import { isCompositeFilterDescriptor } from \"./filter-descriptor.interface\";\nimport { getter } from \"../accessor\";\nimport { isFunction, isPresent, isDate, isString, isBlank, isNumeric } from \"../utils\";\nvar logic = {\n  \"or\": {\n    concat: function (acc, fn) {\n      return function (a) {\n        return acc(a) || fn(a);\n      };\n    },\n    identity: function () {\n      return false;\n    }\n  },\n  \"and\": {\n    concat: function (acc, fn) {\n      return function (a) {\n        return acc(a) && fn(a);\n      };\n    },\n    identity: function () {\n      return true;\n    }\n  }\n};\nvar operatorsMap = {\n  contains: function (a, b) {\n    return (a || \"\").indexOf(b) >= 0;\n  },\n  doesnotcontain: function (a, b) {\n    return (a || \"\").indexOf(b) === -1;\n  },\n  doesnotendwith: function (a, b) {\n    return (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) < 0;\n  },\n  doesnotstartwith: function (a, b) {\n    return (a || \"\").lastIndexOf(b, 0) === -1;\n  },\n  endswith: function (a, b) {\n    return (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) >= 0;\n  },\n  eq: function (a, b) {\n    return a === b;\n  },\n  gt: function (a, b) {\n    return a > b;\n  },\n  gte: function (a, b) {\n    return a >= b;\n  },\n  isempty: function (a) {\n    return a === '';\n  },\n  isnotempty: function (a) {\n    return a !== '';\n  },\n  isnotnull: function (a) {\n    return isPresent(a);\n  },\n  isnull: function (a) {\n    return isBlank(a);\n  },\n  lt: function (a, b) {\n    return a < b;\n  },\n  lte: function (a, b) {\n    return a <= b;\n  },\n  neq: function (a, b) {\n    return a != b;\n  },\n  startswith: function (a, b) {\n    return (a || \"\").lastIndexOf(b, 0) === 0;\n  }\n};\nvar dateRegExp = /^\\/Date\\((.*?)\\)\\/$/;\n\nvar convertValue = function (value, ignoreCase) {\n  if (value != null && isString(value)) {\n    var date = dateRegExp.exec(value);\n\n    if (date) {\n      return new Date(+date[1]).getTime();\n    } else if (ignoreCase) {\n      return value.toLowerCase();\n    }\n  } else if (value != null && isDate(value)) {\n    return value.getTime();\n  }\n\n  return value;\n};\n\nvar typedGetter = function (prop, value, ignoreCase) {\n  if (!isPresent(value)) {\n    return prop;\n  }\n\n  var acc = prop;\n\n  if (isString(value)) {\n    var date = dateRegExp.exec(value);\n\n    if (date) {\n      value = new Date(+date[1]);\n    } else {\n      acc = function (a) {\n        var x = prop(a);\n\n        if (typeof x === 'string' && ignoreCase) {\n          return x.toLowerCase();\n        } else {\n          return isNumeric(x) ? x + \"\" : x;\n        }\n      };\n    }\n  }\n\n  if (isDate(value)) {\n    return function (a) {\n      var x = acc(a);\n      return isDate(x) ? x.getTime() : x;\n    };\n  }\n\n  return acc;\n};\n\nvar transformFilter = function (_a) {\n  var field = _a.field,\n      ignoreCase = _a.ignoreCase,\n      value = _a.value,\n      operator = _a.operator;\n  field = !isPresent(field) ? function (a) {\n    return a;\n  } : field;\n  ignoreCase = isPresent(ignoreCase) ? ignoreCase : true;\n  var itemProp = typedGetter(isFunction(field) ? field : getter(field, true), value, ignoreCase);\n  value = convertValue(value, ignoreCase);\n  var op = isFunction(operator) ? operator : operatorsMap[operator];\n  return function (a) {\n    return op(itemProp(a), value, ignoreCase);\n  };\n};\n/**\n * @hidden\n */\n\n\nexport var transformCompositeFilter = function (filter) {\n  var combiner = logic[filter.logic];\n  return filter.filters.filter(isPresent).map(function (x) {\n    return isCompositeFilterDescriptor(x) ? transformCompositeFilter(x) : transformFilter(x);\n  }).reduce(combiner.concat, combiner.identity);\n};","map":{"version":3,"sources":["/home/infinity/Desktop/supermarket/NTUA-Databases/app/client/node_modules/@progress/kendo-data-query/dist/es/filtering/filter-no-eval.js"],"names":["isCompositeFilterDescriptor","getter","isFunction","isPresent","isDate","isString","isBlank","isNumeric","logic","concat","acc","fn","a","identity","operatorsMap","contains","b","indexOf","doesnotcontain","doesnotendwith","length","doesnotstartwith","lastIndexOf","endswith","eq","gt","gte","isempty","isnotempty","isnotnull","isnull","lt","lte","neq","startswith","dateRegExp","convertValue","value","ignoreCase","date","exec","Date","getTime","toLowerCase","typedGetter","prop","x","transformFilter","_a","field","operator","itemProp","op","transformCompositeFilter","filter","combiner","filters","map","reduce"],"mappings":"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","sourcesContent":["import { isCompositeFilterDescriptor } from \"./filter-descriptor.interface\";\nimport { getter } from \"../accessor\";\nimport { isFunction, isPresent, isDate, isString, isBlank, isNumeric } from \"../utils\";\nvar logic = {\n    \"or\": {\n        concat: function (acc, fn) { return function (a) { return acc(a) || fn(a); }; },\n        identity: function () { return false; }\n    },\n    \"and\": {\n        concat: function (acc, fn) { return function (a) { return acc(a) && fn(a); }; },\n        identity: function () { return true; }\n    }\n};\nvar operatorsMap = {\n    contains: function (a, b) { return (a || \"\").indexOf(b) >= 0; },\n    doesnotcontain: function (a, b) { return (a || \"\").indexOf(b) === -1; },\n    doesnotendwith: function (a, b) { return (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) < 0; },\n    doesnotstartwith: function (a, b) { return (a || \"\").lastIndexOf(b, 0) === -1; },\n    endswith: function (a, b) { return (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) >= 0; },\n    eq: function (a, b) { return a === b; },\n    gt: function (a, b) { return a > b; },\n    gte: function (a, b) { return a >= b; },\n    isempty: function (a) { return a === ''; },\n    isnotempty: function (a) { return a !== ''; },\n    isnotnull: function (a) { return isPresent(a); },\n    isnull: function (a) { return isBlank(a); },\n    lt: function (a, b) { return a < b; },\n    lte: function (a, b) { return a <= b; },\n    neq: function (a, b) { return a != b; },\n    startswith: function (a, b) { return (a || \"\").lastIndexOf(b, 0) === 0; }\n};\nvar dateRegExp = /^\\/Date\\((.*?)\\)\\/$/;\nvar convertValue = function (value, ignoreCase) {\n    if (value != null && isString(value)) {\n        var date = dateRegExp.exec(value);\n        if (date) {\n            return new Date(+date[1]).getTime();\n        }\n        else if (ignoreCase) {\n            return value.toLowerCase();\n        }\n    }\n    else if (value != null && isDate(value)) {\n        return value.getTime();\n    }\n    return value;\n};\nvar typedGetter = function (prop, value, ignoreCase) {\n    if (!isPresent(value)) {\n        return prop;\n    }\n    var acc = prop;\n    if (isString(value)) {\n        var date = dateRegExp.exec(value);\n        if (date) {\n            value = new Date(+date[1]);\n        }\n        else {\n            acc = function (a) {\n                var x = prop(a);\n                if (typeof x === 'string' && ignoreCase) {\n                    return x.toLowerCase();\n                }\n                else {\n                    return isNumeric(x) ? x + \"\" : x;\n                }\n            };\n        }\n    }\n    if (isDate(value)) {\n        return function (a) {\n            var x = acc(a);\n            return isDate(x) ? x.getTime() : x;\n        };\n    }\n    return acc;\n};\nvar transformFilter = function (_a) {\n    var field = _a.field, ignoreCase = _a.ignoreCase, value = _a.value, operator = _a.operator;\n    field = !isPresent(field) ? function (a) { return a; } : field;\n    ignoreCase = isPresent(ignoreCase) ? ignoreCase : true;\n    var itemProp = typedGetter(isFunction(field) ? field : getter(field, true), value, ignoreCase);\n    value = convertValue(value, ignoreCase);\n    var op = isFunction(operator) ? operator : operatorsMap[operator];\n    return function (a) { return op(itemProp(a), value, ignoreCase); };\n};\n/**\n * @hidden\n */\nexport var transformCompositeFilter = function (filter) {\n    var combiner = logic[filter.logic];\n    return filter.filters\n        .filter(isPresent)\n        .map(function (x) { return isCompositeFilterDescriptor(x) ? transformCompositeFilter(x) : transformFilter(x); })\n        .reduce(combiner.concat, combiner.identity);\n};\n"]},"metadata":{},"sourceType":"module"}