{"ast":null,"code":"import BaseSurface from '../core/surface';\nimport SurfaceFactory from '../core/surface-factory';\nimport { createPromise, promiseAll, bindEvents, elementSize, unbindEvents } from '../util';\nimport RootNode from './root-node';\nimport ShapesQuadTree from '../search/shapes-quad-tree';\nimport SurfaceCursor from './surface-cursor';\n\nvar Surface = function (BaseSurface) {\n  function Surface(element, options) {\n    BaseSurface.call(this, element, options);\n    this.element.innerHTML = this._template(this);\n    var canvas = this.element.firstElementChild;\n    var size = elementSize(element);\n    canvas.width = size.width;\n    canvas.height = size.height;\n    this._rootElement = canvas;\n    this._root = new RootNode(canvas, size);\n    this._mouseTrackHandler = this._trackMouse.bind(this);\n    bindEvents(this.element, {\n      click: this._mouseTrackHandler,\n      mousemove: this._mouseTrackHandler\n    });\n  }\n\n  if (BaseSurface) Surface.__proto__ = BaseSurface;\n  Surface.prototype = Object.create(BaseSurface && BaseSurface.prototype);\n  Surface.prototype.constructor = Surface;\n\n  Surface.prototype.destroy = function destroy() {\n    BaseSurface.prototype.destroy.call(this);\n\n    if (this._root) {\n      this._root.destroy();\n\n      this._root = null;\n    }\n\n    if (this._searchTree) {\n      this._searchTree.clear();\n\n      delete this._searchTree;\n    }\n\n    if (this._cursor) {\n      this._cursor.destroy();\n\n      delete this._cursor;\n    }\n\n    unbindEvents(this.element, {\n      click: this._mouseTrackHandler,\n      mousemove: this._mouseTrackHandler\n    });\n  };\n\n  Surface.prototype.draw = function draw(element) {\n    BaseSurface.prototype.draw.call(this, element);\n\n    this._root.load([element], undefined, this.options.cors);\n\n    if (this._searchTree) {\n      this._searchTree.add([element]);\n    }\n  };\n\n  Surface.prototype.clear = function clear() {\n    BaseSurface.prototype.clear.call(this);\n\n    this._root.clear();\n\n    if (this._searchTree) {\n      this._searchTree.clear();\n    }\n\n    if (this._cursor) {\n      this._cursor.clear();\n    }\n  };\n\n  Surface.prototype.eventTarget = function eventTarget(e) {\n    if (this._searchTree) {\n      var point = this._surfacePoint(e);\n\n      var shape = this._searchTree.pointShape(point);\n\n      return shape;\n    }\n  };\n\n  Surface.prototype.image = function image() {\n    var ref = this;\n    var root = ref._root;\n    var rootElement = ref._rootElement;\n    var loadingStates = [];\n    root.traverse(function (childNode) {\n      if (childNode.loading) {\n        loadingStates.push(childNode.loading);\n      }\n    });\n    var promise = createPromise();\n\n    var resolveDataURL = function () {\n      root._invalidate();\n\n      try {\n        var data = rootElement.toDataURL();\n        promise.resolve(data);\n      } catch (e) {\n        promise.reject(e);\n      }\n    };\n\n    promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n    return promise;\n  };\n\n  Surface.prototype.suspendTracking = function suspendTracking() {\n    BaseSurface.prototype.suspendTracking.call(this);\n\n    if (this._searchTree) {\n      this._searchTree.clear();\n\n      delete this._searchTree;\n    }\n  };\n\n  Surface.prototype.resumeTracking = function resumeTracking() {\n    BaseSurface.prototype.resumeTracking.call(this);\n\n    if (!this._searchTree) {\n      this._searchTree = new ShapesQuadTree();\n      var childNodes = this._root.childNodes;\n      var rootElements = [];\n\n      for (var idx = 0; idx < childNodes.length; idx++) {\n        rootElements.push(childNodes[idx].srcElement);\n      }\n\n      this._searchTree.add(rootElements);\n    }\n  };\n\n  Surface.prototype._resize = function _resize() {\n    this._rootElement.width = this._size.width;\n    this._rootElement.height = this._size.height;\n    this._root.size = this._size;\n\n    this._root.invalidate();\n  };\n\n  Surface.prototype._template = function _template() {\n    return \"<canvas style='width: 100%; height: 100%;'></canvas>\";\n  };\n\n  Surface.prototype._enableTracking = function _enableTracking() {\n    this._searchTree = new ShapesQuadTree();\n    this._cursor = new SurfaceCursor(this);\n\n    BaseSurface.prototype._enableTracking.call(this);\n  };\n\n  Surface.prototype._trackMouse = function _trackMouse(e) {\n    if (this._suspendedTracking) {\n      return;\n    }\n\n    var shape = this.eventTarget(e);\n\n    if (e.type !== \"click\") {\n      var currentShape = this._currentShape;\n\n      if (currentShape && currentShape !== shape) {\n        this.trigger(\"mouseleave\", {\n          element: currentShape,\n          originalEvent: e,\n          type: \"mouseleave\"\n        });\n      }\n\n      if (shape && currentShape !== shape) {\n        this.trigger(\"mouseenter\", {\n          element: shape,\n          originalEvent: e,\n          type: \"mouseenter\"\n        });\n      }\n\n      this.trigger(\"mousemove\", {\n        element: shape,\n        originalEvent: e,\n        type: \"mousemove\"\n      });\n      this._currentShape = shape;\n    } else if (shape) {\n      this.trigger(\"click\", {\n        element: shape,\n        originalEvent: e,\n        type: \"click\"\n      });\n    }\n  };\n\n  return Surface;\n}(BaseSurface);\n\nSurface.prototype.type = \"canvas\";\n\nif (typeof document !== \"undefined\" && document.createElement(\"canvas\").getContext) {\n  BaseSurface.support.canvas = true;\n  SurfaceFactory.current.register(\"canvas\", Surface, 20);\n}\n\nexport default Surface;","map":{"version":3,"sources":["/home/infinity/Desktop/supermarket/NTUA-Databases/app/client/node_modules/@progress/kendo-drawing/dist/es/canvas/surface.js"],"names":["BaseSurface","SurfaceFactory","createPromise","promiseAll","bindEvents","elementSize","unbindEvents","RootNode","ShapesQuadTree","SurfaceCursor","Surface","element","options","call","innerHTML","_template","canvas","firstElementChild","size","width","height","_rootElement","_root","_mouseTrackHandler","_trackMouse","bind","click","mousemove","__proto__","prototype","Object","create","constructor","destroy","_searchTree","clear","_cursor","draw","load","undefined","cors","add","eventTarget","e","point","_surfacePoint","shape","pointShape","image","ref","root","rootElement","loadingStates","traverse","childNode","loading","push","promise","resolveDataURL","_invalidate","data","toDataURL","resolve","reject","then","suspendTracking","resumeTracking","childNodes","rootElements","idx","length","srcElement","_resize","_size","invalidate","_enableTracking","_suspendedTracking","type","currentShape","_currentShape","trigger","originalEvent","document","createElement","getContext","support","current","register"],"mappings":"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","sourcesContent":["import BaseSurface from '../core/surface';\nimport SurfaceFactory from '../core/surface-factory';\nimport { createPromise, promiseAll, bindEvents, elementSize, unbindEvents } from '../util';\nimport RootNode from './root-node';\nimport ShapesQuadTree from '../search/shapes-quad-tree';\nimport SurfaceCursor from './surface-cursor';\n\nvar Surface = (function (BaseSurface) {\n    function Surface(element, options) {\n        BaseSurface.call(this, element, options);\n\n        this.element.innerHTML = this._template(this);\n\n        var canvas = this.element.firstElementChild;\n        var size = elementSize(element);\n\n        canvas.width = size.width;\n        canvas.height = size.height;\n\n        this._rootElement = canvas;\n\n        this._root = new RootNode(canvas, size);\n\n        this._mouseTrackHandler = this._trackMouse.bind(this);\n\n        bindEvents(this.element, {\n            click: this._mouseTrackHandler,\n            mousemove: this._mouseTrackHandler\n        });\n    }\n\n    if ( BaseSurface ) Surface.__proto__ = BaseSurface;\n    Surface.prototype = Object.create( BaseSurface && BaseSurface.prototype );\n    Surface.prototype.constructor = Surface;\n\n    Surface.prototype.destroy = function destroy () {\n        BaseSurface.prototype.destroy.call(this);\n\n        if (this._root) {\n            this._root.destroy();\n            this._root = null;\n        }\n\n        if (this._searchTree) {\n            this._searchTree.clear();\n            delete this._searchTree;\n        }\n\n        if (this._cursor) {\n            this._cursor.destroy();\n            delete this._cursor;\n        }\n\n        unbindEvents(this.element, {\n            click: this._mouseTrackHandler,\n            mousemove: this._mouseTrackHandler\n        });\n    };\n\n    Surface.prototype.draw = function draw (element) {\n        BaseSurface.prototype.draw.call(this, element);\n        this._root.load([ element ], undefined, this.options.cors);\n\n        if (this._searchTree) {\n            this._searchTree.add([ element ]);\n        }\n    };\n\n    Surface.prototype.clear = function clear () {\n        BaseSurface.prototype.clear.call(this);\n        this._root.clear();\n\n        if (this._searchTree) {\n            this._searchTree.clear();\n        }\n\n        if (this._cursor) {\n            this._cursor.clear();\n        }\n    };\n\n    Surface.prototype.eventTarget = function eventTarget (e) {\n        if (this._searchTree) {\n            var point = this._surfacePoint(e);\n            var shape = this._searchTree.pointShape(point);\n            return shape;\n        }\n    };\n\n    Surface.prototype.image = function image () {\n        var ref = this;\n        var root = ref._root;\n        var rootElement = ref._rootElement;\n        var loadingStates = [];\n\n        root.traverse(function (childNode) {\n            if (childNode.loading) {\n                loadingStates.push(childNode.loading);\n            }\n        });\n\n        var promise = createPromise();\n        var resolveDataURL = function () {\n            root._invalidate();\n\n            try {\n                var data = rootElement.toDataURL();\n                promise.resolve(data);\n            } catch (e) {\n                promise.reject(e);\n            }\n        };\n\n        promiseAll(loadingStates).then(resolveDataURL, resolveDataURL);\n\n        return promise;\n    };\n\n    Surface.prototype.suspendTracking = function suspendTracking () {\n        BaseSurface.prototype.suspendTracking.call(this);\n        if (this._searchTree) {\n            this._searchTree.clear();\n            delete this._searchTree;\n        }\n    };\n\n    Surface.prototype.resumeTracking = function resumeTracking () {\n        BaseSurface.prototype.resumeTracking.call(this);\n        if (!this._searchTree) {\n            this._searchTree = new ShapesQuadTree();\n\n            var childNodes = this._root.childNodes;\n            var rootElements = [];\n            for (var idx = 0; idx < childNodes.length; idx++) {\n                rootElements.push(childNodes[idx].srcElement);\n            }\n            this._searchTree.add(rootElements);\n        }\n    };\n\n    Surface.prototype._resize = function _resize () {\n        this._rootElement.width = this._size.width;\n        this._rootElement.height = this._size.height;\n\n        this._root.size = this._size;\n        this._root.invalidate();\n    };\n\n    Surface.prototype._template = function _template () {\n        return \"<canvas style='width: 100%; height: 100%;'></canvas>\";\n    };\n\n    Surface.prototype._enableTracking = function _enableTracking () {\n        this._searchTree = new ShapesQuadTree();\n        this._cursor = new SurfaceCursor(this);\n\n        BaseSurface.prototype._enableTracking.call(this);\n    };\n\n    Surface.prototype._trackMouse = function _trackMouse (e) {\n        if (this._suspendedTracking) {\n            return;\n        }\n\n        var shape = this.eventTarget(e);\n\n        if (e.type !== \"click\") {\n            var currentShape = this._currentShape;\n            if (currentShape && currentShape !== shape) {\n                this.trigger(\"mouseleave\", {\n                    element: currentShape,\n                    originalEvent: e,\n                    type: \"mouseleave\"\n                });\n            }\n\n            if (shape && currentShape !== shape) {\n                this.trigger(\"mouseenter\", {\n                    element: shape,\n                    originalEvent: e,\n                    type: \"mouseenter\"\n                });\n            }\n\n            this.trigger(\"mousemove\", {\n                element: shape,\n                originalEvent: e,\n                type: \"mousemove\"\n            });\n\n            this._currentShape = shape;\n        } else if (shape) {\n            this.trigger(\"click\", {\n                element: shape,\n                originalEvent: e,\n                type: \"click\"\n            });\n        }\n    };\n\n    return Surface;\n}(BaseSurface));\n\nSurface.prototype.type = \"canvas\";\n\nif (typeof document !== \"undefined\" && document.createElement(\"canvas\").getContext) {\n    BaseSurface.support.canvas = true;\n    SurfaceFactory.current.register(\"canvas\", Surface, 20);\n}\n\nexport default Surface;\n"]},"metadata":{},"sourceType":"module"}