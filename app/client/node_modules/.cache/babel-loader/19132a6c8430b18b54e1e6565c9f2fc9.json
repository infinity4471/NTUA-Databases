{"ast":null,"code":"import * as React from 'react';\n/** @hidden */\n\nexport var useAnimation = function (config, deps) {\n  var offset = React.useRef(0);\n  var mount = React.useRef(false);\n  var animationFrame = React.useRef();\n\n  var animate = function (transition) {\n    var duration = transition.duration;\n    var start;\n    var progress;\n    var skip = offset.current && 1 - offset.current;\n\n    if (transition.onStart) {\n      transition.onStart();\n    }\n\n    var frame = function (timestamp) {\n      if (!start) {\n        start = timestamp;\n      }\n\n      progress = timestamp - start + 1;\n      var rate = progress / duration + skip;\n\n      if (rate <= 1) {\n        if (transition.onUpdate) {\n          transition.onUpdate(rate);\n        }\n\n        animationFrame.current = window.requestAnimationFrame(frame);\n        offset.current = rate;\n      } else {\n        if (transition.onEnd) {\n          transition.onEnd(1);\n        }\n\n        offset.current = 0;\n      }\n    };\n\n    animationFrame.current = window.requestAnimationFrame(frame);\n  };\n\n  React.useEffect(function () {\n    animate(config);\n    return function () {\n      if (animationFrame.current) {\n        window.cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, deps);\n  React.useEffect(function () {\n    mount.current = true;\n  }, []);\n};","map":{"version":3,"sources":["../../../src/hooks/useAnimation.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AAYA;;AACA,OAAO,IAAM,YAAY,GAAG,UAAC,MAAD,EAA0B,IAA1B,EAAqC;AAC7D,MAAM,MAAM,GAAG,KAAK,CAAC,MAAN,CAAa,CAAb,CAAf;AACA,MAAM,KAAK,GAAG,KAAK,CAAC,MAAN,CAAa,KAAb,CAAd;AACA,MAAM,cAAc,GAAG,KAAK,CAAC,MAAN,EAAvB;;AAEA,MAAM,OAAO,GAAG,UAAA,UAAA,EAAU;AACtB,QAAM,QAAQ,GAAG,UAAU,CAAC,QAA5B;AACA,QAAI,KAAJ;AACA,QAAI,QAAJ;AACA,QAAI,IAAI,GAAG,MAAM,CAAC,OAAP,IAAkB,IAAI,MAAM,CAAC,OAAxC;;AACA,QAAI,UAAU,CAAC,OAAf,EAAwB;AACpB,MAAA,UAAU,CAAC,OAAX;AACH;;AACD,QAAM,KAAK,GAAG,UAAA,SAAA,EAAS;AACnB,UAAI,CAAC,KAAL,EAAY;AACR,QAAA,KAAK,GAAG,SAAR;AACH;;AACD,MAAA,QAAQ,GAAG,SAAS,GAAG,KAAZ,GAAoB,CAA/B;AACA,UAAM,IAAI,GAAG,QAAQ,GAAG,QAAX,GAAsB,IAAnC;;AACA,UAAI,IAAI,IAAI,CAAZ,EAAe;AACX,YAAI,UAAU,CAAC,QAAf,EAAyB;AACrB,UAAA,UAAU,CAAC,QAAX,CAAoB,IAApB;AACH;;AACD,QAAA,cAAc,CAAC,OAAf,GAAyB,MAAM,CAAC,qBAAP,CAA6B,KAA7B,CAAzB;AACA,QAAA,MAAM,CAAC,OAAP,GAAiB,IAAjB;AACH,OAND,MAMO;AACH,YAAI,UAAU,CAAC,KAAf,EAAsB;AAClB,UAAA,UAAU,CAAC,KAAX,CAAiB,CAAjB;AACH;;AACD,QAAA,MAAM,CAAC,OAAP,GAAiB,CAAjB;AACH;AACJ,KAlBD;;AAmBA,IAAA,cAAc,CAAC,OAAf,GAAyB,MAAM,CAAC,qBAAP,CAA6B,KAA7B,CAAzB;AACH,GA5BD;;AA6BA,EAAA,KAAK,CAAC,SAAN,CACI,YAAA;AACI,IAAA,OAAO,CAAC,MAAD,CAAP;AAEA,WAAO,YAAA;AACH,UAAI,cAAc,CAAC,OAAnB,EAA4B;AACxB,QAAA,MAAM,CAAC,oBAAP,CAA4B,cAAc,CAAC,OAA3C;AACH;AACJ,KAJD;AAKH,GATL,EAUI,IAVJ;AAaA,EAAA,KAAK,CAAC,SAAN,CACI,YAAA;AACI,IAAA,KAAK,CAAC,OAAN,GAAgB,IAAhB;AACH,GAHL,EAII,EAJJ;AAMH,CArDM","sourceRoot":"","sourcesContent":["import * as React from 'react';\n/** @hidden */\nexport var useAnimation = function (config, deps) {\n    var offset = React.useRef(0);\n    var mount = React.useRef(false);\n    var animationFrame = React.useRef();\n    var animate = function (transition) {\n        var duration = transition.duration;\n        var start;\n        var progress;\n        var skip = offset.current && 1 - offset.current;\n        if (transition.onStart) {\n            transition.onStart();\n        }\n        var frame = function (timestamp) {\n            if (!start) {\n                start = timestamp;\n            }\n            progress = timestamp - start + 1;\n            var rate = progress / duration + skip;\n            if (rate <= 1) {\n                if (transition.onUpdate) {\n                    transition.onUpdate(rate);\n                }\n                animationFrame.current = window.requestAnimationFrame(frame);\n                offset.current = rate;\n            }\n            else {\n                if (transition.onEnd) {\n                    transition.onEnd(1);\n                }\n                offset.current = 0;\n            }\n        };\n        animationFrame.current = window.requestAnimationFrame(frame);\n    };\n    React.useEffect(function () {\n        animate(config);\n        return function () {\n            if (animationFrame.current) {\n                window.cancelAnimationFrame(animationFrame.current);\n            }\n        };\n    }, deps);\n    React.useEffect(function () {\n        mount.current = true;\n    }, []);\n};\n//# sourceMappingURL=useAnimation.js.map"]},"metadata":{},"sourceType":"module"}