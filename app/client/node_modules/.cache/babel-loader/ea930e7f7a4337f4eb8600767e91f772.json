{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { messages, date, time, dateTimePickerCancel as cancel, dateTimePickerSet as set } from '../messages';\nimport { Button, ButtonGroup } from '@progress/kendo-react-buttons';\nimport { Calendar } from '../calendar/components/Calendar';\nimport { TimePart } from '../timepicker/TimePart';\nimport { setTime, getToday, MIN_TIME, MAX_TIME } from '../utils';\nimport { isEqualDate } from '@progress/kendo-date-math';\nimport { Keys, classNames } from '@progress/kendo-react-common';\nimport { MIDNIGHT_DATE } from '../defaults';\nimport { getNow } from '../timepicker/utils';\n/**\n * @hidden\n */\n\nvar DateTimeSelector =\n/** @class */\nfunction (_super) {\n  __extends(DateTimeSelector, _super);\n\n  function DateTimeSelector(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.focus = function (args) {\n      // Async to avoid stealing the focus from the DateInput on close\n      Promise.resolve().then(function () {\n        if (_this.state.tab === 'time' && _this._timePart) {\n          _this._timePart.focus(args);\n        }\n\n        if (_this.state.tab === 'date' && _this._calendar && _this._calendar.element) {\n          _this._calendar.element.focus(args);\n        }\n      });\n    };\n\n    _this.move = function (direction) {\n      if (direction === 'right' && _this.state.tab === 'time') {\n        return;\n      }\n\n      if (direction === 'left' && _this.state.tab === 'date') {\n        return;\n      }\n\n      var nextPart = direction === 'left' ? 'date' : 'time';\n      _this.shouldFocusPart = true;\n\n      _this.setState({\n        tab: nextPart\n      });\n    };\n\n    _this.handleReject = function (event) {\n      _this.setState({\n        dateValue: _this.props.value,\n        timeValue: _this.props.value || MIDNIGHT_DATE\n      });\n\n      var value = _this.mergeDate(_this.props.value, _this.props.value || MIDNIGHT_DATE);\n\n      if (_this.props.onReject) {\n        var args = {\n          nativeEvent: event.nativeEvent,\n          syntheticEvent: event,\n          target: _this,\n          value: value\n        };\n\n        _this.props.onReject.call(undefined, args);\n      }\n    };\n\n    _this.handleAccept = function (event, timeOverride) {\n      if (!_this.state.dateValue || !_this.state.timeValue || !_this.hasDateValue) {\n        return;\n      }\n\n      var value = _this.mergeDate(_this.state.dateValue, timeOverride || _this.state.timeValue);\n\n      _this.props.onChange.call(undefined, {\n        syntheticEvent: event,\n        nativeEvent: event.nativeEvent,\n        value: value,\n        target: _this\n      });\n    };\n\n    _this.handleNowClick = function (event) {\n      _this.setState({\n        timeValue: getNow()\n      });\n\n      _this.handleAccept(event, getNow());\n    };\n\n    _this.handleCalendarValueChange = function (event) {\n      event.syntheticEvent.stopPropagation();\n\n      _this.setState({\n        dateValue: event.value,\n        tab: 'time'\n      });\n\n      _this.shouldFocusPart = true;\n    };\n\n    _this.handleTimeListContainerChange = function (candidate) {\n      _this.setState({\n        timeValue: candidate\n      });\n    };\n\n    _this.handleDateClick = function (event) {\n      event.stopPropagation();\n\n      _this.move('left');\n    };\n\n    _this.handleTimeClick = function (event) {\n      event.stopPropagation();\n\n      _this.move('right');\n    };\n\n    _this.handleKeyDown = function (event) {\n      var keyCode = event.keyCode,\n          altKey = event.altKey;\n\n      switch (keyCode) {\n        case Keys.enter:\n          if (!_this.hasActiveButton() && _this.hasDateValue) {\n            _this.handleAccept(event);\n          }\n\n          return;\n\n        case Keys.left:\n          if (!altKey) {\n            return;\n          }\n\n          _this.move('left');\n\n          return;\n\n        case Keys.right:\n          if (!altKey) {\n            return;\n          }\n\n          _this.move('right');\n\n          return;\n\n        default:\n          return;\n      }\n    };\n\n    _this.handleTimePartMount = function (value) {\n      _this.setState({\n        timeValue: value\n      });\n    };\n\n    _this.state = {\n      tab: 'date',\n      dateValue: _this.props.value,\n      timeValue: _this.props.value || MIDNIGHT_DATE\n    };\n    return _this;\n  }\n\n  Object.defineProperty(DateTimeSelector.prototype, \"calendar\", {\n    get: function () {\n      return this._calendar;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateTimeSelector.prototype, \"timePart\", {\n    get: function () {\n      return this._timePart;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateTimeSelector.prototype, \"hasDateValue\", {\n    get: function () {\n      return this.state.dateValue !== null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DateTimeSelector.prototype.componentDidUpdate = function () {\n    if (this.shouldFocusPart) {\n      this.focus({\n        preventScroll: true\n      });\n    }\n\n    this.shouldFocusPart = false;\n  };\n\n  DateTimeSelector.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        disabled = _a.disabled,\n        cancelButton = _a.cancelButton,\n        min = _a.min,\n        max = _a.max,\n        weekNumber = _a.weekNumber,\n        focusedDate = _a.focusedDate,\n        format = _a.format;\n    var rootClassName = classNames({\n      'k-date-tab': this.state.tab === 'date',\n      'k-time-tab': this.state.tab === 'time',\n      'k-state-disabled': disabled\n    }, 'k-datetime-wrap');\n    var setButtonClassName = classNames({\n      'k-state-disabled': !this.hasDateValue\n    }, 'k-time-accept k-button k-primary');\n    var localizationService = provideLocalizationService(this);\n    var dateMessage = localizationService.toLanguageString(date, messages[date]);\n    var timeMessage = localizationService.toLanguageString(time, messages[time]);\n    var cancelMessage = localizationService.toLanguageString(cancel, messages[cancel]);\n    var setMessage = localizationService.toLanguageString(set, messages[set]);\n    return React.createElement(\"div\", {\n      onKeyDown: this.handleKeyDown,\n      className: rootClassName,\n      tabIndex: -1\n    }, React.createElement(\"div\", {\n      className: \"k-datetime-buttongroup\"\n    }, React.createElement(ButtonGroup, {\n      width: \"100%\"\n    }, React.createElement(Button, {\n      selected: this.state.tab === 'date',\n      togglable: true,\n      onClick: this.handleDateClick\n    }, dateMessage), React.createElement(Button, {\n      selected: this.state.tab === 'time',\n      togglable: true,\n      onClick: this.handleTimeClick\n    }, timeMessage))), React.createElement(\"div\", {\n      className: \"k-datetime-selector\"\n    }, React.createElement(\"div\", {\n      className: \"k-datetime-calendar-wrap\"\n    }, React.createElement(Calendar, {\n      key: 0,\n      disabled: disabled || this.state.tab !== 'date',\n      ref: function (calendar) {\n        _this._calendar = calendar;\n      },\n      value: this.state.dateValue,\n      min: min,\n      max: max,\n      weekNumber: weekNumber,\n      focusedDate: focusedDate,\n      onChange: this.handleCalendarValueChange,\n      navigation: false\n    })), React.createElement(\"div\", {\n      className: \"k-datetime-time-wrap\"\n    }, React.createElement(TimePart, {\n      key: 1,\n      onNowClick: this.handleNowClick,\n      disabled: disabled || this.state.tab !== 'time',\n      ref: function (timePart) {\n        _this._timePart = timePart;\n      },\n      min: this.minTime || MIN_TIME,\n      max: this.maxTime || MAX_TIME,\n      value: this.state.timeValue,\n      format: format,\n      onChange: this.handleTimeListContainerChange,\n      onMount: this.handleTimePartMount\n    }))), React.createElement(\"div\", {\n      className: \"k-datetime-footer k-action-buttons\"\n    }, cancelButton && React.createElement(\"button\", __assign({\n      ref: function (btn) {\n        _this._cancelButton = btn;\n      },\n      className: \"k-button k-time-cancel\",\n      onClick: this.handleReject,\n      title: cancelMessage\n    }, {\n      'aria-label': cancelMessage\n    }), cancelMessage), React.createElement(\"button\", __assign({\n      ref: function (btn) {\n        _this._acceptButton = btn;\n      },\n      className: setButtonClassName,\n      onClick: this.handleAccept,\n      title: setMessage\n    }, {\n      'aria-label': setMessage\n    }), setMessage)));\n  };\n\n  Object.defineProperty(DateTimeSelector.prototype, \"minTime\", {\n    get: function () {\n      return this.props.minTime !== undefined ? this.props.minTime : this.normalizeRange(this.props.min, this.state.dateValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(DateTimeSelector.prototype, \"maxTime\", {\n    get: function () {\n      return this.props.maxTime !== undefined ? this.props.maxTime : this.normalizeRange(this.props.max, this.state.dateValue);\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  DateTimeSelector.prototype.normalizeRange = function (candidate, value) {\n    return isEqualDate(candidate, value || getToday()) ? candidate : null;\n  };\n\n  DateTimeSelector.prototype.hasActiveButton = function () {\n    if (!this._acceptButton) {\n      return false;\n    }\n\n    return document.activeElement === this._acceptButton || document.activeElement === this._cancelButton;\n  };\n\n  DateTimeSelector.prototype.mergeTime = function (current, candidate) {\n    return current && candidate ? setTime(candidate, current) : candidate;\n  };\n\n  DateTimeSelector.prototype.mergeDate = function (candidate, value) {\n    return candidate ? setTime(candidate || getToday(), value) : value;\n  };\n\n  return DateTimeSelector;\n}(React.Component);\n\nexport { DateTimeSelector };\nregisterForLocalization(DateTimeSelector);","map":{"version":3,"sources":["../../../src/datetimepicker/DateTimeSelector.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { messages, date, time, dateTimePickerCancel as cancel, dateTimePickerSet as set } from '../messages';\nimport { Button, ButtonGroup } from '@progress/kendo-react-buttons';\nimport { Calendar } from '../calendar/components/Calendar';\nimport { TimePart } from '../timepicker/TimePart';\nimport { setTime, getToday, MIN_TIME, MAX_TIME } from '../utils';\nimport { isEqualDate } from '@progress/kendo-date-math';\nimport { Keys, classNames } from '@progress/kendo-react-common';\nimport { MIDNIGHT_DATE } from '../defaults';\nimport { getNow } from '../timepicker/utils';\n/**\n * @hidden\n */\nvar DateTimeSelector = /** @class */ (function (_super) {\n    __extends(DateTimeSelector, _super);\n    function DateTimeSelector(props) {\n        var _this = _super.call(this, props) || this;\n        _this.focus = function (args) {\n            // Async to avoid stealing the focus from the DateInput on close\n            Promise.resolve().then(function () {\n                if (_this.state.tab === 'time' && _this._timePart) {\n                    _this._timePart.focus(args);\n                }\n                if (_this.state.tab === 'date' && _this._calendar && _this._calendar.element) {\n                    _this._calendar.element.focus(args);\n                }\n            });\n        };\n        _this.move = function (direction) {\n            if (direction === 'right' && _this.state.tab === 'time') {\n                return;\n            }\n            if (direction === 'left' && _this.state.tab === 'date') {\n                return;\n            }\n            var nextPart = direction === 'left' ? 'date' : 'time';\n            _this.shouldFocusPart = true;\n            _this.setState({ tab: nextPart });\n        };\n        _this.handleReject = function (event) {\n            _this.setState({ dateValue: _this.props.value, timeValue: _this.props.value || MIDNIGHT_DATE });\n            var value = _this.mergeDate(_this.props.value, _this.props.value || MIDNIGHT_DATE);\n            if (_this.props.onReject) {\n                var args = {\n                    nativeEvent: event.nativeEvent,\n                    syntheticEvent: event,\n                    target: _this,\n                    value: value\n                };\n                _this.props.onReject.call(undefined, args);\n            }\n        };\n        _this.handleAccept = function (event, timeOverride) {\n            if (!_this.state.dateValue || !_this.state.timeValue || !_this.hasDateValue) {\n                return;\n            }\n            var value = _this.mergeDate(_this.state.dateValue, timeOverride || _this.state.timeValue);\n            _this.props.onChange.call(undefined, {\n                syntheticEvent: event,\n                nativeEvent: event.nativeEvent,\n                value: value,\n                target: _this\n            });\n        };\n        _this.handleNowClick = function (event) {\n            _this.setState({ timeValue: getNow() });\n            _this.handleAccept(event, getNow());\n        };\n        _this.handleCalendarValueChange = function (event) {\n            event.syntheticEvent.stopPropagation();\n            _this.setState({ dateValue: event.value, tab: 'time' });\n            _this.shouldFocusPart = true;\n        };\n        _this.handleTimeListContainerChange = function (candidate) {\n            _this.setState({ timeValue: candidate });\n        };\n        _this.handleDateClick = function (event) {\n            event.stopPropagation();\n            _this.move('left');\n        };\n        _this.handleTimeClick = function (event) {\n            event.stopPropagation();\n            _this.move('right');\n        };\n        _this.handleKeyDown = function (event) {\n            var keyCode = event.keyCode, altKey = event.altKey;\n            switch (keyCode) {\n                case Keys.enter:\n                    if (!_this.hasActiveButton() && _this.hasDateValue) {\n                        _this.handleAccept(event);\n                    }\n                    return;\n                case Keys.left:\n                    if (!altKey) {\n                        return;\n                    }\n                    _this.move('left');\n                    return;\n                case Keys.right:\n                    if (!altKey) {\n                        return;\n                    }\n                    _this.move('right');\n                    return;\n                default:\n                    return;\n            }\n        };\n        _this.handleTimePartMount = function (value) {\n            _this.setState({ timeValue: value });\n        };\n        _this.state = {\n            tab: 'date',\n            dateValue: _this.props.value,\n            timeValue: _this.props.value || MIDNIGHT_DATE\n        };\n        return _this;\n    }\n    Object.defineProperty(DateTimeSelector.prototype, \"calendar\", {\n        get: function () {\n            return this._calendar;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateTimeSelector.prototype, \"timePart\", {\n        get: function () {\n            return this._timePart;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateTimeSelector.prototype, \"hasDateValue\", {\n        get: function () {\n            return this.state.dateValue !== null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DateTimeSelector.prototype.componentDidUpdate = function () {\n        if (this.shouldFocusPart) {\n            this.focus({ preventScroll: true });\n        }\n        this.shouldFocusPart = false;\n    };\n    DateTimeSelector.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, disabled = _a.disabled, cancelButton = _a.cancelButton, min = _a.min, max = _a.max, weekNumber = _a.weekNumber, focusedDate = _a.focusedDate, format = _a.format;\n        var rootClassName = classNames({\n            'k-date-tab': this.state.tab === 'date',\n            'k-time-tab': this.state.tab === 'time',\n            'k-state-disabled': disabled\n        }, 'k-datetime-wrap');\n        var setButtonClassName = classNames({ 'k-state-disabled': !this.hasDateValue }, 'k-time-accept k-button k-primary');\n        var localizationService = provideLocalizationService(this);\n        var dateMessage = localizationService.toLanguageString(date, messages[date]);\n        var timeMessage = localizationService.toLanguageString(time, messages[time]);\n        var cancelMessage = localizationService.toLanguageString(cancel, messages[cancel]);\n        var setMessage = localizationService.toLanguageString(set, messages[set]);\n        return (React.createElement(\"div\", { onKeyDown: this.handleKeyDown, className: rootClassName, tabIndex: -1 },\n            React.createElement(\"div\", { className: \"k-datetime-buttongroup\" },\n                React.createElement(ButtonGroup, { width: \"100%\" },\n                    React.createElement(Button, { selected: this.state.tab === 'date', togglable: true, onClick: this.handleDateClick }, dateMessage),\n                    React.createElement(Button, { selected: this.state.tab === 'time', togglable: true, onClick: this.handleTimeClick }, timeMessage))),\n            React.createElement(\"div\", { className: \"k-datetime-selector\" },\n                React.createElement(\"div\", { className: \"k-datetime-calendar-wrap\" }, React.createElement(Calendar, { key: 0, disabled: disabled || this.state.tab !== 'date', ref: function (calendar) { _this._calendar = calendar; }, value: this.state.dateValue, min: min, max: max, weekNumber: weekNumber, focusedDate: focusedDate, onChange: this.handleCalendarValueChange, navigation: false })),\n                React.createElement(\"div\", { className: \"k-datetime-time-wrap\" }, React.createElement(TimePart, { key: 1, onNowClick: this.handleNowClick, disabled: disabled || this.state.tab !== 'time', ref: function (timePart) { _this._timePart = timePart; }, min: this.minTime || MIN_TIME, max: this.maxTime || MAX_TIME, value: this.state.timeValue, format: format, onChange: this.handleTimeListContainerChange, onMount: this.handleTimePartMount }))),\n            React.createElement(\"div\", { className: \"k-datetime-footer k-action-buttons\" },\n                cancelButton && React.createElement(\"button\", __assign({ ref: function (btn) { _this._cancelButton = btn; }, className: \"k-button k-time-cancel\", onClick: this.handleReject, title: cancelMessage }, { 'aria-label': cancelMessage }), cancelMessage),\n                React.createElement(\"button\", __assign({ ref: function (btn) { _this._acceptButton = btn; }, className: setButtonClassName, onClick: this.handleAccept, title: setMessage }, { 'aria-label': setMessage }), setMessage))));\n    };\n    Object.defineProperty(DateTimeSelector.prototype, \"minTime\", {\n        get: function () {\n            return this.props.minTime !== undefined\n                ? this.props.minTime\n                : this.normalizeRange(this.props.min, this.state.dateValue);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DateTimeSelector.prototype, \"maxTime\", {\n        get: function () {\n            return this.props.maxTime !== undefined\n                ? this.props.maxTime\n                : this.normalizeRange(this.props.max, this.state.dateValue);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DateTimeSelector.prototype.normalizeRange = function (candidate, value) {\n        return isEqualDate(candidate, value || getToday())\n            ? candidate\n            : null;\n    };\n    DateTimeSelector.prototype.hasActiveButton = function () {\n        if (!this._acceptButton) {\n            return false;\n        }\n        return document.activeElement === this._acceptButton\n            || document.activeElement === this._cancelButton;\n    };\n    DateTimeSelector.prototype.mergeTime = function (current, candidate) {\n        return current && candidate ? setTime(candidate, current) : candidate;\n    };\n    DateTimeSelector.prototype.mergeDate = function (candidate, value) {\n        return candidate ? setTime(candidate || getToday(), value) : value;\n    };\n    return DateTimeSelector;\n}(React.Component));\nexport { DateTimeSelector };\nregisterForLocalization(DateTimeSelector);\n//# sourceMappingURL=DateTimeSelector.js.map"]},"metadata":{},"sourceType":"module"}