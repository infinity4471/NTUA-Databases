{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, guid, Keys } from '@progress/kendo-react-common';\nimport { cloneDate, getDate, isEqualDate } from '@progress/kendo-date-math';\nimport { provideIntlService, registerForIntl } from '@progress/kendo-react-intl';\nimport { ViewList } from './ViewList';\nimport { Navigation } from './Navigation';\nimport { MIN_DATE, MAX_DATE } from '../../defaults';\nimport { CalendarViewEnum } from '../models';\nimport { getToday, dateInRange, isInRange, viewInRange } from '../../utils';\nimport { BusViewService, DOMService, ScrollSyncService, NavigationService } from '../services';\n\nvar virtualizationProp = function (x) {\n  return x ? x.virtualization : null;\n};\n\nvar calculateValue = function (min, max, stateValue, propValue) {\n  if (min === void 0) {\n    min = Calendar.defaultProps.min;\n  }\n\n  if (max === void 0) {\n    max = Calendar.defaultProps.max;\n  }\n\n  return propValue !== undefined ? propValue !== null && isInRange(propValue, min, max) ? propValue : null : stateValue !== null && isInRange(stateValue, min, max) ? stateValue : null;\n};\n\nvar Calendar =\n/** @class */\nfunction (_super) {\n  __extends(Calendar, _super);\n\n  function Calendar(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.cellUID = guid();\n    _this.id = guid();\n    _this.isActive = false;\n    _this.didNavigationChange = false;\n    /**\n     * @hidden\n     */\n\n    _this.focus = function () {\n      if (_this._element) {\n        _this._element.focus();\n      }\n    };\n\n    _this.shouldScroll = function () {\n      return _this.didNavigationChange;\n    };\n\n    _this.handleScroll = function (event) {\n      if (!_this.scrollSyncService) {\n        return;\n      }\n\n      _this.scrollSyncService.sync(virtualizationProp(_this.Navigation), virtualizationProp(_this.calendarViewList), event);\n    };\n\n    _this.handleNavigationChange = function (event) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      _this.didNavigationChange = true;\n      var focusedDate = cloneDate(event.value);\n\n      _this.setState({\n        focusedDate: focusedDate\n      });\n    };\n\n    _this.handleViewChange = function (_a) {\n      var view = _a.view;\n\n      _this.scrollSyncService.configure(view);\n\n      _this.setState({\n        activeView: view\n      });\n    };\n\n    _this.handleDateChange = function (event) {\n      var value = cloneDate(event.value);\n      var focusedDate = cloneDate(event.value);\n\n      var canNavigateDown = _this.bus.canMoveDown(_this.state.activeView);\n\n      if (_this.props.disabled) {\n        return;\n      }\n\n      if (canNavigateDown) {\n        if (event.isTodayClick) {\n          _this.bus.moveToBottom(_this.state.activeView);\n        } else {\n          _this.bus.moveDown(_this.state.activeView, event.syntheticEvent);\n\n          _this.setState({\n            focusedDate: focusedDate\n          });\n\n          return;\n        }\n      }\n\n      _this.setState({\n        value: value,\n        focusedDate: focusedDate\n      });\n\n      _this.valueDuringOnChange = value;\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        var args = {\n          syntheticEvent: event.syntheticEvent,\n          nativeEvent: event.nativeEvent,\n          value: value,\n          target: _this\n        };\n        onChange.call(undefined, args);\n      }\n\n      _this.valueDuringOnChange = undefined;\n    };\n\n    _this.handleFocus = function (event) {\n      _this.isActive = true;\n\n      if (!_this.calendarViewList) {\n        return;\n      }\n\n      _this.calendarViewList.focusActiveDate();\n\n      var onFocus = _this.props.onFocus;\n\n      if (onFocus) {\n        onFocus.call(undefined, event);\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      _this.isActive = false;\n\n      if (!_this.calendarViewList) {\n        return;\n      }\n\n      _this.calendarViewList.blurActiveDate();\n\n      var onBlur = _this.props.onBlur;\n\n      if (onBlur) {\n        onBlur.call(undefined, event);\n      }\n    };\n\n    _this.handleKeyDown = function (event) {\n      var keyCode = event.keyCode;\n\n      if (keyCode === Keys.enter) {\n        if (_this.value !== null && isEqualDate(_this.focusedDate, _this.value)) {\n          var viewDate = dateInRange(_this.focusedDate, _this.min, _this.max);\n          virtualizationProp(_this.calendarViewList).scrollToIndex(_this.service.skip(viewDate, _this.min));\n        }\n\n        var args = {\n          syntheticEvent: event,\n          nativeEvent: event.nativeEvent,\n          value: _this.focusedDate,\n          target: _this\n        };\n\n        _this.handleDateChange.call(undefined, args);\n      } else {\n        var candidate = dateInRange(_this.navigation.move(_this.focusedDate, _this.navigation.action(event), _this.state.activeView, _this.service, event), _this.min, _this.max);\n\n        if (isEqualDate(_this.focusedDate, candidate)) {\n          return;\n        }\n\n        _this.setState({\n          focusedDate: candidate\n        });\n      }\n\n      event.preventDefault();\n    };\n\n    _this.handleMouseDown = function (event) {\n      event.preventDefault();\n    };\n\n    _this.handleClick = function (_) {\n      if (_this._element) {\n        _this._element.focus({\n          preventScroll: true\n        });\n      }\n    };\n\n    var value = calculateValue(_this.min, _this.max, _this.props.defaultValue || Calendar.defaultProps.defaultValue, _this.props.value);\n    _this.state = {\n      value: value,\n      activeView: viewInRange(CalendarViewEnum[props.defaultActiveView], _this.bottomView, _this.topView),\n      focusedDate: dateInRange(props.focusedDate || value || getToday(), _this.min, _this.max)\n    };\n    _this.dom = new DOMService();\n    _this.bus = new BusViewService(_this.handleViewChange);\n    _this.navigation = new NavigationService(_this.bus);\n    _this.oldValue = value;\n    return _this;\n  }\n\n  Object.defineProperty(Calendar.prototype, \"element\", {\n    /**\n     * Gets the wrapping element of the Calendar.\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Calendar.prototype, \"value\", {\n    /**\n     * Gets the value of the Calendar.\n     */\n    get: function () {\n      return this.valueDuringOnChange !== undefined ? this.valueDuringOnChange : this.props.value !== undefined ? this.props.value : this.state.value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Calendar.prototype, \"min\", {\n    get: function () {\n      return getDate(this.props.min !== undefined ? this.props.min : Calendar.defaultProps.min);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Calendar.prototype, \"max\", {\n    get: function () {\n      return getDate(this.props.max !== undefined ? this.props.max : Calendar.defaultProps.max);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Calendar.prototype, \"bottomView\", {\n    get: function () {\n      return CalendarViewEnum[this.props.bottomView !== undefined ? this.props.bottomView : Calendar.defaultProps.bottomView];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Calendar.prototype, \"topView\", {\n    get: function () {\n      return CalendarViewEnum[this.props.topView !== undefined ? this.props.topView : Calendar.defaultProps.topView];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  Calendar.prototype.componentDidMount = function () {\n    var _this = this; // Async calculation of height to avoid animation cancellation\n\n\n    Promise.resolve().then(function () {\n      if (!_this._element) {\n        return;\n      }\n\n      _this.dom.calculateHeights(_this._element);\n\n      _this.scrollSyncService = new ScrollSyncService(_this.dom);\n\n      _this.scrollSyncService.configure(_this.state.activeView);\n\n      _this.forceUpdate();\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  Calendar.prototype.componentDidUpdate = function (_, prevState) {\n    if (prevState.activeView !== this.state.activeView) {\n      this.scrollSyncService.configure(this.state.activeView);\n    }\n\n    if (this.calendarViewList) {\n      this.isActive ? this.calendarViewList.focusActiveDate() : this.calendarViewList.blurActiveDate();\n    }\n\n    this.didNavigationChange = false;\n    this.oldValue = this.value;\n  };\n  /**\n   * @hidden\n   */\n\n\n  Calendar.prototype.render = function () {\n    var _this = this;\n\n    if (this.props._ref) {\n      this.props._ref(this);\n    }\n\n    var didValueChange = this.value !== null && this.oldValue !== null ? !isEqualDate(this.value, this.oldValue) : this.value !== this.oldValue;\n    var activeView = viewInRange(this.state.activeView, CalendarViewEnum[this.props.bottomView !== undefined ? this.props.bottomView : Calendar.defaultProps.bottomView], CalendarViewEnum[this.props.topView !== undefined ? this.props.topView : Calendar.defaultProps.topView]);\n    var value = calculateValue(this.min, this.max, this.value, this.value);\n    var sanitizedValue = value ? getDate(value) : null;\n    this.focusedDate = getDate(dateInRange(didValueChange && value !== null ? value : this.state.focusedDate, this.min, this.max));\n    this.intl = provideIntlService(this);\n    this.bus.configure(this.bottomView, this.topView);\n    this.service = this.bus.service(activeView, this.intl);\n    var rootClassNames = classNames('k-widget k-calendar k-calendar-infinite', {\n      'k-state-disabled': this.props.disabled,\n      'k-week-number': this.props.weekNumber\n    }, this.props.className);\n    var aria = {\n      'aria-disabled': this.props.disabled,\n      'aria-activedescendant': this.cellUID + this.focusedDate.getTime()\n    };\n    var calendarBody = [this.props.navigation && React.createElement(Navigation, {\n      key: 0,\n      ref: function (el) {\n        _this.Navigation = el;\n      },\n      activeView: this.state.activeView,\n      focusedDate: this.focusedDate,\n      min: this.min,\n      max: this.max,\n      onChange: this.handleNavigationChange,\n      service: this.service,\n      dom: this.dom,\n      navigationItem: this.props.navigationItem\n    }), React.createElement(ViewList, {\n      key: 1,\n      ref: function (el) {\n        _this.calendarViewList = el;\n      },\n      activeView: this.state.activeView,\n      focusedDate: this.focusedDate,\n      min: this.min,\n      max: this.max,\n      bus: this.bus,\n      shouldScroll: this.shouldScroll,\n      service: this.service,\n      cell: this.props.cell,\n      weekCell: this.props.weekCell,\n      dom: this.dom,\n      smoothScroll: this.props.smoothScroll,\n      showWeekNumbers: this.props.weekNumber,\n      onChange: this.handleDateChange,\n      value: sanitizedValue,\n      cellUID: this.cellUID,\n      headerTitle: this.props.headerTitle\n    })];\n    return React.createElement(\"div\", __assign({}, aria, {\n      ref: function (el) {\n        _this._element = el;\n      },\n      className: rootClassNames,\n      id: this.props.id || this.id,\n      \"aria-labelledby\": this.props.ariaLabelledBy,\n      \"aria-describedby\": this.props.ariaDescribedBy,\n      role: \"grid\",\n      tabIndex: !this.props.disabled ? this.props.tabIndex || 0 : undefined,\n      onScroll: this.handleScroll,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onKeyDown: this.handleKeyDown,\n      onMouseDown: this.handleMouseDown,\n      onClick: this.handleClick\n    }), calendarBody);\n  };\n  /**\n   * @hidden\n   */\n\n\n  Calendar.propTypes = {\n    className: PropTypes.string,\n    defaultActiveView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n    defaultValue: PropTypes.instanceOf(Date),\n    disabled: PropTypes.bool,\n    focusedDate: PropTypes.instanceOf(Date),\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    max: PropTypes.instanceOf(Date),\n    min: PropTypes.instanceOf(Date),\n    navigation: PropTypes.bool,\n    smoothScroll: PropTypes.bool,\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    tabIndex: PropTypes.number,\n    value: PropTypes.instanceOf(Date),\n    weekNumber: PropTypes.bool,\n    topView: function (props, propName, componentName) {\n      var prop = props[propName];\n      var bottomView = props.bottomView;\n\n      if (prop && bottomView && CalendarViewEnum[prop] < CalendarViewEnum[bottomView]) {\n        return new Error(\"Invalid prop + \" + propName + \" suplied to \" + componentName + \".\\n                    \" + propName + \" can not be smaller than bottomView.\\n                    \");\n      }\n    },\n    bottomView: function (props, propName, componentName) {\n      var prop = props[propName];\n      var topView = props.topView;\n\n      if (prop && topView && CalendarViewEnum[prop] > CalendarViewEnum[topView]) {\n        return new Error(\"Invalid prop + \" + propName + \" suplied to \" + componentName + \".\\n                    \" + propName + \" can not be bigger than topView.\\n                    \");\n      }\n    }\n  };\n  /**\n   * @hidden\n   */\n\n  Calendar.defaultProps = {\n    disabled: false,\n    min: MIN_DATE,\n    max: MAX_DATE,\n    navigation: true,\n    defaultActiveView: 'month',\n    defaultValue: null,\n    smoothScroll: true,\n    topView: 'century',\n    bottomView: 'month'\n  };\n  return Calendar;\n}(React.Component);\n\nexport { Calendar };\nregisterForIntl(Calendar);","map":{"version":3,"sources":["../../../../src/calendar/components/Calendar.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, guid, Keys } from '@progress/kendo-react-common';\nimport { cloneDate, getDate, isEqualDate } from '@progress/kendo-date-math';\nimport { provideIntlService, registerForIntl } from '@progress/kendo-react-intl';\nimport { ViewList } from './ViewList';\nimport { Navigation } from './Navigation';\nimport { MIN_DATE, MAX_DATE } from '../../defaults';\nimport { CalendarViewEnum } from '../models';\nimport { getToday, dateInRange, isInRange, viewInRange } from '../../utils';\nimport { BusViewService, DOMService, ScrollSyncService, NavigationService } from '../services';\nvar virtualizationProp = function (x) { return x ? x.virtualization : null; };\nvar calculateValue = function (min, max, stateValue, propValue) {\n    if (min === void 0) { min = Calendar.defaultProps.min; }\n    if (max === void 0) { max = Calendar.defaultProps.max; }\n    return propValue !== undefined\n        ? propValue !== null && isInRange(propValue, min, max)\n            ? propValue\n            : null\n        : stateValue !== null && isInRange(stateValue, min, max)\n            ? stateValue\n            : null;\n};\nvar Calendar = /** @class */ (function (_super) {\n    __extends(Calendar, _super);\n    function Calendar(props) {\n        var _this = _super.call(this, props) || this;\n        _this.cellUID = guid();\n        _this.id = guid();\n        _this.isActive = false;\n        _this.didNavigationChange = false;\n        /**\n         * @hidden\n         */\n        _this.focus = function () {\n            if (_this._element) {\n                _this._element.focus();\n            }\n        };\n        _this.shouldScroll = function () { return _this.didNavigationChange; };\n        _this.handleScroll = function (event) {\n            if (!_this.scrollSyncService) {\n                return;\n            }\n            _this.scrollSyncService.sync(virtualizationProp(_this.Navigation), virtualizationProp(_this.calendarViewList), event);\n        };\n        _this.handleNavigationChange = function (event) {\n            if (_this.props.disabled) {\n                return;\n            }\n            _this.didNavigationChange = true;\n            var focusedDate = cloneDate(event.value);\n            _this.setState({ focusedDate: focusedDate });\n        };\n        _this.handleViewChange = function (_a) {\n            var view = _a.view;\n            _this.scrollSyncService.configure(view);\n            _this.setState({ activeView: view });\n        };\n        _this.handleDateChange = function (event) {\n            var value = cloneDate(event.value);\n            var focusedDate = cloneDate(event.value);\n            var canNavigateDown = _this.bus.canMoveDown(_this.state.activeView);\n            if (_this.props.disabled) {\n                return;\n            }\n            if (canNavigateDown) {\n                if (event.isTodayClick) {\n                    _this.bus.moveToBottom(_this.state.activeView);\n                }\n                else {\n                    _this.bus.moveDown(_this.state.activeView, event.syntheticEvent);\n                    _this.setState({ focusedDate: focusedDate });\n                    return;\n                }\n            }\n            _this.setState({ value: value, focusedDate: focusedDate });\n            _this.valueDuringOnChange = value;\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                var args = {\n                    syntheticEvent: event.syntheticEvent,\n                    nativeEvent: event.nativeEvent,\n                    value: value,\n                    target: _this\n                };\n                onChange.call(undefined, args);\n            }\n            _this.valueDuringOnChange = undefined;\n        };\n        _this.handleFocus = function (event) {\n            _this.isActive = true;\n            if (!_this.calendarViewList) {\n                return;\n            }\n            _this.calendarViewList.focusActiveDate();\n            var onFocus = _this.props.onFocus;\n            if (onFocus) {\n                onFocus.call(undefined, event);\n            }\n        };\n        _this.handleBlur = function (event) {\n            _this.isActive = false;\n            if (!_this.calendarViewList) {\n                return;\n            }\n            _this.calendarViewList.blurActiveDate();\n            var onBlur = _this.props.onBlur;\n            if (onBlur) {\n                onBlur.call(undefined, event);\n            }\n        };\n        _this.handleKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            if (keyCode === Keys.enter) {\n                if (_this.value !== null\n                    && isEqualDate(_this.focusedDate, _this.value)) {\n                    var viewDate = dateInRange(_this.focusedDate, _this.min, _this.max);\n                    virtualizationProp(_this.calendarViewList).scrollToIndex(_this.service.skip(viewDate, _this.min));\n                }\n                var args = {\n                    syntheticEvent: event,\n                    nativeEvent: event.nativeEvent,\n                    value: _this.focusedDate,\n                    target: _this\n                };\n                _this.handleDateChange.call(undefined, args);\n            }\n            else {\n                var candidate = dateInRange(_this.navigation.move(_this.focusedDate, _this.navigation.action(event), _this.state.activeView, _this.service, event), _this.min, _this.max);\n                if (isEqualDate(_this.focusedDate, candidate)) {\n                    return;\n                }\n                _this.setState({ focusedDate: candidate });\n            }\n            event.preventDefault();\n        };\n        _this.handleMouseDown = function (event) {\n            event.preventDefault();\n        };\n        _this.handleClick = function (_) {\n            if (_this._element) {\n                _this._element.focus({ preventScroll: true });\n            }\n        };\n        var value = calculateValue(_this.min, _this.max, _this.props.defaultValue || Calendar.defaultProps.defaultValue, _this.props.value);\n        _this.state = {\n            value: value,\n            activeView: viewInRange(CalendarViewEnum[props.defaultActiveView], _this.bottomView, _this.topView),\n            focusedDate: dateInRange(props.focusedDate\n                || value\n                || getToday(), _this.min, _this.max)\n        };\n        _this.dom = new DOMService();\n        _this.bus = new BusViewService(_this.handleViewChange);\n        _this.navigation = new NavigationService(_this.bus);\n        _this.oldValue = value;\n        return _this;\n    }\n    Object.defineProperty(Calendar.prototype, \"element\", {\n        /**\n         * Gets the wrapping element of the Calendar.\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Calendar.prototype, \"value\", {\n        /**\n         * Gets the value of the Calendar.\n         */\n        get: function () {\n            return this.valueDuringOnChange !== undefined\n                ? this.valueDuringOnChange\n                : this.props.value !== undefined\n                    ? this.props.value\n                    : this.state.value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Calendar.prototype, \"min\", {\n        get: function () {\n            return getDate(this.props.min !== undefined\n                ? this.props.min\n                : Calendar.defaultProps.min);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Calendar.prototype, \"max\", {\n        get: function () {\n            return getDate(this.props.max !== undefined\n                ? this.props.max\n                : Calendar.defaultProps.max);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Calendar.prototype, \"bottomView\", {\n        get: function () {\n            return CalendarViewEnum[this.props.bottomView !== undefined\n                ? this.props.bottomView\n                : Calendar.defaultProps.bottomView];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Calendar.prototype, \"topView\", {\n        get: function () {\n            return CalendarViewEnum[this.props.topView !== undefined\n                ? this.props.topView\n                : Calendar.defaultProps.topView];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    Calendar.prototype.componentDidMount = function () {\n        var _this = this;\n        // Async calculation of height to avoid animation cancellation\n        Promise.resolve().then(function () {\n            if (!_this._element) {\n                return;\n            }\n            _this.dom.calculateHeights(_this._element);\n            _this.scrollSyncService = new ScrollSyncService(_this.dom);\n            _this.scrollSyncService.configure(_this.state.activeView);\n            _this.forceUpdate();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Calendar.prototype.componentDidUpdate = function (_, prevState) {\n        if (prevState.activeView !== this.state.activeView) {\n            this.scrollSyncService.configure(this.state.activeView);\n        }\n        if (this.calendarViewList) {\n            this.isActive ? this.calendarViewList.focusActiveDate() : this.calendarViewList.blurActiveDate();\n        }\n        this.didNavigationChange = false;\n        this.oldValue = this.value;\n    };\n    /**\n     * @hidden\n     */\n    Calendar.prototype.render = function () {\n        var _this = this;\n        if (this.props._ref) {\n            this.props._ref(this);\n        }\n        var didValueChange = this.value !== null && this.oldValue !== null\n            ? !isEqualDate(this.value, this.oldValue)\n            : this.value !== this.oldValue;\n        var activeView = viewInRange(this.state.activeView, CalendarViewEnum[this.props.bottomView !== undefined\n            ? this.props.bottomView\n            : Calendar.defaultProps.bottomView], CalendarViewEnum[this.props.topView !== undefined\n            ? this.props.topView\n            : Calendar.defaultProps.topView]);\n        var value = calculateValue(this.min, this.max, this.value, this.value);\n        var sanitizedValue = value ? getDate(value) : null;\n        this.focusedDate = getDate(dateInRange(didValueChange && value !== null\n            ? value\n            : this.state.focusedDate, this.min, this.max));\n        this.intl = provideIntlService(this);\n        this.bus.configure(this.bottomView, this.topView);\n        this.service = this.bus.service(activeView, this.intl);\n        var rootClassNames = classNames('k-widget k-calendar k-calendar-infinite', {\n            'k-state-disabled': this.props.disabled,\n            'k-week-number': this.props.weekNumber\n        }, this.props.className);\n        var aria = {\n            'aria-disabled': this.props.disabled,\n            'aria-activedescendant': this.cellUID + this.focusedDate.getTime()\n        };\n        var calendarBody = [this.props.navigation && (React.createElement(Navigation, { key: 0, ref: function (el) { _this.Navigation = el; }, activeView: this.state.activeView, focusedDate: this.focusedDate, min: this.min, max: this.max, onChange: this.handleNavigationChange, service: this.service, dom: this.dom, navigationItem: this.props.navigationItem })), (React.createElement(ViewList, { key: 1, ref: function (el) { _this.calendarViewList = el; }, activeView: this.state.activeView, focusedDate: this.focusedDate, min: this.min, max: this.max, bus: this.bus, shouldScroll: this.shouldScroll, service: this.service, cell: this.props.cell, weekCell: this.props.weekCell, dom: this.dom, smoothScroll: this.props.smoothScroll, showWeekNumbers: this.props.weekNumber, onChange: this.handleDateChange, value: sanitizedValue, cellUID: this.cellUID, headerTitle: this.props.headerTitle }))];\n        return (React.createElement(\"div\", __assign({}, aria, { ref: function (el) { _this._element = el; }, className: rootClassNames, id: this.props.id || this.id, \"aria-labelledby\": this.props.ariaLabelledBy, \"aria-describedby\": this.props.ariaDescribedBy, role: \"grid\", tabIndex: !this.props.disabled ? this.props.tabIndex || 0 : undefined, onScroll: this.handleScroll, onFocus: this.handleFocus, onBlur: this.handleBlur, onKeyDown: this.handleKeyDown, onMouseDown: this.handleMouseDown, onClick: this.handleClick }), calendarBody));\n    };\n    /**\n     * @hidden\n     */\n    Calendar.propTypes = {\n        className: PropTypes.string,\n        defaultActiveView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n        defaultValue: PropTypes.instanceOf(Date),\n        disabled: PropTypes.bool,\n        focusedDate: PropTypes.instanceOf(Date),\n        id: PropTypes.string,\n        ariaLabelledBy: PropTypes.string,\n        ariaDescribedBy: PropTypes.string,\n        max: PropTypes.instanceOf(Date),\n        min: PropTypes.instanceOf(Date),\n        navigation: PropTypes.bool,\n        smoothScroll: PropTypes.bool,\n        onBlur: PropTypes.func,\n        onChange: PropTypes.func,\n        onFocus: PropTypes.func,\n        tabIndex: PropTypes.number,\n        value: PropTypes.instanceOf(Date),\n        weekNumber: PropTypes.bool,\n        topView: function (props, propName, componentName) {\n            var prop = props[propName];\n            var bottomView = props.bottomView;\n            if (prop && bottomView && CalendarViewEnum[prop] < CalendarViewEnum[bottomView]) {\n                return new Error(\"Invalid prop + \" + propName + \" suplied to \" + componentName + \".\\n                    \" + propName + \" can not be smaller than bottomView.\\n                    \");\n            }\n        },\n        bottomView: function (props, propName, componentName) {\n            var prop = props[propName];\n            var topView = props.topView;\n            if (prop && topView && CalendarViewEnum[prop] > CalendarViewEnum[topView]) {\n                return new Error(\"Invalid prop + \" + propName + \" suplied to \" + componentName + \".\\n                    \" + propName + \" can not be bigger than topView.\\n                    \");\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Calendar.defaultProps = {\n        disabled: false,\n        min: MIN_DATE,\n        max: MAX_DATE,\n        navigation: true,\n        defaultActiveView: 'month',\n        defaultValue: null,\n        smoothScroll: true,\n        topView: 'century',\n        bottomView: 'month'\n    };\n    return Calendar;\n}(React.Component));\nexport { Calendar };\nregisterForIntl(Calendar);\n//# sourceMappingURL=Calendar.js.map"]},"metadata":{},"sourceType":"module"}