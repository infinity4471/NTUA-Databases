{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService, registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { classNames, guid, Keys } from '@progress/kendo-react-common';\nimport { cloneDate, isEqualDate, getDate } from '@progress/kendo-date-math';\nimport { Action, CalendarViewEnum, EMPTY_SELECTIONRANGE } from '../models';\nimport { MIN_DATE, MAX_DATE } from '../../defaults';\nimport { messages, prevView, nextView } from '../../messages';\nimport { BusViewService, NavigationService } from '../services';\nimport { dateInRange, isInRange, viewInRange, getToday } from '../../utils';\nimport { HorizontalViewList } from './HorizontalViewList';\n\nvar extractDateFromValue = function (min, max, value) {\n  if (min === void 0) {\n    min = MultiViewCalendar.defaultProps.min;\n  }\n\n  if (max === void 0) {\n    max = MultiViewCalendar.defaultProps.max;\n  }\n\n  return value instanceof Date && !Array.isArray(value) && isInRange(getDate(value), min, max) ? getDate(value) : null;\n};\n\nvar extractMultipleFromValue = function (min, max, value) {\n  if (min === void 0) {\n    min = MultiViewCalendar.defaultProps.min;\n  }\n\n  if (max === void 0) {\n    max = MultiViewCalendar.defaultProps.max;\n  }\n\n  return Array.isArray(value) ? value.filter(function (date) {\n    return isInRange(date, min, max);\n  }).map(function (date) {\n    return getDate(date);\n  }) : null;\n};\n\nvar extractRangeFromValue = function (value) {\n  return typeof value === 'object' && !(value instanceof Date) && value !== null && !Array.isArray(value) ? value : EMPTY_SELECTIONRANGE;\n};\n\nvar extractFocusedDate = function (single, multiple, range) {\n  return single || multiple && multiple[0] || range && range.start;\n};\n\nvar extractActiveRange = function (range, single) {\n  return range.start === null && single === null ? 'start' : range.end === null ? 'end' : 'start';\n};\n\nvar MultiViewCalendar =\n/** @class */\nfunction (_super) {\n  __extends(MultiViewCalendar, _super);\n\n  function MultiViewCalendar(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.selectedDate = null;\n    _this.selectedMultiple = null;\n    _this.selectedRange = EMPTY_SELECTIONRANGE;\n    _this.cellUID = guid();\n    _this.activeRangeEnd = 'start';\n    _this.wrapperID = guid();\n    _this.isActive = false;\n    _this.calculateFocusFromValue = true;\n    /**\n     * @hidden\n     */\n\n    _this.focus = function () {\n      if (_this._element) {\n        _this._element.focus();\n      }\n    };\n\n    _this.clampRange = function (value) {\n      return {\n        start: value,\n        end: null\n      };\n    };\n\n    _this.rangeWithFocused = function (range, focusedDate) {\n      return {\n        start: range.start,\n        end: range.end === null && range.start !== null && _this.isActive ? focusedDate : range.end\n      };\n    };\n\n    _this.generateRange = function (candidate, value) {\n      var end = value.end,\n          start = value.start;\n      var shouldSwap = value.start !== null && candidate.getTime() <= value.start.getTime();\n\n      if (!_this.props.allowReverse && shouldSwap) {\n        return {\n          start: candidate,\n          end: _this.selectedRange.start\n        };\n      }\n\n      return _this.activeRange !== 'end' ? {\n        start: candidate,\n        end: end\n      } : {\n        start: start || _this.selectedDate,\n        end: candidate\n      };\n    };\n\n    _this.canNavigate = function (action) {\n      if (!_this.service) {\n        return false;\n      }\n\n      var candidate = _this.service.move(_this.focusedDate, action);\n\n      return _this.min <= candidate && candidate <= _this.max || _this.service.isInSameView(candidate, _this.min) || _this.service.isInSameView(candidate, _this.max);\n    };\n\n    _this.isListInRange = function (list) {\n      return _this.min < list[0] && _this.max > list[Math.max(0, (_this.props.views || MultiViewCalendar.defaultProps.views) - 1)];\n    };\n\n    _this.navigate = function (action) {\n      _this.calculateFocusFromValue = false;\n\n      var candidate = _this.move(action);\n\n      _this.setState({\n        focusedDate: candidate\n      });\n    };\n\n    _this.move = function (action) {\n      return _this.clampDate(_this.service.move(_this.focusedDate, action));\n    };\n\n    _this.clampDate = function (value) {\n      return dateInRange(value, _this.min, _this.max);\n    };\n\n    _this.shouldAutoCorrect = function (candidate, value) {\n      var end = value.end,\n          start = value.start;\n\n      if (_this.activeRange !== 'end') {\n        return end !== null && candidate > end;\n      } else {\n        return start !== null && candidate < start;\n      }\n    };\n\n    _this.handleCellEnter = function (value) {\n      if (_this.props.mode === 'range') {\n        _this.calculateFocusFromValue = false;\n\n        _this.setState({\n          focusedDate: value\n        });\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      event.preventDefault();\n    };\n\n    _this.handleClick = function (_) {\n      if (!_this._element) {\n        return;\n      }\n\n      _this._element.focus({\n        preventScroll: true\n      });\n    };\n\n    _this.handleFocus = function (event) {\n      _this.isActive = true;\n\n      if (!_this.calendarViewList) {\n        return;\n      }\n\n      _this.calendarViewList.focusActiveDate();\n\n      var onFocus = _this.props.onFocus;\n\n      if (onFocus) {\n        onFocus.call(undefined, event);\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      _this.isActive = false;\n\n      if (!_this.calendarViewList) {\n        return;\n      }\n\n      _this.calendarViewList.blurActiveDate();\n\n      var onBlur = _this.props.onBlur;\n\n      if (onBlur) {\n        onBlur.call(undefined, event);\n      }\n    };\n\n    _this.handlePrevButtonClick = function () {\n      _this.navigate(Action.PrevView);\n    };\n\n    _this.handleNextButtonClick = function () {\n      _this.navigate(Action.NextView);\n    };\n\n    _this.handleKeyDown = function (event) {\n      var keyCode = event.keyCode;\n\n      if (keyCode === Keys.enter) {\n        var args = {\n          syntheticEvent: event,\n          nativeEvent: event.nativeEvent,\n          value: _this.focusedDate,\n          target: _this\n        };\n\n        _this.handleDateChange.call(undefined, args);\n      } else {\n        var candidate = dateInRange(_this.navigation.move(_this.focusedDate, _this.navigation.action(event), _this.state.activeView, _this.service, event), _this.min, _this.max);\n\n        if (isEqualDate(_this.focusedDate, candidate)) {\n          return;\n        }\n\n        _this.calculateFocusFromValue = false;\n\n        _this.setState({\n          focusedDate: candidate\n        });\n      }\n\n      event.preventDefault();\n    };\n\n    _this.handleViewChange = function (_a) {\n      var view = _a.view;\n\n      _this.setState({\n        activeView: view\n      });\n    };\n\n    _this.handleDateChange = function (event) {\n      var focusedDate = cloneDate(event.value);\n\n      var canNavigateDown = _this.bus.canMoveDown(_this.state.activeView);\n\n      if (_this.props.disabled) {\n        return;\n      }\n\n      if (canNavigateDown) {\n        if (event.isTodayClick) {\n          _this.bus.moveToBottom(_this.state.activeView);\n        } else {\n          _this.bus.moveDown(_this.state.activeView, event.syntheticEvent);\n\n          _this.setState({\n            focusedDate: focusedDate\n          });\n\n          return;\n        }\n      }\n\n      _this.calculateFocusFromValue = true;\n      var value;\n\n      switch (_this.props.mode) {\n        case 'single':\n          value = cloneDate(event.value);\n          break;\n\n        case 'multiple':\n          if (Array.isArray(_this.selectedMultiple)) {\n            var result = _this.selectedMultiple.slice();\n\n            var index_1 = -1;\n            result.forEach(function (date, idx) {\n              if (isEqualDate(date, event.value)) {\n                index_1 = idx;\n              }\n            });\n            index_1 !== -1 ? result.splice(index_1, 1) : result.push(cloneDate(event.value));\n            value = result.slice();\n          } else {\n            if (_this.selectedDate) {\n              value = [cloneDate(_this.selectedDate), cloneDate(event.value)];\n            } else {\n              value = [cloneDate(event.value)];\n            }\n          }\n\n          break;\n\n        case 'range':\n          var hasSelection = _this.selectedRange.start !== null && _this.selectedRange.end !== null && _this.activeRange === 'start';\n          value = hasSelection ? _this.clampRange(event.value) : _this.generateRange(event.value, _this.selectedRange);\n          _this.activeRangeEnd = _this.activeRange !== 'end' ? 'end' : 'start';\n          break;\n\n        default:\n          value = cloneDate(event.value);\n          break;\n      }\n\n      _this.valueDuringOnChange = value;\n\n      _this.setState({\n        value: value,\n        focusedDate: focusedDate\n      });\n\n      _this.valueDuringOnChange = value;\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        var args = {\n          syntheticEvent: event.syntheticEvent,\n          nativeEvent: event.nativeEvent,\n          value: value,\n          target: _this\n        };\n        onChange.call(undefined, args);\n      }\n\n      _this.valueDuringOnChange = undefined;\n    };\n\n    var value = props.value !== undefined ? props.value : props.defaultValue || MultiViewCalendar.defaultProps.defaultValue;\n    var selectedDate = extractDateFromValue(_this.min, _this.max, value);\n    var selectedMultiple = extractMultipleFromValue(_this.min, _this.max, value);\n    var selectedRange = extractRangeFromValue(value);\n    var calculatedFocus = extractFocusedDate(selectedDate, selectedMultiple, selectedRange);\n    var activeView = viewInRange(CalendarViewEnum[props.defaultActiveView], _this.bottomView, _this.topView);\n    var focusedDate = dateInRange(props.focusedDate || calculatedFocus || getToday(), _this.min, _this.max);\n    _this.state = {\n      value: value,\n      activeView: activeView,\n      focusedDate: focusedDate\n    };\n    _this.activeRangeEnd = extractActiveRange(selectedRange, selectedDate);\n    _this.bus = new BusViewService(_this.handleViewChange);\n    _this.navigation = new NavigationService(_this.bus);\n    _this.calculateFocusFromValue = false;\n    return _this;\n  }\n\n  Object.defineProperty(MultiViewCalendar.prototype, \"element\", {\n    /**\n     * Gets the wrapping element of the MultiViewCalendar component.\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"value\", {\n    /**\n     * Gets the value of the MultiViewCalendar.\n     */\n    get: function () {\n      return this.valueDuringOnChange !== undefined ? this.valueDuringOnChange : this.props.value !== undefined ? this.props.value : this.state.value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"focusedDate\", {\n    /**\n     * Gets the current focused date of the MultiViewCalendar.\n     */\n    get: function () {\n      return cloneDate(this._focusedDate);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"min\", {\n    get: function () {\n      return getDate(this.props.min !== undefined ? this.props.min : MultiViewCalendar.defaultProps.min);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"max\", {\n    get: function () {\n      return getDate(this.props.max !== undefined ? this.props.max : MultiViewCalendar.defaultProps.max);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"bottomView\", {\n    get: function () {\n      return CalendarViewEnum[this.props.bottomView !== undefined ? this.props.bottomView : MultiViewCalendar.defaultProps.bottomView];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"topView\", {\n    get: function () {\n      return CalendarViewEnum[this.props.topView !== undefined ? this.props.topView : MultiViewCalendar.defaultProps.topView];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MultiViewCalendar.prototype, \"activeRange\", {\n    get: function () {\n      return this.props.activeRangeEnd !== undefined ? this.props.activeRangeEnd : this.activeRangeEnd;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  MultiViewCalendar.prototype.componentDidMount = function () {\n    this.calculateFocusFromValue = true;\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiViewCalendar.prototype.componentDidUpdate = function () {\n    if (this.calendarViewList) {\n      this.isActive ? this.calendarViewList.focusActiveDate() : this.calendarViewList.blurActiveDate();\n    }\n\n    var stateValue = extractDateFromValue(this.min, this.max, this.value);\n    this.calculateFocusFromValue = Boolean(this.selectedDate && stateValue && this.selectedDate.getTime() && stateValue.getTime());\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiViewCalendar.prototype.render = function () {\n    var _this = this;\n\n    if (this.props._ref) {\n      this.props._ref(this);\n    }\n\n    this.intl = provideIntlService(this);\n    this.localization = provideLocalizationService(this);\n    this.bus.configure(this.bottomView, this.topView);\n    var activeView = viewInRange(this.state.activeView, this.bottomView, this.topView);\n    this.service = this.bus.service(activeView, this.intl);\n    this.selectedDate = extractDateFromValue(this.min, this.max, this.value);\n    this.selectedMultiple = extractMultipleFromValue(this.min, this.max, this.value);\n    this.selectedRange = extractRangeFromValue(this.value);\n    var calculatedFocus = extractFocusedDate(this.selectedDate, this.selectedMultiple, this.selectedRange);\n    this._focusedDate = dateInRange(this.calculateFocusFromValue && calculatedFocus !== null ? calculatedFocus : this.state.focusedDate, this.min, this.max);\n    var wrapperClassName = classNames('k-widget k-calendar k-calendar-infinite k-calendar-range', {\n      'k-state-disabled': this.props.disabled\n    }, this.props.className);\n    var visualizedRange = this.rangeWithFocused(this.selectedRange, this.focusedDate);\n    var wrapperAria = {\n      'aria-disabled': this.props.disabled,\n      'aria-activedescendant': this.cellUID + this.focusedDate.getTime()\n    };\n    var prevViewTitle = this.localization.toLanguageString(prevView, messages[prevView]);\n    var nextViewTittle = this.localization.toLanguageString(nextView, messages[nextView]);\n    var isPrevDisabled = !this.canNavigate(Action.PrevView);\n    var isNextDisabled = !this.canNavigate(Action.NextView);\n    var prevBtnAria = {\n      'aria-disabled': isPrevDisabled\n    };\n    var nextBtnAria = {\n      'aria-disabled': isNextDisabled\n    };\n    return React.createElement(\"div\", __assign({\n      ref: function (el) {\n        _this._element = el;\n      },\n      className: wrapperClassName,\n      id: this.props.id || this.wrapperID,\n      \"aria-labelledby\": this.props.ariaLabelledBy,\n      \"aria-describedby\": this.props.ariaDescribedBy,\n      role: 'grid',\n      tabIndex: !this.props.disabled ? this.props.tabIndex : undefined,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onMouseDown: this.handleMouseDown,\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeyDown\n    }, wrapperAria), React.createElement(\"button\", __assign({\n      className: \"k-button k-prev-view\",\n      title: prevViewTitle,\n      disabled: isPrevDisabled,\n      onClick: this.handlePrevButtonClick\n    }, prevBtnAria), React.createElement(\"span\", {\n      className: \"k-icon k-i-arrow-chevron-left\"\n    })), React.createElement(HorizontalViewList, {\n      ref: function (el) {\n        _this.calendarViewList = el;\n      },\n      activeView: activeView,\n      focusedDate: this.focusedDate,\n      min: this.min,\n      max: this.max,\n      bus: this.bus,\n      service: this.service,\n      selectionRange: visualizedRange,\n      value: this.selectedMultiple || this.selectedDate,\n      cellUID: this.cellUID,\n      views: this.props.views,\n      onChange: this.handleDateChange,\n      showWeekNumbers: this.props.weekNumber,\n      onCellEnter: this.handleCellEnter,\n      cell: this.props.cell,\n      weekCell: this.props.weekCell,\n      headerTitle: this.props.headerTitle\n    }), React.createElement(\"button\", __assign({\n      className: \"k-button k-next-view\",\n      title: nextViewTittle,\n      disabled: isNextDisabled,\n      onClick: this.handleNextButtonClick\n    }, nextBtnAria), React.createElement(\"span\", {\n      className: \"k-icon k-i-arrow-chevron-right\"\n    })));\n  };\n  /**\n   * @hidden\n   */\n\n\n  MultiViewCalendar.propTypes = {\n    activeRangeEnd: PropTypes.oneOf(['start', 'end']),\n    allowReverse: PropTypes.bool,\n    bottomView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n    className: PropTypes.string,\n    defaultActiveView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n    defaultValue: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.arrayOf(PropTypes.instanceOf(Date)), PropTypes.shape({\n      start: PropTypes.instanceOf(Date),\n      end: PropTypes.instanceOf(Date)\n    })]),\n    disabled: PropTypes.bool,\n    focusedDate: PropTypes.instanceOf(Date),\n    id: PropTypes.string,\n    ariaLabelledBy: PropTypes.string,\n    ariaDescribedBy: PropTypes.string,\n    max: PropTypes.instanceOf(Date),\n    min: PropTypes.instanceOf(Date),\n    mode: PropTypes.oneOf(['single', 'multiple', 'range']),\n    onBlur: PropTypes.func,\n    onChange: PropTypes.func,\n    onFocus: PropTypes.func,\n    tabIndex: PropTypes.number,\n    topView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n    value: PropTypes.oneOfType([PropTypes.instanceOf(Date), PropTypes.arrayOf(PropTypes.instanceOf(Date)), PropTypes.shape({\n      start: PropTypes.instanceOf(Date),\n      end: PropTypes.instanceOf(Date)\n    })]),\n    views: function (props, propName, componentName) {\n      var views = props[propName];\n\n      if (views !== undefined && views < 1) {\n        return new Error(\"Invalid prop '\" + propName + \"' supplied to\" + (\"'\" + componentName + \"'. The '\" + propName + \"' property cannot be less than 1'\"));\n      }\n    },\n    weekNumber: PropTypes.bool\n  };\n  /**\n   * @hidden\n   */\n\n  MultiViewCalendar.defaultProps = {\n    disabled: false,\n    min: MIN_DATE,\n    max: MAX_DATE,\n    navigation: true,\n    defaultActiveView: 'month',\n    defaultValue: null,\n    topView: 'century',\n    tabIndex: 0,\n    bottomView: 'month',\n    views: 2,\n    allowReverse: false\n  };\n  return MultiViewCalendar;\n}(React.Component);\n\nexport { MultiViewCalendar };\nregisterForIntl(MultiViewCalendar);\nregisterForLocalization(MultiViewCalendar);","map":{"version":3,"sources":["../../../../src/calendar/components/MultiViewCalendar.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService, registerForLocalization, provideLocalizationService } from '@progress/kendo-react-intl';\nimport { classNames, guid, Keys } from '@progress/kendo-react-common';\nimport { cloneDate, isEqualDate, getDate } from '@progress/kendo-date-math';\nimport { Action, CalendarViewEnum, EMPTY_SELECTIONRANGE } from '../models';\nimport { MIN_DATE, MAX_DATE } from '../../defaults';\nimport { messages, prevView, nextView } from '../../messages';\nimport { BusViewService, NavigationService } from '../services';\nimport { dateInRange, isInRange, viewInRange, getToday } from '../../utils';\nimport { HorizontalViewList } from './HorizontalViewList';\nvar extractDateFromValue = function (min, max, value) {\n    if (min === void 0) { min = MultiViewCalendar.defaultProps.min; }\n    if (max === void 0) { max = MultiViewCalendar.defaultProps.max; }\n    return value instanceof Date && !Array.isArray(value) && isInRange(getDate(value), min, max)\n        ? getDate(value)\n        : null;\n};\nvar extractMultipleFromValue = function (min, max, value) {\n    if (min === void 0) { min = MultiViewCalendar.defaultProps.min; }\n    if (max === void 0) { max = MultiViewCalendar.defaultProps.max; }\n    return Array.isArray(value)\n        ? value.filter(function (date) { return isInRange(date, min, max); }).map(function (date) { return getDate(date); })\n        : null;\n};\nvar extractRangeFromValue = function (value) {\n    return typeof value === 'object' && !(value instanceof Date) && value !== null && !Array.isArray(value)\n        ? value\n        : EMPTY_SELECTIONRANGE;\n};\nvar extractFocusedDate = function (single, multiple, range) {\n    return single || (multiple && multiple[0]) || (range && range.start);\n};\nvar extractActiveRange = function (range, single) {\n    return range.start === null && single === null\n        ? 'start'\n        : range.end === null\n            ? 'end'\n            : 'start';\n};\nvar MultiViewCalendar = /** @class */ (function (_super) {\n    __extends(MultiViewCalendar, _super);\n    function MultiViewCalendar(props) {\n        var _this = _super.call(this, props) || this;\n        _this.selectedDate = null;\n        _this.selectedMultiple = null;\n        _this.selectedRange = EMPTY_SELECTIONRANGE;\n        _this.cellUID = guid();\n        _this.activeRangeEnd = 'start';\n        _this.wrapperID = guid();\n        _this.isActive = false;\n        _this.calculateFocusFromValue = true;\n        /**\n         * @hidden\n         */\n        _this.focus = function () {\n            if (_this._element) {\n                _this._element.focus();\n            }\n        };\n        _this.clampRange = function (value) { return ({ start: value, end: null }); };\n        _this.rangeWithFocused = function (range, focusedDate) {\n            return {\n                start: range.start,\n                end: range.end === null && range.start !== null && _this.isActive ? focusedDate : range.end\n            };\n        };\n        _this.generateRange = function (candidate, value) {\n            var end = value.end, start = value.start;\n            var shouldSwap = value.start !== null && candidate.getTime() <= value.start.getTime();\n            if (!_this.props.allowReverse && shouldSwap) {\n                return { start: candidate, end: _this.selectedRange.start };\n            }\n            return _this.activeRange !== 'end'\n                ? ({ start: candidate, end: end })\n                : ({ start: start || _this.selectedDate, end: candidate });\n        };\n        _this.canNavigate = function (action) {\n            if (!_this.service) {\n                return false;\n            }\n            var candidate = _this.service.move(_this.focusedDate, action);\n            return (_this.min <= candidate && candidate <= _this.max)\n                || _this.service.isInSameView(candidate, _this.min)\n                || _this.service.isInSameView(candidate, _this.max);\n        };\n        _this.isListInRange = function (list) {\n            return _this.min < list[0]\n                && _this.max > list[Math.max(0, (_this.props.views || MultiViewCalendar.defaultProps.views) - 1)];\n        };\n        _this.navigate = function (action) {\n            _this.calculateFocusFromValue = false;\n            var candidate = _this.move(action);\n            _this.setState({ focusedDate: candidate });\n        };\n        _this.move = function (action) {\n            return _this.clampDate(_this.service.move(_this.focusedDate, action));\n        };\n        _this.clampDate = function (value) {\n            return dateInRange(value, _this.min, _this.max);\n        };\n        _this.shouldAutoCorrect = function (candidate, value) {\n            var end = value.end, start = value.start;\n            if (_this.activeRange !== 'end') {\n                return end !== null && candidate > end;\n            }\n            else {\n                return start !== null && candidate < start;\n            }\n        };\n        _this.handleCellEnter = function (value) {\n            if (_this.props.mode === 'range') {\n                _this.calculateFocusFromValue = false;\n                _this.setState({\n                    focusedDate: value\n                });\n            }\n        };\n        _this.handleMouseDown = function (event) {\n            event.preventDefault();\n        };\n        _this.handleClick = function (_) {\n            if (!_this._element) {\n                return;\n            }\n            _this._element.focus({ preventScroll: true });\n        };\n        _this.handleFocus = function (event) {\n            _this.isActive = true;\n            if (!_this.calendarViewList) {\n                return;\n            }\n            _this.calendarViewList.focusActiveDate();\n            var onFocus = _this.props.onFocus;\n            if (onFocus) {\n                onFocus.call(undefined, event);\n            }\n        };\n        _this.handleBlur = function (event) {\n            _this.isActive = false;\n            if (!_this.calendarViewList) {\n                return;\n            }\n            _this.calendarViewList.blurActiveDate();\n            var onBlur = _this.props.onBlur;\n            if (onBlur) {\n                onBlur.call(undefined, event);\n            }\n        };\n        _this.handlePrevButtonClick = function () {\n            _this.navigate(Action.PrevView);\n        };\n        _this.handleNextButtonClick = function () {\n            _this.navigate(Action.NextView);\n        };\n        _this.handleKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            if (keyCode === Keys.enter) {\n                var args = {\n                    syntheticEvent: event,\n                    nativeEvent: event.nativeEvent,\n                    value: _this.focusedDate,\n                    target: _this\n                };\n                _this.handleDateChange.call(undefined, args);\n            }\n            else {\n                var candidate = dateInRange(_this.navigation.move(_this.focusedDate, _this.navigation.action(event), _this.state.activeView, _this.service, event), _this.min, _this.max);\n                if (isEqualDate(_this.focusedDate, candidate)) {\n                    return;\n                }\n                _this.calculateFocusFromValue = false;\n                _this.setState({ focusedDate: candidate });\n            }\n            event.preventDefault();\n        };\n        _this.handleViewChange = function (_a) {\n            var view = _a.view;\n            _this.setState({ activeView: view });\n        };\n        _this.handleDateChange = function (event) {\n            var focusedDate = cloneDate(event.value);\n            var canNavigateDown = _this.bus.canMoveDown(_this.state.activeView);\n            if (_this.props.disabled) {\n                return;\n            }\n            if (canNavigateDown) {\n                if (event.isTodayClick) {\n                    _this.bus.moveToBottom(_this.state.activeView);\n                }\n                else {\n                    _this.bus.moveDown(_this.state.activeView, event.syntheticEvent);\n                    _this.setState({ focusedDate: focusedDate });\n                    return;\n                }\n            }\n            _this.calculateFocusFromValue = true;\n            var value;\n            switch (_this.props.mode) {\n                case 'single':\n                    value = cloneDate(event.value);\n                    break;\n                case 'multiple':\n                    if (Array.isArray(_this.selectedMultiple)) {\n                        var result = _this.selectedMultiple.slice();\n                        var index_1 = -1;\n                        result.forEach(function (date, idx) {\n                            if (isEqualDate(date, event.value)) {\n                                index_1 = idx;\n                            }\n                        });\n                        index_1 !== -1\n                            ? result.splice(index_1, 1)\n                            : result.push(cloneDate(event.value));\n                        value = result.slice();\n                    }\n                    else {\n                        if (_this.selectedDate) {\n                            value = [cloneDate(_this.selectedDate), cloneDate(event.value)];\n                        }\n                        else {\n                            value = [cloneDate(event.value)];\n                        }\n                    }\n                    break;\n                case 'range':\n                    var hasSelection = _this.selectedRange.start !== null\n                        && _this.selectedRange.end !== null\n                        && _this.activeRange === 'start';\n                    value = hasSelection\n                        ? _this.clampRange(event.value)\n                        : _this.generateRange(event.value, _this.selectedRange);\n                    _this.activeRangeEnd = _this.activeRange !== 'end' ? 'end' : 'start';\n                    break;\n                default:\n                    value = cloneDate(event.value);\n                    break;\n            }\n            _this.valueDuringOnChange = value;\n            _this.setState({ value: value, focusedDate: focusedDate });\n            _this.valueDuringOnChange = value;\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                var args = {\n                    syntheticEvent: event.syntheticEvent,\n                    nativeEvent: event.nativeEvent,\n                    value: value,\n                    target: _this\n                };\n                onChange.call(undefined, args);\n            }\n            _this.valueDuringOnChange = undefined;\n        };\n        var value = props.value !== undefined\n            ? props.value\n            : props.defaultValue || MultiViewCalendar.defaultProps.defaultValue;\n        var selectedDate = extractDateFromValue(_this.min, _this.max, value);\n        var selectedMultiple = extractMultipleFromValue(_this.min, _this.max, value);\n        var selectedRange = extractRangeFromValue(value);\n        var calculatedFocus = extractFocusedDate(selectedDate, selectedMultiple, selectedRange);\n        var activeView = viewInRange(CalendarViewEnum[props.defaultActiveView], _this.bottomView, _this.topView);\n        var focusedDate = dateInRange(props.focusedDate || calculatedFocus || getToday(), _this.min, _this.max);\n        _this.state = {\n            value: value,\n            activeView: activeView,\n            focusedDate: focusedDate\n        };\n        _this.activeRangeEnd = extractActiveRange(selectedRange, selectedDate);\n        _this.bus = new BusViewService(_this.handleViewChange);\n        _this.navigation = new NavigationService(_this.bus);\n        _this.calculateFocusFromValue = false;\n        return _this;\n    }\n    Object.defineProperty(MultiViewCalendar.prototype, \"element\", {\n        /**\n         * Gets the wrapping element of the MultiViewCalendar component.\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"value\", {\n        /**\n         * Gets the value of the MultiViewCalendar.\n         */\n        get: function () {\n            return this.valueDuringOnChange !== undefined\n                ? this.valueDuringOnChange\n                : this.props.value !== undefined\n                    ? this.props.value\n                    : this.state.value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"focusedDate\", {\n        /**\n         * Gets the current focused date of the MultiViewCalendar.\n         */\n        get: function () {\n            return cloneDate(this._focusedDate);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"min\", {\n        get: function () {\n            return getDate(this.props.min !== undefined\n                ? this.props.min\n                : MultiViewCalendar.defaultProps.min);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"max\", {\n        get: function () {\n            return getDate(this.props.max !== undefined\n                ? this.props.max\n                : MultiViewCalendar.defaultProps.max);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"bottomView\", {\n        get: function () {\n            return CalendarViewEnum[this.props.bottomView !== undefined\n                ? this.props.bottomView\n                : MultiViewCalendar.defaultProps.bottomView];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"topView\", {\n        get: function () {\n            return CalendarViewEnum[this.props.topView !== undefined\n                ? this.props.topView\n                : MultiViewCalendar.defaultProps.topView];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MultiViewCalendar.prototype, \"activeRange\", {\n        get: function () {\n            return this.props.activeRangeEnd !== undefined\n                ? this.props.activeRangeEnd\n                : this.activeRangeEnd;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    MultiViewCalendar.prototype.componentDidMount = function () {\n        this.calculateFocusFromValue = true;\n    };\n    /**\n     * @hidden\n     */\n    MultiViewCalendar.prototype.componentDidUpdate = function () {\n        if (this.calendarViewList) {\n            this.isActive ? this.calendarViewList.focusActiveDate() : this.calendarViewList.blurActiveDate();\n        }\n        var stateValue = extractDateFromValue(this.min, this.max, this.value);\n        this.calculateFocusFromValue = Boolean(this.selectedDate\n            && stateValue\n            && (this.selectedDate.getTime() && stateValue.getTime()));\n    };\n    /**\n     * @hidden\n     */\n    MultiViewCalendar.prototype.render = function () {\n        var _this = this;\n        if (this.props._ref) {\n            this.props._ref(this);\n        }\n        this.intl = provideIntlService(this);\n        this.localization = provideLocalizationService(this);\n        this.bus.configure(this.bottomView, this.topView);\n        var activeView = viewInRange(this.state.activeView, this.bottomView, this.topView);\n        this.service = this.bus.service(activeView, this.intl);\n        this.selectedDate = extractDateFromValue(this.min, this.max, this.value);\n        this.selectedMultiple = extractMultipleFromValue(this.min, this.max, this.value);\n        this.selectedRange = extractRangeFromValue(this.value);\n        var calculatedFocus = extractFocusedDate(this.selectedDate, this.selectedMultiple, this.selectedRange);\n        this._focusedDate = dateInRange(this.calculateFocusFromValue && calculatedFocus !== null\n            ? calculatedFocus\n            : this.state.focusedDate, this.min, this.max);\n        var wrapperClassName = classNames('k-widget k-calendar k-calendar-infinite k-calendar-range', {\n            'k-state-disabled': this.props.disabled\n        }, this.props.className);\n        var visualizedRange = this.rangeWithFocused(this.selectedRange, this.focusedDate);\n        var wrapperAria = {\n            'aria-disabled': this.props.disabled,\n            'aria-activedescendant': this.cellUID + this.focusedDate.getTime()\n        };\n        var prevViewTitle = this.localization.toLanguageString(prevView, messages[prevView]);\n        var nextViewTittle = this.localization.toLanguageString(nextView, messages[nextView]);\n        var isPrevDisabled = !this.canNavigate(Action.PrevView);\n        var isNextDisabled = !this.canNavigate(Action.NextView);\n        var prevBtnAria = { 'aria-disabled': isPrevDisabled };\n        var nextBtnAria = { 'aria-disabled': isNextDisabled };\n        return (React.createElement(\"div\", __assign({ ref: function (el) { _this._element = el; }, className: wrapperClassName, id: this.props.id || this.wrapperID, \"aria-labelledby\": this.props.ariaLabelledBy, \"aria-describedby\": this.props.ariaDescribedBy, role: 'grid', tabIndex: !this.props.disabled ? this.props.tabIndex : undefined, onFocus: this.handleFocus, onBlur: this.handleBlur, onMouseDown: this.handleMouseDown, onClick: this.handleClick, onKeyDown: this.handleKeyDown }, wrapperAria),\n            React.createElement(\"button\", __assign({ className: \"k-button k-prev-view\", title: prevViewTitle, disabled: isPrevDisabled, onClick: this.handlePrevButtonClick }, prevBtnAria),\n                React.createElement(\"span\", { className: \"k-icon k-i-arrow-chevron-left\" })),\n            React.createElement(HorizontalViewList, { ref: function (el) { _this.calendarViewList = el; }, activeView: activeView, focusedDate: this.focusedDate, min: this.min, max: this.max, bus: this.bus, service: this.service, selectionRange: visualizedRange, value: this.selectedMultiple || this.selectedDate, cellUID: this.cellUID, views: this.props.views, onChange: this.handleDateChange, showWeekNumbers: this.props.weekNumber, onCellEnter: this.handleCellEnter, cell: this.props.cell, weekCell: this.props.weekCell, headerTitle: this.props.headerTitle }),\n            React.createElement(\"button\", __assign({ className: \"k-button k-next-view\", title: nextViewTittle, disabled: isNextDisabled, onClick: this.handleNextButtonClick }, nextBtnAria),\n                React.createElement(\"span\", { className: \"k-icon k-i-arrow-chevron-right\" }))));\n    };\n    /**\n     * @hidden\n     */\n    MultiViewCalendar.propTypes = {\n        activeRangeEnd: PropTypes.oneOf(['start', 'end']),\n        allowReverse: PropTypes.bool,\n        bottomView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n        className: PropTypes.string,\n        defaultActiveView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n        defaultValue: PropTypes.oneOfType([\n            PropTypes.instanceOf(Date),\n            PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n            PropTypes.shape({ start: PropTypes.instanceOf(Date), end: PropTypes.instanceOf(Date) })\n        ]),\n        disabled: PropTypes.bool,\n        focusedDate: PropTypes.instanceOf(Date),\n        id: PropTypes.string,\n        ariaLabelledBy: PropTypes.string,\n        ariaDescribedBy: PropTypes.string,\n        max: PropTypes.instanceOf(Date),\n        min: PropTypes.instanceOf(Date),\n        mode: PropTypes.oneOf(['single', 'multiple', 'range']),\n        onBlur: PropTypes.func,\n        onChange: PropTypes.func,\n        onFocus: PropTypes.func,\n        tabIndex: PropTypes.number,\n        topView: PropTypes.oneOf(['month', 'year', 'decade', 'century']),\n        value: PropTypes.oneOfType([\n            PropTypes.instanceOf(Date),\n            PropTypes.arrayOf(PropTypes.instanceOf(Date)),\n            PropTypes.shape({ start: PropTypes.instanceOf(Date), end: PropTypes.instanceOf(Date) })\n        ]),\n        views: function (props, propName, componentName) {\n            var views = props[propName];\n            if (views !== undefined && views < 1) {\n                return new Error(\"Invalid prop '\" + propName + \"' supplied to\" +\n                    (\"'\" + componentName + \"'. The '\" + propName + \"' property cannot be less than 1'\"));\n            }\n        },\n        weekNumber: PropTypes.bool\n    };\n    /**\n     * @hidden\n     */\n    MultiViewCalendar.defaultProps = {\n        disabled: false,\n        min: MIN_DATE,\n        max: MAX_DATE,\n        navigation: true,\n        defaultActiveView: 'month',\n        defaultValue: null,\n        topView: 'century',\n        tabIndex: 0,\n        bottomView: 'month',\n        views: 2,\n        allowReverse: false\n    };\n    return MultiViewCalendar;\n}(React.Component));\nexport { MultiViewCalendar };\nregisterForIntl(MultiViewCalendar);\nregisterForLocalization(MultiViewCalendar);\n//# sourceMappingURL=MultiViewCalendar.js.map"]},"metadata":{},"sourceType":"module"}