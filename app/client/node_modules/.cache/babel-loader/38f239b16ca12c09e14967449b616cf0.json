{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar _a, _b;\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { cloneDate } from '@progress/kendo-date-math';\nimport { Keys, noop } from '@progress/kendo-react-common';\nimport { provideIntlService, registerForIntl } from '@progress/kendo-react-intl';\nimport { Virtualization } from '../virtualization/Virtualization';\nimport { TIME_PART } from './models';\nimport { SecondsService, MinutesService, HoursService, DayPeriodService, DOMService } from './services';\nimport { MAX_TIME, MIDNIGHT_DATE } from '../utils';\nvar SCROLL_THRESHOLD = 2; // < 2px threshold\n\nvar SNAP_THRESHOLD = 0.05; // % of the item height\n\nvar SKIP = 0;\nvar getters = (_a = {}, _a[Keys.end] = function (data, _) {\n  return data[data.length - 1];\n}, _a[Keys.home] = function (data, _) {\n  return data[0];\n}, _a[Keys.up] = function (data, index) {\n  return data[index - 1];\n}, _a[Keys.down] = function (data, index) {\n  return data[index + 1];\n}, _a);\nvar services = (_b = {}, _b[TIME_PART.dayperiod] = DayPeriodService, _b[TIME_PART.hour] = HoursService, _b[TIME_PART.minute] = MinutesService, _b[TIME_PART.second] = SecondsService, _b);\n/**\n * @hidden\n */\n\nvar TimeList =\n/** @class */\nfunction (_super) {\n  __extends(TimeList, _super);\n\n  function TimeList(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.animateToIndex = false;\n\n    _this.focus = function (args) {\n      Promise.resolve().then(function () {\n        if (!_this.element) {\n          return;\n        }\n\n        _this.element.focus(args);\n      });\n    };\n\n    _this.itemOffset = function (scrollTop) {\n      if (!_this.virtualization) {\n        return -1;\n      }\n\n      var valueIndex = _this.service.selectedIndex(_this.props.value);\n\n      var activeIndex = _this.virtualization.activeIndex();\n\n      var offset = _this.virtualization.itemOffset(activeIndex);\n\n      var distance = Math.abs(Math.ceil(scrollTop) - offset);\n\n      if (valueIndex === activeIndex && distance < SCROLL_THRESHOLD) {\n        return offset;\n      }\n\n      var scrollUp = valueIndex > activeIndex;\n      var moveToNext = scrollUp && distance >= _this.bottomThreshold || !scrollUp && distance > _this.topThreshold;\n      return moveToNext ? _this.virtualization.itemOffset(activeIndex + 1) : offset;\n    };\n\n    _this.calculateHeights = function () {\n      if (!_this.dom.didCalculate) {\n        return;\n      }\n\n      _this.itemHeight = _this.dom.itemHeight;\n      _this.listHeight = _this.dom.timeListHeight;\n      _this.topOffset = (_this.listHeight - _this.itemHeight) / 2;\n      _this.bottomOffset = _this.listHeight - _this.itemHeight;\n      _this.topThreshold = _this.itemHeight * SNAP_THRESHOLD;\n      _this.bottomThreshold = _this.itemHeight * (1 - SNAP_THRESHOLD);\n    };\n\n    _this.configureServices = function (_a) {\n      var _b = _a === void 0 ? _this.props : _a,\n          min = _b.min,\n          max = _b.max,\n          value = _b.value;\n\n      var _c = _this.service.limitRange(min || _this.min, max || _this.max, value || _this.props.value),\n          newMin = _c[0],\n          newMax = _c[1];\n\n      _this.service.configure(_this.serviceSettings({\n        min: newMin,\n        max: newMax\n      }));\n    };\n\n    _this.serviceSettings = function (settings) {\n      var defaults = {\n        boundRange: _this.props.boundRange || TimeList.defaultProps.boundRange,\n        insertUndividedMax: false,\n        min: cloneDate(_this.min),\n        max: cloneDate(_this.max),\n        part: _this.props.part,\n        step: _this.step\n      };\n      var result = Object.assign({}, defaults, settings);\n      result.boundRange = result.part.type !== 'hour' || _this.props.boundRange || TimeList.defaultProps.boundRange;\n      return result;\n    };\n\n    _this.handleScrollAction = function (_a) {\n      var target = _a.target,\n          animationInProgress = _a.animationInProgress;\n\n      if (!_this.virtualization) {\n        return;\n      }\n\n      if (target && !animationInProgress) {\n        _this.animateToIndex = false;\n\n        var index = _this.virtualization.itemIndex(_this.itemOffset(target.scrollTop));\n\n        var dataItem = _this.service.data(_this.props.value)[index];\n\n        _this.handleChange(dataItem);\n      }\n    };\n\n    _this.handleFocus = function (event) {\n      var onFocus = _this.props.onFocus;\n\n      if (onFocus) {\n        onFocus.call(undefined, event);\n      }\n    };\n\n    _this.handleBlur = function (event) {\n      var onBlur = _this.props.onBlur;\n\n      if (onBlur) {\n        onBlur.call(undefined, event);\n      }\n    };\n\n    _this.handleMouseOver = function () {\n      if (!_this._element) {\n        return;\n      }\n\n      if (document && document.activeElement !== _this._element) {\n        _this._element.focus({\n          preventScroll: true\n        });\n      }\n    };\n\n    _this.handleKeyDown = function (event) {\n      var keyCode = event.keyCode;\n\n      if (keyCode === Keys.down || keyCode === Keys.up || keyCode === Keys.end || keyCode === Keys.home) {\n        event.preventDefault();\n      }\n\n      var getter = getters[event.keyCode] || noop;\n      var dataItem = getter(_this.service.data(_this.props.value), _this.service.selectedIndex(_this.props.value));\n\n      if (dataItem) {\n        _this.handleChange(dataItem);\n      }\n    };\n\n    _this.handleChange = function (dataItem) {\n      var candidate = _this.service.apply(_this.props.value, dataItem.value);\n\n      if (_this.props.value.getTime() === candidate.getTime()) {\n        return;\n      }\n\n      _this.setState({\n        value: candidate\n      });\n\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.call(undefined, candidate);\n      }\n    };\n\n    _this.dom = new DOMService();\n    return _this;\n  }\n\n  Object.defineProperty(TimeList.prototype, \"element\", {\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeList.prototype, \"animate\", {\n    get: function () {\n      return Boolean(this.props.smoothScroll && this.animateToIndex);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeList.prototype, \"min\", {\n    get: function () {\n      return this.props.min || TimeList.defaultProps.min;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeList.prototype, \"max\", {\n    get: function () {\n      return this.props.max || TimeList.defaultProps.max;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TimeList.prototype, \"step\", {\n    get: function () {\n      return this.props.step !== undefined && this.props.step !== 0 ? Math.floor(this.props.step) : TimeList.defaultProps.step;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  TimeList.prototype.componentDidMount = function () {\n    var _this = this; // Async calculation of height to avoid animation cancellation\n\n\n    Promise.resolve().then(function () {\n      if (!_this._element) {\n        return;\n      }\n\n      _this.dom.calculateHeights(_this._element);\n\n      _this.forceUpdate();\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  TimeList.prototype.componentDidUpdate = function () {\n    if (!this.virtualization) {\n      return;\n    }\n\n    var index = this.service.selectedIndex(this.props.value);\n    this.virtualization[this.animate ? 'animateToIndex' : 'scrollToIndex'](index);\n    this.animateToIndex = true;\n  };\n  /**\n   * @hidden\n   */\n\n\n  TimeList.prototype.render = function () {\n    var _this = this;\n\n    if (!this.props.part.type || !services[this.props.part.type]) {\n      return;\n    }\n\n    this.calculateHeights();\n    this.intl = provideIntlService(this);\n    this.service = new services[this.props.part.type](this.intl);\n    this.configureServices();\n    var data = this.service.data(this.props.value);\n    var transform = 'translateY(' + this.topOffset + 'px)';\n    var total = this.service.total(this.props.value);\n    var list = React.createElement(\"ul\", {\n      style: {\n        transform: transform,\n        msTransform: transform\n      },\n      className: \"k-reset\"\n    }, data.map(function (item, idx) {\n      return React.createElement(\"li\", {\n        key: idx,\n        className: \"k-item\",\n        onClick: function () {\n          _this.handleChange(item);\n        }\n      }, React.createElement(\"span\", null, item.text));\n    }));\n    return React.createElement(\"div\", {\n      className: \"k-time-list\",\n      id: String(this.props.id || ''),\n      tabIndex: this.props.disabled ? -1 : 0,\n      ref: function (el) {\n        _this._element = el;\n      },\n      onKeyDown: this.handleKeyDown,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n      onMouseOver: this.handleMouseOver\n    }, this.dom.didCalculate ? React.createElement(Virtualization, {\n      bottomOffset: this.bottomOffset,\n      children: list,\n      className: \"k-time-container\",\n      itemHeight: this.itemHeight,\n      maxScrollDifference: this.listHeight,\n      onScrollAction: this.handleScrollAction,\n      ref: function (el) {\n        _this.virtualization = el;\n      },\n      role: \"presentation\",\n      skip: SKIP,\n      tabIndex: -1,\n      take: total,\n      topOffset: this.topOffset,\n      total: total\n    }) : React.createElement(\"div\", {\n      className: \"k-time-container\"\n    }, list));\n  };\n\n  TimeList.propTypes = {\n    id: PropTypes.number,\n    max: PropTypes.instanceOf(Date),\n    min: PropTypes.instanceOf(Date),\n    part: function (props, propName, componentName) {\n      var prop = props[propName];\n\n      if (!prop || !services[prop.type]) {\n        throw new Error(\"\\n                    Invalid prop '\" + propName + \"' supplied to \" + componentName + \".\\n                    Supported part types are hour|minute|second|dayperiod.\\n                \");\n      }\n    },\n    step: function (props, propName, componentName) {\n      var prop = props[propName];\n\n      if (prop !== undefined && prop <= 0) {\n        throw new Error(\"\\n                    Invalid prop '\" + propName + \"' supplied to \" + componentName + \".\\n                    \" + propName + \" cannot be less than 1.\\n                \");\n      }\n    },\n    value: PropTypes.instanceOf(Date),\n    smoothScroll: PropTypes.bool\n  };\n  TimeList.defaultProps = {\n    boundRange: false,\n    max: MAX_TIME,\n    min: MIDNIGHT_DATE,\n    step: 1,\n    smoothScroll: true\n  };\n  return TimeList;\n}(React.Component);\n\nexport { TimeList };\nregisterForIntl(TimeList);","map":{"version":3,"sources":["../../../src/timepicker/TimeList.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a, _b;\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { cloneDate } from '@progress/kendo-date-math';\nimport { Keys, noop } from '@progress/kendo-react-common';\nimport { provideIntlService, registerForIntl } from '@progress/kendo-react-intl';\nimport { Virtualization } from '../virtualization/Virtualization';\nimport { TIME_PART } from './models';\nimport { SecondsService, MinutesService, HoursService, DayPeriodService, DOMService } from './services';\nimport { MAX_TIME, MIDNIGHT_DATE } from '../utils';\nvar SCROLL_THRESHOLD = 2; // < 2px threshold\nvar SNAP_THRESHOLD = 0.05; // % of the item height\nvar SKIP = 0;\nvar getters = (_a = {},\n    _a[Keys.end] = function (data, _) { return data[data.length - 1]; },\n    _a[Keys.home] = function (data, _) { return data[0]; },\n    _a[Keys.up] = function (data, index) { return data[index - 1]; },\n    _a[Keys.down] = function (data, index) { return data[index + 1]; },\n    _a);\nvar services = (_b = {},\n    _b[TIME_PART.dayperiod] = DayPeriodService,\n    _b[TIME_PART.hour] = HoursService,\n    _b[TIME_PART.minute] = MinutesService,\n    _b[TIME_PART.second] = SecondsService,\n    _b);\n/**\n * @hidden\n */\nvar TimeList = /** @class */ (function (_super) {\n    __extends(TimeList, _super);\n    function TimeList(props) {\n        var _this = _super.call(this, props) || this;\n        _this.animateToIndex = false;\n        _this.focus = function (args) {\n            Promise.resolve().then(function () {\n                if (!_this.element) {\n                    return;\n                }\n                _this.element.focus(args);\n            });\n        };\n        _this.itemOffset = function (scrollTop) {\n            if (!_this.virtualization) {\n                return -1;\n            }\n            var valueIndex = _this.service.selectedIndex(_this.props.value);\n            var activeIndex = _this.virtualization.activeIndex();\n            var offset = _this.virtualization.itemOffset(activeIndex);\n            var distance = Math.abs(Math.ceil(scrollTop) - offset);\n            if (valueIndex === activeIndex && distance < SCROLL_THRESHOLD) {\n                return offset;\n            }\n            var scrollUp = valueIndex > activeIndex;\n            var moveToNext = scrollUp && distance >= _this.bottomThreshold || !scrollUp && distance > _this.topThreshold;\n            return moveToNext ? _this.virtualization.itemOffset(activeIndex + 1) : offset;\n        };\n        _this.calculateHeights = function () {\n            if (!_this.dom.didCalculate) {\n                return;\n            }\n            _this.itemHeight = _this.dom.itemHeight;\n            _this.listHeight = _this.dom.timeListHeight;\n            _this.topOffset = (_this.listHeight - _this.itemHeight) / 2;\n            _this.bottomOffset = _this.listHeight - _this.itemHeight;\n            _this.topThreshold = _this.itemHeight * SNAP_THRESHOLD;\n            _this.bottomThreshold = _this.itemHeight * (1 - SNAP_THRESHOLD);\n        };\n        _this.configureServices = function (_a) {\n            var _b = _a === void 0 ? _this.props : _a, min = _b.min, max = _b.max, value = _b.value;\n            var _c = _this.service.limitRange(min || _this.min, max || _this.max, value || _this.props.value), newMin = _c[0], newMax = _c[1];\n            _this.service.configure(_this.serviceSettings({ min: newMin, max: newMax }));\n        };\n        _this.serviceSettings = function (settings) {\n            var defaults = {\n                boundRange: _this.props.boundRange || TimeList.defaultProps.boundRange,\n                insertUndividedMax: false,\n                min: cloneDate(_this.min),\n                max: cloneDate(_this.max),\n                part: _this.props.part,\n                step: _this.step\n            };\n            var result = Object.assign({}, defaults, settings);\n            result.boundRange = result.part.type !== 'hour' || _this.props.boundRange || TimeList.defaultProps.boundRange;\n            return result;\n        };\n        _this.handleScrollAction = function (_a) {\n            var target = _a.target, animationInProgress = _a.animationInProgress;\n            if (!_this.virtualization) {\n                return;\n            }\n            if (target && !animationInProgress) {\n                _this.animateToIndex = false;\n                var index = _this.virtualization.itemIndex(_this.itemOffset(target.scrollTop));\n                var dataItem = _this.service.data(_this.props.value)[index];\n                _this.handleChange(dataItem);\n            }\n        };\n        _this.handleFocus = function (event) {\n            var onFocus = _this.props.onFocus;\n            if (onFocus) {\n                onFocus.call(undefined, event);\n            }\n        };\n        _this.handleBlur = function (event) {\n            var onBlur = _this.props.onBlur;\n            if (onBlur) {\n                onBlur.call(undefined, event);\n            }\n        };\n        _this.handleMouseOver = function () {\n            if (!_this._element) {\n                return;\n            }\n            if (document && document.activeElement !== _this._element) {\n                _this._element.focus({ preventScroll: true });\n            }\n        };\n        _this.handleKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            if (keyCode === Keys.down\n                || keyCode === Keys.up\n                || keyCode === Keys.end\n                || keyCode === Keys.home) {\n                event.preventDefault();\n            }\n            var getter = getters[event.keyCode] || noop;\n            var dataItem = getter(_this.service.data(_this.props.value), _this.service.selectedIndex(_this.props.value));\n            if (dataItem) {\n                _this.handleChange(dataItem);\n            }\n        };\n        _this.handleChange = function (dataItem) {\n            var candidate = _this.service.apply(_this.props.value, dataItem.value);\n            if (_this.props.value.getTime() === candidate.getTime()) {\n                return;\n            }\n            _this.setState({\n                value: candidate\n            });\n            var onChange = _this.props.onChange;\n            if (onChange) {\n                onChange.call(undefined, candidate);\n            }\n        };\n        _this.dom = new DOMService();\n        return _this;\n    }\n    Object.defineProperty(TimeList.prototype, \"element\", {\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeList.prototype, \"animate\", {\n        get: function () {\n            return Boolean(this.props.smoothScroll && this.animateToIndex);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeList.prototype, \"min\", {\n        get: function () {\n            return this.props.min || TimeList.defaultProps.min;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeList.prototype, \"max\", {\n        get: function () {\n            return this.props.max || TimeList.defaultProps.max;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TimeList.prototype, \"step\", {\n        get: function () {\n            return this.props.step !== undefined && this.props.step !== 0\n                ? Math.floor(this.props.step)\n                : TimeList.defaultProps.step;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    TimeList.prototype.componentDidMount = function () {\n        var _this = this;\n        // Async calculation of height to avoid animation cancellation\n        Promise.resolve().then(function () {\n            if (!_this._element) {\n                return;\n            }\n            _this.dom.calculateHeights(_this._element);\n            _this.forceUpdate();\n        });\n    };\n    /**\n     * @hidden\n     */\n    TimeList.prototype.componentDidUpdate = function () {\n        if (!this.virtualization) {\n            return;\n        }\n        var index = this.service.selectedIndex(this.props.value);\n        this.virtualization[this.animate ? 'animateToIndex' : 'scrollToIndex'](index);\n        this.animateToIndex = true;\n    };\n    /**\n     * @hidden\n     */\n    TimeList.prototype.render = function () {\n        var _this = this;\n        if (!this.props.part.type || !services[this.props.part.type]) {\n            return;\n        }\n        this.calculateHeights();\n        this.intl = provideIntlService(this);\n        this.service = new services[this.props.part.type](this.intl);\n        this.configureServices();\n        var data = this.service.data(this.props.value);\n        var transform = 'translateY(' + this.topOffset + 'px)';\n        var total = this.service.total(this.props.value);\n        var list = (React.createElement(\"ul\", { style: { transform: transform, msTransform: transform }, className: \"k-reset\" }, data.map(function (item, idx) {\n            return (React.createElement(\"li\", { key: idx, className: \"k-item\", onClick: function () { _this.handleChange(item); } },\n                React.createElement(\"span\", null, item.text)));\n        })));\n        return (React.createElement(\"div\", { className: \"k-time-list\", id: String(this.props.id || ''), tabIndex: this.props.disabled ? -1 : 0, ref: function (el) { _this._element = el; }, onKeyDown: this.handleKeyDown, onFocus: this.handleFocus, onBlur: this.handleBlur, onMouseOver: this.handleMouseOver }, this.dom.didCalculate\n            ? (React.createElement(Virtualization, { bottomOffset: this.bottomOffset, children: list, className: \"k-time-container\", itemHeight: this.itemHeight, maxScrollDifference: this.listHeight, onScrollAction: this.handleScrollAction, ref: function (el) { _this.virtualization = el; }, role: \"presentation\", skip: SKIP, tabIndex: -1, take: total, topOffset: this.topOffset, total: total }))\n            : (React.createElement(\"div\", { className: \"k-time-container\" }, list))));\n    };\n    TimeList.propTypes = {\n        id: PropTypes.number,\n        max: PropTypes.instanceOf(Date),\n        min: PropTypes.instanceOf(Date),\n        part: function (props, propName, componentName) {\n            var prop = props[propName];\n            if (!prop || !services[prop.type]) {\n                throw new Error(\"\\n                    Invalid prop '\" + propName + \"' supplied to \" + componentName + \".\\n                    Supported part types are hour|minute|second|dayperiod.\\n                \");\n            }\n        },\n        step: function (props, propName, componentName) {\n            var prop = props[propName];\n            if (prop !== undefined && prop <= 0) {\n                throw new Error(\"\\n                    Invalid prop '\" + propName + \"' supplied to \" + componentName + \".\\n                    \" + propName + \" cannot be less than 1.\\n                \");\n            }\n        },\n        value: PropTypes.instanceOf(Date),\n        smoothScroll: PropTypes.bool\n    };\n    TimeList.defaultProps = {\n        boundRange: false,\n        max: MAX_TIME,\n        min: MIDNIGHT_DATE,\n        step: 1,\n        smoothScroll: true\n    };\n    return TimeList;\n}(React.Component));\nexport { TimeList };\nregisterForIntl(TimeList);\n//# sourceMappingURL=TimeList.js.map"]},"metadata":{},"sourceType":"module"}