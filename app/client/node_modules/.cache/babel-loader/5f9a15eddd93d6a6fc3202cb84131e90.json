{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Keys, useDir, useDraggable, getTabIndex } from '@progress/kendo-react-common';\nimport { messages, sliderDragTitle } from './../messages';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { rangeReducer, RANGE_ACTION } from './range-raducer';\n/**\n * @hidden\n */\n\nvar useRange = function (defaultValue, args, callback) {\n  var _a = React.useState(defaultValue),\n      state = _a[0],\n      setState = _a[1];\n\n  var handleDispatchAction = React.useCallback(function (action) {\n    var newState = rangeReducer(args.state || state, __assign({}, action, args));\n\n    if (callback) {\n      callback(newState, action.event);\n    }\n\n    setState(newState);\n  }, [args, callback]);\n  return [state, handleDispatchAction];\n};\n/**\n * Represents the RangeSlider component.\n */\n\n\nexport var RangeSlider = React.forwardRef(function (props, ref) {\n  var _a, _b, _c, _d;\n\n  var target = React.useRef(null);\n  var sliderRef = React.useRef(null);\n  var sliderSelectionRef = React.useRef(null);\n  var startHandle = React.useRef(null);\n  var endHandle = React.useRef(null);\n  var focus = React.useCallback(function () {\n    if (startHandle.current) {\n      startHandle.current.focus();\n    }\n  }, [startHandle]);\n  React.useImperativeHandle(target, function () {\n    return {\n      element: sliderRef.current,\n      focus: focus,\n      props: props\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return target.current;\n  });\n  var min = React.useMemo(function () {\n    return props.min;\n  }, [props.min]);\n  var max = React.useMemo(function () {\n    return props.max;\n  }, [props.max]);\n  var step = React.useMemo(function () {\n    return props.step !== undefined ? props.step : defaultProps.step;\n  }, [props.step, defaultProps.step]);\n  var dir = useDir(sliderRef, props.dir);\n\n  var handleChange = function (newValue, event) {\n    if (props.onChange && target.current) {\n      props.onChange.call(undefined, {\n        value: newValue,\n        target: target.current,\n        syntheticEvent: event\n      });\n    }\n  }; // const [showTooltip, setShowTooltip] = React.useState(false);\n\n\n  var _e = React.useState(''),\n      currentDrag = _e[0],\n      setCurrentDrag = _e[1];\n\n  var _f = useRange(props.defaultValue || defaultProps.defaultValue, {\n    min: min,\n    max: max,\n    step: step,\n    state: props.value\n  }, handleChange),\n      stateValue = _f[0],\n      dispatchStateValue = _f[1];\n\n  var value = React.useMemo(function () {\n    return props.value || stateValue;\n  }, [props.value, stateValue]);\n  var sliderTrackRef = React.useRef(null);\n  var sliderTrackWrapRef = React.useRef(null);\n  var percentStart = React.useMemo(function () {\n    return (value.start - min) / (max - min) * 100;\n  }, [value.start, min, max]);\n  var percentEnd = React.useMemo(function () {\n    return (value.end - min) / (max - min) * 100;\n  }, [value.end, min, max]);\n  var sliderItemsStyle = React.useMemo(function () {\n    return props.vertical ? {\n      paddingTop: 0,\n      height: '100%'\n    } : {};\n  }, [props.vertical]);\n  var trackStyles = React.useMemo(function () {\n    return props.vertical ? {\n      marginTop: '0.5rem',\n      marginBottom: '0.5rem'\n    } : {\n      marginLeft: '0.5rem',\n      marginRight: '0.5rem'\n    };\n  }, [props.vertical]);\n  var localization = useLocalization();\n  var calcNewDistance = React.useCallback(function (event, calc) {\n    if (!sliderTrackWrapRef.current) {\n      return;\n    }\n\n    event.originalEvent.preventDefault();\n    var computed = sliderTrackWrapRef.current.getBoundingClientRect();\n    var distance = props.vertical ? computed.bottom - event.clientY : dir === 'rtl' ? computed.right - event.clientX : event.clientX - computed.left;\n    var size = props.vertical ? computed.height : computed.width;\n    var percentage = distance / size;\n    var payload = calc === '+' ? min + percentage * (max + min) : min + percentage * (max - min);\n    return payload;\n  }, [sliderTrackWrapRef, props.vertical, dir, min, max, stateValue.start, stateValue.end, props.value && props.value.start, props.value && props.value.end]);\n  var calcKey = React.useCallback(function (payload) {\n    if (payload <= value.start) {\n      return 'start';\n    }\n\n    if (payload >= value.end) {\n      return 'end';\n    }\n\n    return 2 * payload < value.end + value.start ? 'start' : 'end';\n  }, [stateValue.start, stateValue.end, props.value && props.value.start, props.value && props.value.end]);\n  var handleStartKeyDown = React.useCallback(function (event) {\n    switch (event.keyCode) {\n      case Keys.right:\n        event.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RANGE_ACTION.decrease : RANGE_ACTION.increase,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      case Keys.up:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.increase,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      case Keys.left:\n        event.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RANGE_ACTION.increase : RANGE_ACTION.decrease,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      case Keys.down:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.decrease,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      case Keys.home:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.min,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      case Keys.end:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.max,\n          key: 'start',\n          event: event\n        });\n        break;\n\n      default:\n        break;\n    }\n  }, [dispatchStateValue]);\n  var handleEndKeyDown = React.useCallback(function (event) {\n    switch (event.keyCode) {\n      case Keys.right:\n        event.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RANGE_ACTION.decrease : RANGE_ACTION.increase,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      case Keys.up:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.increase,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      case Keys.left:\n        event.preventDefault();\n        dispatchStateValue({\n          type: dir === 'rtl' ? RANGE_ACTION.increase : RANGE_ACTION.decrease,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      case Keys.down:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.decrease,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      case Keys.home:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.min,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      case Keys.end:\n        event.preventDefault();\n        dispatchStateValue({\n          type: RANGE_ACTION.max,\n          key: 'end',\n          event: event\n        });\n        break;\n\n      default:\n        break;\n    }\n  }, [dispatchStateValue, dir]);\n  var handleTrackPress = React.useCallback(function (event) {\n    var payload = calcNewDistance(event, '-');\n    var key = calcKey(payload);\n    setCurrentDrag(key);\n    key === 'end' ? endHandle.current.focus() : startHandle.current.focus();\n    var action = key === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start;\n    dispatchStateValue({\n      type: action,\n      payload: payload,\n      event: event\n    });\n  }, [props.vertical, min, max, dispatchStateValue]);\n\n  var handleTrackDrag = function (event) {\n    var payload = calcNewDistance(event, '+');\n    var action = currentDrag === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start;\n    dispatchStateValue({\n      type: action,\n      payload: payload,\n      event: event\n    });\n  };\n\n  var handleTrackRelease = function (event) {\n    var payload = calcNewDistance(event, '+');\n    var action = currentDrag === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start;\n    dispatchStateValue({\n      type: action,\n      payload: payload,\n      event: event\n    });\n    setCurrentDrag('');\n  }; // const handleFocus = React.useCallback(\n  //     () => {\n  //         setShowTooltip(true);\n  //     },\n  //     []);\n  // const handleBlur = React.useCallback(\n  //     () => {\n  //         setShowTooltip(false);\n  //     },\n  //     []);\n\n\n  useDraggable(sliderTrackWrapRef, {\n    onPress: handleTrackPress,\n    onDrag: handleTrackDrag,\n    onRelease: handleTrackRelease\n  }); // const { onFocus, onBlur } = useAsyncFocusBlur({ onFocus: handleFocus, onBlur: handleBlur });\n\n  return React.createElement(\"div\", {\n    role: \"slider\",\n    id: props.id,\n    style: props.style,\n    ref: sliderRef,\n    dir: dir,\n    className: classNames('k-widget k-slider', {\n      'k-rtl': dir === 'rtl',\n      'k-state-disabled': props.disabled,\n      'k-slider-vertical': props.vertical,\n      'k-slider-horizontal': !props.vertical\n    }, props.className),\n    \"aria-labelledby\": props.ariaLabelledBy,\n    \"aria-describedby\": props.ariaDescribedBy\n  }, React.createElement(\"div\", {\n    className: 'k-slider-wrap',\n    style: {\n      display: 'flex',\n      position: 'relative',\n      flexDirection: props.vertical ? 'column-reverse' : 'row'\n    }\n  }, React.createElement(\"div\", {\n    ref: sliderTrackWrapRef,\n    className: \"k-slider-track-wrap\",\n    style: __assign({\n      flexGrow: 1,\n      position: 'relative',\n      touchAction: 'none'\n    }, trackStyles)\n  }, props.children && React.createElement(\"ul\", {\n    className: \"k-reset k-slider-items\",\n    style: __assign({\n      margin: 0\n    }, sliderItemsStyle)\n  }, React.Children.map(props.children, function (child) {\n    return child && React.cloneElement(child, {\n      position: 100 * (child.props.position - props.min) / (props.max - props.min),\n      vertical: props.vertical\n    }, child.props.children);\n  })), React.createElement(\"div\", {\n    ref: sliderTrackRef,\n    className: \"k-slider-track\",\n    style: props.vertical ? {\n      bottom: 0,\n      height: '100%'\n    } : (_a = {}, _a[dir === 'rtl' ? 'right' : 'left'] = 0, _a.width = '100%', _a)\n  }, percentStart !== null && percentEnd !== null && React.createElement(\"div\", {\n    \"data-selection\": true,\n    ref: sliderSelectionRef,\n    title: value.start + \" - \" + value.end,\n    className: \"k-slider-selection\",\n    style: props.vertical ? {\n      height: percentEnd - percentStart + '%',\n      bottom: percentStart + '%'\n    } : (_b = {}, _b[dir === 'rtl' ? 'right' : 'left'] = percentStart + '%', _b.width = percentEnd - percentStart + '%', _b)\n  }), React.createElement(\"a\", {\n    ref: startHandle,\n    role: \"slider\",\n    tabIndex: getTabIndex(props.startTabIndex, props.disabled, undefined),\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": Math.max(max, value.end),\n    \"aria-valuenow\": value.start,\n    \"aria-disabled\": props.disabled ? 'true' : undefined,\n    className: \"k-draghandle\",\n    title: localization.toLanguageString(sliderDragTitle, messages[sliderDragTitle]),\n    style: props.vertical ? {\n      bottom: 'calc(' + percentStart + '% - 8px)',\n      zIndex: 1\n    } : (_c = {}, _c[dir === 'rtl' ? 'right' : 'left'] = 'calc(' + percentStart + '% - 8px)', _c.zIndex = 1, _c),\n    onKeyDown: handleStartKeyDown\n  }), React.createElement(\"a\", {\n    ref: endHandle,\n    role: \"slider\",\n    tabIndex: getTabIndex(props.endTabIndex, props.disabled, undefined),\n    \"aria-valuemin\": Math.min(min, value.start),\n    \"aria-valuemax\": max,\n    \"aria-valuenow\": value.end,\n    \"aria-disabled\": props.disabled ? 'true' : undefined,\n    className: \"k-draghandle\",\n    title: localization.toLanguageString(sliderDragTitle, messages[sliderDragTitle]),\n    style: props.vertical ? {\n      bottom: 'calc(' + percentEnd + '% - 8px)',\n      zIndex: 1\n    } : (_d = {}, _d[dir === 'rtl' ? 'right' : 'left'] = 'calc(' + percentEnd + '% - 8px)', _d.zIndex = 1, _d),\n    onKeyDown: handleEndKeyDown\n  })))));\n});\nvar propTypes = {\n  value: function (props, propName, componentName) {\n    if (props.value) {\n      var start = props.value.start;\n      var end = props.value.end;\n      var min = props.min;\n      var max = props.max;\n\n      if (start > end || start > max || start < min || end > max || end < min || end < start) {\n        return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                    The { start, end } value must be between the min & max value and { start, end } must be start < end.\\n                    \");\n      }\n    }\n\n    return null;\n  },\n  defaultValue: function (props, propName, componentName) {\n    if (props.defaultValue) {\n      var start = props.defaultValue.start;\n      var end = props.defaultValue.end;\n      var min = props.min;\n      var max = props.max;\n\n      if (start > end || start > max || start < min || end > max || end < min || end < start) {\n        return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                    The { start, end } value must be between the min & max value and { start, end } must be start < end.\\n                    \");\n      }\n    }\n\n    return null;\n  },\n  onChange: PropTypes.func,\n  step: PropTypes.number,\n  min: function (props, propName, componentName) {\n    var prop = props[propName];\n    var min = props.min;\n    var max = props.max;\n\n    if (min === undefined) {\n      return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be undefined.\\n                \");\n    }\n\n    if (prop && min >= max) {\n      return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be equal to or bigger than the max value.\\n                \");\n    }\n\n    return null;\n  },\n  max: function (props, propName, componentName) {\n    var prop = props[propName];\n    var min = props.min;\n    var max = props.max;\n\n    if (max === undefined) {\n      return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be undefined.\\n                \");\n    }\n\n    if (prop && max <= min) {\n      return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be equal to or smaller than the min value.\\n                \");\n    }\n\n    return null;\n  },\n  vertical: PropTypes.bool,\n  disabled: PropTypes.bool,\n  dir: PropTypes.oneOf(['ltr', 'rtl'])\n};\nvar defaultProps = {\n  step: 1,\n  defaultValue: {\n    start: 0,\n    end: 0\n  },\n  vertical: false,\n  disabled: false\n};\nRangeSlider.displayName = 'KendoReactRangeSlider'; // TODO: delete casting when @types/react is updated!\n\nRangeSlider.propTypes = propTypes;\nRangeSlider.defaultProps = defaultProps;","map":{"version":3,"sources":["../../../src/range-slider/RangeSlider.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAK,SAAZ,MAA2B,YAA3B;AAEA,SAEI,UAFJ,EAGI,IAHJ,EAII,MAJJ,EAKI,YALJ,EAOI,WAPJ,QAQO,8BARP;AAUA,SAAS,QAAT,EAAmB,eAAnB,QAA0C,eAA1C;AACA,SAAS,eAAT,QAAgC,4BAAhC;AAEA,SAAS,YAAT,EAAuB,YAAvB,QAAgE,iBAAhE;AA8FA;;;;AAGA,IAAM,QAAQ,GAAG,UACb,YADa,EAEb,IAFa,EAGb,QAHa,EAG8E;AAErF,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,YAAA,CAAA;AAAA,MAAC,KAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAQ,QAAA,GAAA,EAAA,CAAA,CAAA,CAAR;;AAEN,MAAM,oBAAoB,GAAG,KAAK,CAAC,WAAN,CACzB,UAAC,MAAD,EAA4B;AACxB,QAAM,QAAQ,GAAG,YAAY,CAAC,IAAI,CAAC,KAAL,IAAc,KAAf,EAAoB,QAAA,CAAA,EAAA,EAAO,MAAP,EAAkB,IAAlB,CAApB,CAA7B;;AAEA,QAAI,QAAJ,EAAc;AACV,MAAA,QAAQ,CAAC,QAAD,EAAW,MAAM,CAAC,KAAlB,CAAR;AACH;;AAED,IAAA,QAAQ,CAAC,QAAD,CAAR;AACH,GATwB,EAUzB,CAAC,IAAD,EAAO,QAAP,CAVyB,CAA7B;AAaA,SAAO,CAAC,KAAD,EAAQ,oBAAR,CAAP;AACH,CArBD;AA8DA;;;;;AAGA,OAAO,IAAM,WAAW,GAAG,KAAK,CAAC,UAAN,CAA6D,UAAC,KAAD,EAAQ,GAAR,EAAW;;;AAC/F,MAAM,MAAM,GAAG,KAAK,CAAC,MAAN,CAAuC,IAAvC,CAAf;AACA,MAAM,SAAS,GAAG,KAAK,CAAC,MAAN,CAA6B,IAA7B,CAAlB;AACA,MAAM,kBAAkB,GAAG,KAAK,CAAC,MAAN,CAA6B,IAA7B,CAA3B;AACA,MAAM,WAAW,GAAG,KAAK,CAAC,MAAN,CAAgC,IAAhC,CAApB;AACA,MAAM,SAAS,GAAG,KAAK,CAAC,MAAN,CAAgC,IAAhC,CAAlB;AAEA,MAAM,KAAK,GAAG,KAAK,CAAC,WAAN,CACV,YAAA;AACI,QAAI,WAAW,CAAC,OAAhB,EAAyB;AACrB,MAAA,WAAW,CAAC,OAAZ,CAAoB,KAApB;AACH;AACJ,GALS,EAMV,CAAC,WAAD,CANU,CAAd;AASA,EAAA,KAAK,CAAC,mBAAN,CAA0B,MAA1B,EAAkC,YAAA;AAAM,WAAC;AACrC,MAAA,OAAO,EAAE,SAAS,CAAC,OADkB;AAErC,MAAA,KAAK,EAAA,KAFgC;AAGrC,MAAA,KAAK,EAAA;AAHgC,KAAD;AAItC,GAJF;AAMA,EAAA,KAAK,CAAC,mBAAN,CAA0B,GAA1B,EAA+B,YAAA;AAAM,WAAA,MAAM,CAAN,OAAA;AAAc,GAAnD;AAEA,MAAM,GAAG,GAAG,KAAK,CAAC,OAAN,CACR,YAAA;AAAM,WAAA,KAAK,CAAL,GAAA;AAAS,GADP,EAER,CAAC,KAAK,CAAC,GAAP,CAFQ,CAAZ;AAKA,MAAM,GAAG,GAAG,KAAK,CAAC,OAAN,CACR,YAAA;AAAM,WAAA,KAAK,CAAL,GAAA;AAAS,GADP,EAER,CAAC,KAAK,CAAC,GAAP,CAFQ,CAAZ;AAKA,MAAM,IAAI,GAAG,KAAK,CAAC,OAAN,CACT,YAAA;AAAM,WAAA,KAAK,CAAC,IAAN,KAAe,SAAf,GAA2B,KAAK,CAAC,IAAjC,GAAwC,YAAY,CAApD,IAAA;AAAyD,GADtD,EAET,CAAC,KAAK,CAAC,IAAP,EAAa,YAAY,CAAC,IAA1B,CAFS,CAAb;AAKA,MAAM,GAAG,GAAG,MAAM,CAAC,SAAD,EAAY,KAAK,CAAC,GAAlB,CAAlB;;AAEA,MAAM,YAAY,GAAG,UAAC,QAAD,EAAW,KAAX,EAAgE;AACjF,QAAI,KAAK,CAAC,QAAN,IAAkB,MAAM,CAAC,OAA7B,EAAsC;AAClC,MAAA,KAAK,CAAC,QAAN,CAAe,IAAf,CAAoB,SAApB,EAA+B;AAC3B,QAAA,KAAK,EAAE,QADoB;AAE3B,QAAA,MAAM,EAAE,MAAM,CAAC,OAFY;AAG3B,QAAA,cAAc,EAAE;AAHW,OAA/B;AAKH;AACJ,GARD,CAzC+F,CAmD/F;;;AACM,MAAA,EAAA,GAAA,KAAA,CAAA,QAAA,CAAA,EAAA,CAAA;AAAA,MAAC,WAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAc,cAAA,GAAA,EAAA,CAAA,CAAA,CAAd;;AAEA,MAAA,EAAA,GAAA,QAAA,CAAA,KAAA,CAAA,YAAA,IAAA,YAAA,CAAA,YAAA,EAAA;YAAA;YAAA;cAAA;;AAAA,GAAA,EASL,YATK,CAAA;AAAA,MAAC,UAAA,GAAA,EAAA,CAAA,CAAA,CAAD;AAAA,MAAa,kBAAA,GAAA,EAAA,CAAA,CAAA,CAAb;;AAWN,MAAM,KAAK,GAAU,KAAK,CAAC,OAAN,CACjB,YAAA;AAAM,WAAA,KAAK,CAAC,KAAN,IAAA,UAAA;AAAyB,GADd,EAEjB,CAAC,KAAK,CAAC,KAAP,EAAc,UAAd,CAFiB,CAArB;AAKA,MAAM,cAAc,GAAG,KAAK,CAAC,MAAN,CAA6B,IAA7B,CAAvB;AACA,MAAM,kBAAkB,GAAG,KAAK,CAAC,MAAN,CAA6B,IAA7B,CAA3B;AAEA,MAAM,YAAY,GAAG,KAAK,CAAC,OAAN,CACjB,YAAA;AAAM,WAAC,CAAC,KAAK,CAAC,KAAN,GAAc,GAAf,KAAuB,GAAG,GAAG,GAA7B,CAAD,GAAA,GAAA;AAAyC,GAD9B,EAEjB,CAAC,KAAK,CAAC,KAAP,EAAc,GAAd,EAAmB,GAAnB,CAFiB,CAArB;AAKA,MAAM,UAAU,GAAG,KAAK,CAAC,OAAN,CACf,YAAA;AAAM,WAAC,CAAC,KAAK,CAAC,GAAN,GAAY,GAAb,KAAqB,GAAG,GAAG,GAA3B,CAAD,GAAA,GAAA;AAAuC,GAD9B,EAEf,CAAC,KAAK,CAAC,GAAP,EAAY,GAAZ,EAAiB,GAAjB,CAFe,CAAnB;AAKA,MAAM,gBAAgB,GAAwB,KAAK,CAAC,OAAN,CAC1C,YAAA;AAAM,WAAA,KAAK,CAAC,QAAN,GAAiB;AAAE,MAAA,UAAU,EAAE,CAAd;AAAiB,MAAA,MAAM,EAAE;AAAzB,KAAjB,GAAA,EAAA;AAAuD,GADnB,EAE1C,CAAC,KAAK,CAAC,QAAP,CAF0C,CAA9C;AAKA,MAAM,WAAW,GAAwB,KAAK,CAAC,OAAN,CACrC,YAAA;AAAM,WAAA,KAAK,CAAC,QAAN,GACA;AAAE,MAAA,SAAS,EAAE,QAAb;AAAuB,MAAA,YAAY,EAAE;AAArC,KADA,GAEA;AAAE,MAAA,UAAU,EAAE,QAAd;AAAwB,MAAA,WAAW,EAFnC;AAEA,KAFA;AAE+C,GAHhB,EAIrC,CAAC,KAAK,CAAC,QAAP,CAJqC,CAAzC;AAOA,MAAM,YAAY,GAAG,eAAe,EAApC;AAEA,MAAM,eAAe,GAAG,KAAK,CAAC,WAAN,CACpB,UAAC,KAAD,EAAQ,IAAR,EAAY;AACR,QAAI,CAAC,kBAAkB,CAAC,OAAxB,EAAiC;AAAE;AAAS;;AAC5C,IAAA,KAAK,CAAC,aAAN,CAAoB,cAApB;AAEA,QAAM,QAAQ,GAAG,kBAAkB,CAAC,OAAnB,CAA2B,qBAA3B,EAAjB;AACA,QAAM,QAAQ,GAAG,KAAK,CAAC,QAAN,GACV,QAAQ,CAAC,MAAT,GAAkB,KAAK,CAAC,OADd,GAEX,GAAG,KAAK,KAAR,GACK,QAAQ,CAAC,KAAT,GAAiB,KAAK,CAAC,OAD5B,GAEK,KAAK,CAAC,OAAN,GAAgB,QAAQ,CAAC,IAJpC;AAMA,QAAM,IAAI,GAAG,KAAK,CAAC,QAAN,GAAiB,QAAQ,CAAC,MAA1B,GAAmC,QAAQ,CAAC,KAAzD;AACA,QAAM,UAAU,GAAI,QAAQ,GAAG,IAA/B;AACA,QAAM,OAAO,GAAG,IAAI,KAAK,GAAT,GACT,GAAG,GAAG,UAAU,IAAI,GAAG,GAAG,GAAV,CADP,GAET,GAAG,GAAG,UAAU,IAAI,GAAG,GAAG,GAAV,CAFvB;AAIA,WAAO,OAAP;AACH,GAnBmB,EAoBpB,CACI,kBADJ,EAEI,KAAK,CAAC,QAFV,EAGI,GAHJ,EAII,GAJJ,EAKI,GALJ,EAMI,UAAU,CAAC,KANf,EAOI,UAAU,CAAC,GAPf,EAQI,KAAK,CAAC,KAAN,IAAe,KAAK,CAAC,KAAN,CAAY,KAR/B,EASI,KAAK,CAAC,KAAN,IAAe,KAAK,CAAC,KAAN,CAAY,GAT/B,CApBoB,CAAxB;AAgCA,MAAM,OAAO,GAAG,KAAK,CAAC,WAAN,CACZ,UAAC,OAAD,EAAQ;AACJ,QAAI,OAAO,IAAI,KAAK,CAAC,KAArB,EAA4B;AACxB,aAAO,OAAP;AACH;;AACD,QAAI,OAAO,IAAI,KAAK,CAAC,GAArB,EAA0B;AACtB,aAAO,KAAP;AACH;;AACD,WAAQ,IAAI,OAAJ,GAAc,KAAK,CAAC,GAAN,GAAY,KAAK,CAAC,KAAjC,GAA0C,OAA1C,GAAoD,KAA3D;AACH,GATW,EAUZ,CACI,UAAU,CAAC,KADf,EACsB,UAAU,CAAC,GADjC,EAEI,KAAK,CAAC,KAAN,IAAe,KAAK,CAAC,KAAN,CAAY,KAF/B,EAGI,KAAK,CAAC,KAAN,IAAe,KAAK,CAAC,KAAN,CAAY,GAH/B,CAVY,CAAhB;AAgBA,MAAM,kBAAkB,GAAG,KAAK,CAAC,WAAN,CACvB,UAAC,KAAD,EAA8C;AAC1C,YAAQ,KAAK,CAAC,OAAd;AACI,WAAK,IAAI,CAAC,KAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,GAAG,KAAK,KAAR,GAAgB,YAAY,CAAC,QAA7B,GAAwC,YAAY,CAAC,QAA7D;AAAuE,UAAA,GAAG,EAAE,OAA5E;AAAqF,UAAA,KAAK,EAAA;AAA1F,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,EAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,QAArB;AAA+B,UAAA,GAAG,EAAE,OAApC;AAA6C,UAAA,KAAK,EAAA;AAAlD,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,GAAG,KAAK,KAAR,GAAgB,YAAY,CAAC,QAA7B,GAAwC,YAAY,CAAC,QAA7D;AAAuE,UAAA,GAAG,EAAE,OAA5E;AAAqF,UAAA,KAAK,EAAA;AAA1F,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,QAArB;AAA+B,UAAA,GAAG,EAAE,OAApC;AAA6C,UAAA,KAAK,EAAA;AAAlD,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,GAArB;AAA0B,UAAA,GAAG,EAAE,OAA/B;AAAwC,UAAA,KAAK,EAAA;AAA7C,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,GAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,GAArB;AAA0B,UAAA,GAAG,EAAE,OAA/B;AAAwC,UAAA,KAAK,EAAA;AAA7C,SAAD,CAAlB;AACA;;AACJ;AACI;AA1BR;AA4BH,GA9BsB,EA+BvB,CAAC,kBAAD,CA/BuB,CAA3B;AAkCA,MAAM,gBAAgB,GAAG,KAAK,CAAC,WAAN,CACrB,UAAC,KAAD,EAA8C;AAC1C,YAAQ,KAAK,CAAC,OAAd;AACI,WAAK,IAAI,CAAC,KAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,GAAG,KAAK,KAAR,GAAgB,YAAY,CAAC,QAA7B,GAAwC,YAAY,CAAC,QAA7D;AAAuE,UAAA,GAAG,EAAE,KAA5E;AAAmF,UAAA,KAAK,EAAA;AAAxF,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,EAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,QAArB;AAA+B,UAAA,GAAG,EAAE,KAApC;AAA2C,UAAA,KAAK,EAAA;AAAhD,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,GAAG,KAAK,KAAR,GAAgB,YAAY,CAAC,QAA7B,GAAwC,YAAY,CAAC,QAA7D;AAAuE,UAAA,GAAG,EAAE,KAA5E;AAAmF,UAAA,KAAK,EAAA;AAAxF,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,QAArB;AAA+B,UAAA,GAAG,EAAE,KAApC;AAA2C,UAAA,KAAK,EAAA;AAAhD,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,IAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,GAArB;AAA0B,UAAA,GAAG,EAAE,KAA/B;AAAsC,UAAA,KAAK,EAAA;AAA3C,SAAD,CAAlB;AACA;;AACJ,WAAK,IAAI,CAAC,GAAV;AACI,QAAA,KAAK,CAAC,cAAN;AACA,QAAA,kBAAkB,CAAC;AAAE,UAAA,IAAI,EAAE,YAAY,CAAC,GAArB;AAA0B,UAAA,GAAG,EAAE,KAA/B;AAAsC,UAAA,KAAK,EAAA;AAA3C,SAAD,CAAlB;AACA;;AACJ;AACI;AA1BR;AA4BH,GA9BoB,EA+BrB,CAAC,kBAAD,EAAqB,GAArB,CA/BqB,CAAzB;AAkCA,MAAM,gBAAgB,GAAG,KAAK,CAAC,WAAN,CACrB,UAAC,KAAD,EAAW;AACP,QAAM,OAAO,GAAG,eAAe,CAAC,KAAD,EAAQ,GAAR,CAA/B;AACA,QAAM,GAAG,GAAG,OAAO,CAAC,OAAD,CAAnB;AACA,IAAA,cAAc,CAAC,GAAD,CAAd;AAEA,IAAA,GAAG,KAAK,KAAR,GAAgB,SAAS,CAAC,OAAV,CAAmB,KAAnB,EAAhB,GAA6C,WAAW,CAAC,OAAZ,CAAqB,KAArB,EAA7C;AACA,QAAM,MAAM,GAAI,GAAG,KAAK,KAAR,GAAgB,YAAY,CAAC,GAA7B,GAAmC,YAAY,CAAC,KAAhE;AACA,IAAA,kBAAkB,CAAC;AAAE,MAAA,IAAI,EAAE,MAAR;AAAgB,MAAA,OAAO,EAAA,OAAvB;AAAyB,MAAA,KAAK,EAAA;AAA9B,KAAD,CAAlB;AACH,GAToB,EAUrB,CAAC,KAAK,CAAC,QAAP,EAAiB,GAAjB,EAAsB,GAAtB,EAA2B,kBAA3B,CAVqB,CAAzB;;AAaA,MAAM,eAAe,GAAG,UAAC,KAAD,EAAM;AAC1B,QAAM,OAAO,GAAG,eAAe,CAAC,KAAD,EAAQ,GAAR,CAA/B;AACA,QAAM,MAAM,GAAG,WAAW,KAAK,KAAhB,GAAwB,YAAY,CAAC,GAArC,GAA2C,YAAY,CAAC,KAAvE;AAEA,IAAA,kBAAkB,CAAC;AAAE,MAAA,IAAI,EAAE,MAAR;AAAgB,MAAA,OAAO,EAAA,OAAvB;AAAyB,MAAA,KAAK,EAAA;AAA9B,KAAD,CAAlB;AACH,GALD;;AAOA,MAAM,kBAAkB,GAAG,UAAC,KAAD,EAAM;AAC7B,QAAM,OAAO,GAAG,eAAe,CAAC,KAAD,EAAQ,GAAR,CAA/B;AACA,QAAM,MAAM,GAAG,WAAW,KAAK,KAAhB,GAAwB,YAAY,CAAC,GAArC,GAA2C,YAAY,CAAC,KAAvE;AACA,IAAA,kBAAkB,CAAC;AAAE,MAAA,IAAI,EAAE,MAAR;AAAgB,MAAA,OAAO,EAAA,OAAvB;AAAyB,MAAA,KAAK,EAAA;AAA9B,KAAD,CAAlB;AAEA,IAAA,cAAc,CAAC,EAAD,CAAd;AACH,GAND,CAzO+F,CAiP/F;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AAEA,EAAA,YAAY,CAAC,kBAAD,EAAqB;AAAE,IAAA,OAAO,EAAE,gBAAX;AAA6B,IAAA,MAAM,EAAE,eAArC;AAAsD,IAAA,SAAS,EAAE;AAAjE,GAArB,CAAZ,CA7P+F,CA8P/F;;AAEA,SACI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,EAAE,EAAE,KAAK,CAAC,EAFd;AAGI,IAAA,KAAK,EAAE,KAAK,CAAC,KAHjB;AAII,IAAA,GAAG,EAAE,SAJT;AAKI,IAAA,GAAG,EAAE,GALT;AAMI,IAAA,SAAS,EAAE,UAAU,CACjB,mBADiB,EAEjB;AACI,eAAS,GAAG,KAAK,KADrB;AAEI,0BAAoB,KAAK,CAAC,QAF9B;AAGI,2BAAqB,KAAK,CAAC,QAH/B;AAII,6BAAuB,CAAC,KAAK,CAAC;AAJlC,KAFiB,EAQjB,KAAK,CAAC,SARW,CANzB;AAeK,uBACgB,KAAK,CAAC,cAhB3B;AAgByC,wBACnB,KAAK,CAAC;AAjB5B,GAAA,EAqBI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,SAAS,EAAE,eADf;AAEI,IAAA,KAAK,EAAE;AACH,MAAA,OAAO,EAAE,MADN;AAEH,MAAA,QAAQ,EAAE,UAFP;AAGH,MAAA,aAAa,EAAE,KAAK,CAAC,QAAN,GAAiB,gBAAjB,GAAoC;AAHhD;AAFX,GAAA,EAQI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,GAAG,EAAE,kBADT;AAEI,IAAA,SAAS,EAAC,qBAFd;AAGI,IAAA,KAAK,EAAA,QAAA,CAAA;AACD,MAAA,QAAQ,EAAE,CADT;AAED,MAAA,QAAQ,EAAE,UAFT;AAGD,MAAA,WAAW,EAAE;AAHZ,KAAA,EAIE,WAJF;AAHT,GAAA,EAUK,KAAK,CAAC,QAAN,IACG,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AACI,IAAA,SAAS,EAAC,wBADd;AAEI,IAAA,KAAK,EAAA,QAAA,CAAA;AAAI,MAAA,MAAM,EAAE;AAAZ,KAAA,EAAkB,gBAAlB;AAFT,GAAA,EAKQ,KAAK,CAAC,QAAN,CAAe,GAAf,CAAmB,KAAK,CAAC,QAAzB,EAAmC,UAAC,KAAD,EAAW;AAC1C,WAAO,KAAK,IAAI,KAAK,CAAC,YAAN,CACZ,KADY,EACL;AACP,MAAA,QAAQ,EAAE,OAAO,KAAK,CAAC,KAAN,CAAY,QAAZ,GAAuB,KAAK,CAAC,GAApC,KACL,KAAK,CAAC,GAAN,GAAY,KAAK,CAAC,GADb,CADH;AAGP,MAAA,QAAQ,EAAE,KAAK,CAAC;AAHT,KADK,EAMZ,KAAK,CAAC,KAAN,CAAY,QANA,CAAhB;AAQH,GATD,CALR,CAXR,EA6BI,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACI,IAAA,GAAG,EAAE,cADT;AAEI,IAAA,SAAS,EAAC,gBAFd;AAGI,IAAA,KAAK,EAAE,KAAK,CAAC,QAAN,GACD;AAAE,MAAA,MAAM,EAAE,CAAV;AAAa,MAAA,MAAM,EAAE;AAArB,KADC,IAEF,EAAA,GAAA,EAAA,EAAG,EAAA,CAAC,GAAG,KAAK,KAAR,GAAgB,OAAhB,GAA0B,MAA3B,CAAA,GAAoC,CAAvC,EAA0C,EAAA,CAAA,KAAA,GAAO,MAAjD,EAAuD,EAFrD;AAHX,GAAA,EAOM,YAAY,KAAK,IAAjB,IAAyB,UAAU,KAAK,IAAzC,IAAkD,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAA,sBAC/B,IAD+B;AAE/C,IAAA,GAAG,EAAE,kBAF0C;AAG/C,IAAA,KAAK,EAAK,KAAK,CAAC,KAAN,GAAW,KAAX,GAAiB,KAAK,CAAC,GAHc;AAI/C,IAAA,SAAS,EAAC,oBAJqC;AAK/C,IAAA,KAAK,EAAE,KAAK,CAAC,QAAN,GACD;AAAE,MAAA,MAAM,EAAG,UAAU,GAAG,YAAd,GAA8B,GAAxC;AAA6C,MAAA,MAAM,EAAE,YAAY,GAAG;AAApE,KADC,IAEF,EAAA,GAAA,EAAA,EACG,EAAA,CAAC,GAAG,KAAK,KAAR,GAAgB,OAAhB,GAA0B,MAA3B,CAAA,GAAoC,YAAY,GAAG,GADtD,EAEG,EAAA,CAAA,KAAA,GAAQ,UAAU,GAAG,YAAd,GAA8B,GAFxC,EAGA,EALE;AALwC,GAAA,CAPvD,EA8BI,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACI,IAAA,GAAG,EAAE,WADT;AAGI,IAAA,IAAI,EAAC,QAHT;AAII,IAAA,QAAQ,EAAE,WAAW,CAAC,KAAK,CAAC,aAAP,EAAsB,KAAK,CAAC,QAA5B,EAAsC,SAAtC,CAJzB;AAIyE,qBACtD,GALnB;AAKsB,qBACH,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,KAAK,CAAC,GAApB,CANnB;AAM2C,qBACxB,KAAK,CAAC,KAPzB;AAO8B,qBACX,KAAK,CAAC,QAAN,GAAiB,MAAjB,GAA0B,SAR7C;AAUI,IAAA,SAAS,EAAC,cAVd;AAWI,IAAA,KAAK,EAAE,YAAY,CAAC,gBAAb,CAA8B,eAA9B,EAA+C,QAAQ,CAAC,eAAD,CAAvD,CAXX;AAYI,IAAA,KAAK,EAAE,KAAK,CAAC,QAAN,GACD;AAAE,MAAA,MAAM,EAAE,UAAU,YAAV,GAAyB,UAAnC;AAA+C,MAAA,MAAM,EAAE;AAAvD,KADC,IAEF,EAAA,GAAA,EAAA,EAAG,EAAA,CAAC,GAAG,KAAK,KAAR,GAAgB,OAAhB,GAA0B,MAA3B,CAAA,GAAoC,UAAU,YAAV,GAAyB,UAAhE,EAA4E,EAAA,CAAA,MAAA,GAAQ,CAApF,EAAqF,EAFnF,CAZX;AAgBI,IAAA,SAAS,EAAE;AAhBf,GAAA,CA9BJ,EAgDI,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA;AACI,IAAA,GAAG,EAAE,SADT;AAGI,IAAA,IAAI,EAAC,QAHT;AAII,IAAA,QAAQ,EAAE,WAAW,CAAC,KAAK,CAAC,WAAP,EAAoB,KAAK,CAAC,QAA1B,EAAoC,SAApC,CAJzB;AAIuE,qBACpD,IAAI,CAAC,GAAL,CAAS,GAAT,EAAc,KAAK,CAAC,KAApB,CALnB;AAK6C,qBAC1B,GANnB;AAMsB,qBACH,KAAK,CAAC,GAPzB;AAO4B,qBACT,KAAK,CAAC,QAAN,GAAiB,MAAjB,GAA0B,SAR7C;AAUI,IAAA,SAAS,EAAC,cAVd;AAWI,IAAA,KAAK,EAAE,YAAY,CAAC,gBAAb,CAA8B,eAA9B,EAA+C,QAAQ,CAAC,eAAD,CAAvD,CAXX;AAYI,IAAA,KAAK,EAAE,KAAK,CAAC,QAAN,GACD;AAAE,MAAA,MAAM,EAAE,UAAU,UAAV,GAAuB,UAAjC;AAA6C,MAAA,MAAM,EAAE;AAArD,KADC,IAEF,EAAA,GAAA,EAAA,EAAG,EAAA,CAAC,GAAG,KAAK,KAAR,GAAgB,OAAhB,GAA0B,MAA3B,CAAA,GAAoC,UAAU,UAAV,GAAuB,UAA9D,EAA0E,EAAA,CAAA,MAAA,GAAQ,CAAlF,EAAmF,EAFjF,CAZX;AAgBI,IAAA,SAAS,EAAE;AAhBf,GAAA,CAhDJ,CA7BJ,CARJ,CArBJ,CADJ;AAkIH,CAlY0B,CAApB;AAoYP,IAAM,SAAS,GAAG;AACd,EAAA,KAAK,EAAE,UAAC,KAAD,EAA0B,QAA1B,EAA4C,aAA5C,EAAiE;AACpE,QAAI,KAAK,CAAC,KAAV,EAAiB;AACb,UAAM,KAAK,GAAG,KAAK,CAAC,KAAN,CAAY,KAA1B;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,KAAN,CAAY,GAAxB;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;;AACA,UAAI,KAAK,GAAG,GAAR,IAAe,KAAK,GAAG,GAAvB,IAA8B,KAAK,GAAG,GAAtC,IAA6C,GAAG,GAAG,GAAnD,IAA0D,GAAG,GAAG,GAAhE,IAAuE,GAAG,GAAG,KAAjF,EAAwF;AACpF,eAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,mJADpD,CAAP;AAKH;AACJ;;AACD,WAAO,IAAP;AACH,GAhBa;AAiBd,EAAA,YAAY,EAAE,UAAC,KAAD,EAA0B,QAA1B,EAA4C,aAA5C,EAAiE;AAC3E,QAAI,KAAK,CAAC,YAAV,EAAwB;AACpB,UAAM,KAAK,GAAG,KAAK,CAAC,YAAN,CAAmB,KAAjC;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,YAAN,CAAmB,GAA/B;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;AACA,UAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;;AACA,UAAI,KAAK,GAAG,GAAR,IAAe,KAAK,GAAG,GAAvB,IAA8B,KAAK,GAAG,GAAtC,IAA6C,GAAG,GAAG,GAAnD,IAA0D,GAAG,GAAG,GAAhE,IAAuE,GAAG,GAAG,KAAjF,EAAwF;AACpF,eAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,mJADpD,CAAP;AAKH;AACJ;;AACD,WAAO,IAAP;AACH,GAhCa;AAiCd,EAAA,QAAQ,EAAE,SAAS,CAAC,IAjCN;AAkCd,EAAA,IAAI,EAAE,SAAS,CAAC,MAlCF;AAmCd,EAAA,GAAG,EAAE,UAAC,KAAD,EAA0B,QAA1B,EAA4C,aAA5C,EAAiE;AAClE,QAAM,IAAI,GAAW,KAAK,CAAC,QAAD,CAA1B;AACA,QAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;AACA,QAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;;AACA,QAAI,GAAG,KAAK,SAAZ,EAAuB;AACnB,aAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,qBAAvD,GACE,QADF,GACU,gDAFP,CAAP;AAKH;;AACD,QAAI,IAAI,IAAI,GAAG,IAAI,GAAnB,EAAwB;AACpB,aAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,qBAAvD,GACE,QADF,GACU,4EAFP,CAAP;AAKH;;AACD,WAAO,IAAP;AACH,GAtDa;AAuDd,EAAA,GAAG,EAAE,UAAC,KAAD,EAA0B,QAA1B,EAA4C,aAA5C,EAAiE;AAClE,QAAM,IAAI,GAAW,KAAK,CAAC,QAAD,CAA1B;AACA,QAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;AACA,QAAM,GAAG,GAAG,KAAK,CAAC,GAAlB;;AACA,QAAI,GAAG,KAAK,SAAZ,EAAuB;AACnB,aAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,qBAAvD,GACE,QADF,GACU,gDAFP,CAAP;AAKH;;AACD,QAAI,IAAI,IAAI,GAAG,IAAI,GAAnB,EAAwB;AACpB,aAAO,IAAI,KAAJ,CACH,oBAAkB,QAAlB,GAA0B,eAA1B,GAA0C,aAA1C,GAAuD,qBAAvD,GACE,QADF,GACU,6EAFP,CAAP;AAKH;;AACD,WAAO,IAAP;AACH,GA1Ea;AA2Ed,EAAA,QAAQ,EAAE,SAAS,CAAC,IA3EN;AA4Ed,EAAA,QAAQ,EAAE,SAAS,CAAC,IA5EN;AA6Ed,EAAA,GAAG,EAAE,SAAS,CAAC,KAAV,CAAgB,CAAC,KAAD,EAAQ,KAAR,CAAhB;AA7ES,CAAlB;AAgFA,IAAM,YAAY,GAAG;AACjB,EAAA,IAAI,EAAE,CADW;AAEjB,EAAA,YAAY,EAAE;AACV,IAAA,KAAK,EAAE,CADG;AAEV,IAAA,GAAG,EAAE;AAFK,GAFG;AAMjB,EAAA,QAAQ,EAAE,KANO;AAOjB,EAAA,QAAQ,EAAE;AAPO,CAArB;AAUA,WAAW,CAAC,WAAZ,GAA0B,uBAA1B,C,CACA;;AACC,WAAsD,CAAC,SAAvD,GAAmE,SAAnE;AACD,WAAW,CAAC,YAAZ,GAA2B,YAA3B","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, Keys, useDir, useDraggable, getTabIndex } from '@progress/kendo-react-common';\nimport { messages, sliderDragTitle } from './../messages';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { rangeReducer, RANGE_ACTION } from './range-raducer';\n/**\n * @hidden\n */\nvar useRange = function (defaultValue, args, callback) {\n    var _a = React.useState(defaultValue), state = _a[0], setState = _a[1];\n    var handleDispatchAction = React.useCallback(function (action) {\n        var newState = rangeReducer(args.state || state, __assign({}, action, args));\n        if (callback) {\n            callback(newState, action.event);\n        }\n        setState(newState);\n    }, [args, callback]);\n    return [state, handleDispatchAction];\n};\n/**\n * Represents the RangeSlider component.\n */\nexport var RangeSlider = React.forwardRef(function (props, ref) {\n    var _a, _b, _c, _d;\n    var target = React.useRef(null);\n    var sliderRef = React.useRef(null);\n    var sliderSelectionRef = React.useRef(null);\n    var startHandle = React.useRef(null);\n    var endHandle = React.useRef(null);\n    var focus = React.useCallback(function () {\n        if (startHandle.current) {\n            startHandle.current.focus();\n        }\n    }, [startHandle]);\n    React.useImperativeHandle(target, function () { return ({\n        element: sliderRef.current,\n        focus: focus,\n        props: props\n    }); });\n    React.useImperativeHandle(ref, function () { return target.current; });\n    var min = React.useMemo(function () { return props.min; }, [props.min]);\n    var max = React.useMemo(function () { return props.max; }, [props.max]);\n    var step = React.useMemo(function () { return props.step !== undefined ? props.step : defaultProps.step; }, [props.step, defaultProps.step]);\n    var dir = useDir(sliderRef, props.dir);\n    var handleChange = function (newValue, event) {\n        if (props.onChange && target.current) {\n            props.onChange.call(undefined, {\n                value: newValue,\n                target: target.current,\n                syntheticEvent: event\n            });\n        }\n    };\n    // const [showTooltip, setShowTooltip] = React.useState(false);\n    var _e = React.useState(''), currentDrag = _e[0], setCurrentDrag = _e[1];\n    var _f = useRange(props.defaultValue || defaultProps.defaultValue, {\n        min: min,\n        max: max,\n        step: step,\n        state: props.value\n    }, handleChange), stateValue = _f[0], dispatchStateValue = _f[1];\n    var value = React.useMemo(function () { return props.value || stateValue; }, [props.value, stateValue]);\n    var sliderTrackRef = React.useRef(null);\n    var sliderTrackWrapRef = React.useRef(null);\n    var percentStart = React.useMemo(function () { return ((value.start - min) / (max - min)) * 100; }, [value.start, min, max]);\n    var percentEnd = React.useMemo(function () { return ((value.end - min) / (max - min)) * 100; }, [value.end, min, max]);\n    var sliderItemsStyle = React.useMemo(function () { return props.vertical ? { paddingTop: 0, height: '100%' } : {}; }, [props.vertical]);\n    var trackStyles = React.useMemo(function () { return props.vertical\n        ? { marginTop: '0.5rem', marginBottom: '0.5rem' }\n        : { marginLeft: '0.5rem', marginRight: '0.5rem' }; }, [props.vertical]);\n    var localization = useLocalization();\n    var calcNewDistance = React.useCallback(function (event, calc) {\n        if (!sliderTrackWrapRef.current) {\n            return;\n        }\n        event.originalEvent.preventDefault();\n        var computed = sliderTrackWrapRef.current.getBoundingClientRect();\n        var distance = props.vertical\n            ? (computed.bottom - event.clientY)\n            : dir === 'rtl'\n                ? (computed.right - event.clientX)\n                : (event.clientX - computed.left);\n        var size = props.vertical ? computed.height : computed.width;\n        var percentage = (distance / size);\n        var payload = calc === '+'\n            ? (min + percentage * (max + min))\n            : (min + percentage * (max - min));\n        return payload;\n    }, [\n        sliderTrackWrapRef,\n        props.vertical,\n        dir,\n        min,\n        max,\n        stateValue.start,\n        stateValue.end,\n        props.value && props.value.start,\n        props.value && props.value.end\n    ]);\n    var calcKey = React.useCallback(function (payload) {\n        if (payload <= value.start) {\n            return 'start';\n        }\n        if (payload >= value.end) {\n            return 'end';\n        }\n        return (2 * payload < value.end + value.start) ? 'start' : 'end';\n    }, [\n        stateValue.start, stateValue.end,\n        props.value && props.value.start,\n        props.value && props.value.end\n    ]);\n    var handleStartKeyDown = React.useCallback(function (event) {\n        switch (event.keyCode) {\n            case Keys.right:\n                event.preventDefault();\n                dispatchStateValue({ type: dir === 'rtl' ? RANGE_ACTION.decrease : RANGE_ACTION.increase, key: 'start', event: event });\n                break;\n            case Keys.up:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.increase, key: 'start', event: event });\n                break;\n            case Keys.left:\n                event.preventDefault();\n                dispatchStateValue({ type: dir === 'rtl' ? RANGE_ACTION.increase : RANGE_ACTION.decrease, key: 'start', event: event });\n                break;\n            case Keys.down:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.decrease, key: 'start', event: event });\n                break;\n            case Keys.home:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.min, key: 'start', event: event });\n                break;\n            case Keys.end:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.max, key: 'start', event: event });\n                break;\n            default:\n                break;\n        }\n    }, [dispatchStateValue]);\n    var handleEndKeyDown = React.useCallback(function (event) {\n        switch (event.keyCode) {\n            case Keys.right:\n                event.preventDefault();\n                dispatchStateValue({ type: dir === 'rtl' ? RANGE_ACTION.decrease : RANGE_ACTION.increase, key: 'end', event: event });\n                break;\n            case Keys.up:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.increase, key: 'end', event: event });\n                break;\n            case Keys.left:\n                event.preventDefault();\n                dispatchStateValue({ type: dir === 'rtl' ? RANGE_ACTION.increase : RANGE_ACTION.decrease, key: 'end', event: event });\n                break;\n            case Keys.down:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.decrease, key: 'end', event: event });\n                break;\n            case Keys.home:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.min, key: 'end', event: event });\n                break;\n            case Keys.end:\n                event.preventDefault();\n                dispatchStateValue({ type: RANGE_ACTION.max, key: 'end', event: event });\n                break;\n            default:\n                break;\n        }\n    }, [dispatchStateValue, dir]);\n    var handleTrackPress = React.useCallback(function (event) {\n        var payload = calcNewDistance(event, '-');\n        var key = calcKey(payload);\n        setCurrentDrag(key);\n        key === 'end' ? endHandle.current.focus() : startHandle.current.focus();\n        var action = (key === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start);\n        dispatchStateValue({ type: action, payload: payload, event: event });\n    }, [props.vertical, min, max, dispatchStateValue]);\n    var handleTrackDrag = function (event) {\n        var payload = calcNewDistance(event, '+');\n        var action = currentDrag === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start;\n        dispatchStateValue({ type: action, payload: payload, event: event });\n    };\n    var handleTrackRelease = function (event) {\n        var payload = calcNewDistance(event, '+');\n        var action = currentDrag === 'end' ? RANGE_ACTION.end : RANGE_ACTION.start;\n        dispatchStateValue({ type: action, payload: payload, event: event });\n        setCurrentDrag('');\n    };\n    // const handleFocus = React.useCallback(\n    //     () => {\n    //         setShowTooltip(true);\n    //     },\n    //     []);\n    // const handleBlur = React.useCallback(\n    //     () => {\n    //         setShowTooltip(false);\n    //     },\n    //     []);\n    useDraggable(sliderTrackWrapRef, { onPress: handleTrackPress, onDrag: handleTrackDrag, onRelease: handleTrackRelease });\n    // const { onFocus, onBlur } = useAsyncFocusBlur({ onFocus: handleFocus, onBlur: handleBlur });\n    return (React.createElement(\"div\", { role: \"slider\", id: props.id, style: props.style, ref: sliderRef, dir: dir, className: classNames('k-widget k-slider', {\n            'k-rtl': dir === 'rtl',\n            'k-state-disabled': props.disabled,\n            'k-slider-vertical': props.vertical,\n            'k-slider-horizontal': !props.vertical\n        }, props.className), \"aria-labelledby\": props.ariaLabelledBy, \"aria-describedby\": props.ariaDescribedBy },\n        React.createElement(\"div\", { className: 'k-slider-wrap', style: {\n                display: 'flex',\n                position: 'relative',\n                flexDirection: props.vertical ? 'column-reverse' : 'row'\n            } },\n            React.createElement(\"div\", { ref: sliderTrackWrapRef, className: \"k-slider-track-wrap\", style: __assign({ flexGrow: 1, position: 'relative', touchAction: 'none' }, trackStyles) },\n                props.children && (React.createElement(\"ul\", { className: \"k-reset k-slider-items\", style: __assign({ margin: 0 }, sliderItemsStyle) }, React.Children.map(props.children, function (child) {\n                    return child && React.cloneElement(child, {\n                        position: 100 * (child.props.position - props.min) /\n                            (props.max - props.min),\n                        vertical: props.vertical\n                    }, child.props.children);\n                }))),\n                React.createElement(\"div\", { ref: sliderTrackRef, className: \"k-slider-track\", style: props.vertical\n                        ? { bottom: 0, height: '100%' }\n                        : (_a = {}, _a[dir === 'rtl' ? 'right' : 'left'] = 0, _a.width = '100%', _a) },\n                    (percentStart !== null && percentEnd !== null) && React.createElement(\"div\", { \"data-selection\": true, ref: sliderSelectionRef, title: value.start + \" - \" + value.end, className: \"k-slider-selection\", style: props.vertical\n                            ? { height: (percentEnd - percentStart) + '%', bottom: percentStart + '%' }\n                            : (_b = {},\n                                _b[dir === 'rtl' ? 'right' : 'left'] = percentStart + '%',\n                                _b.width = (percentEnd - percentStart) + '%',\n                                _b) }),\n                    React.createElement(\"a\", { ref: startHandle, role: \"slider\", tabIndex: getTabIndex(props.startTabIndex, props.disabled, undefined), \"aria-valuemin\": min, \"aria-valuemax\": Math.max(max, value.end), \"aria-valuenow\": value.start, \"aria-disabled\": props.disabled ? 'true' : undefined, className: \"k-draghandle\", title: localization.toLanguageString(sliderDragTitle, messages[sliderDragTitle]), style: props.vertical\n                            ? { bottom: 'calc(' + percentStart + '% - 8px)', zIndex: 1 }\n                            : (_c = {}, _c[dir === 'rtl' ? 'right' : 'left'] = 'calc(' + percentStart + '% - 8px)', _c.zIndex = 1, _c), onKeyDown: handleStartKeyDown }),\n                    React.createElement(\"a\", { ref: endHandle, role: \"slider\", tabIndex: getTabIndex(props.endTabIndex, props.disabled, undefined), \"aria-valuemin\": Math.min(min, value.start), \"aria-valuemax\": max, \"aria-valuenow\": value.end, \"aria-disabled\": props.disabled ? 'true' : undefined, className: \"k-draghandle\", title: localization.toLanguageString(sliderDragTitle, messages[sliderDragTitle]), style: props.vertical\n                            ? { bottom: 'calc(' + percentEnd + '% - 8px)', zIndex: 1 }\n                            : (_d = {}, _d[dir === 'rtl' ? 'right' : 'left'] = 'calc(' + percentEnd + '% - 8px)', _d.zIndex = 1, _d), onKeyDown: handleEndKeyDown }))))));\n});\nvar propTypes = {\n    value: function (props, propName, componentName) {\n        if (props.value) {\n            var start = props.value.start;\n            var end = props.value.end;\n            var min = props.min;\n            var max = props.max;\n            if (start > end || start > max || start < min || end > max || end < min || end < start) {\n                return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                    The { start, end } value must be between the min & max value and { start, end } must be start < end.\\n                    \");\n            }\n        }\n        return null;\n    },\n    defaultValue: function (props, propName, componentName) {\n        if (props.defaultValue) {\n            var start = props.defaultValue.start;\n            var end = props.defaultValue.end;\n            var min = props.min;\n            var max = props.max;\n            if (start > end || start > max || start < min || end > max || end < min || end < start) {\n                return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                    The { start, end } value must be between the min & max value and { start, end } must be start < end.\\n                    \");\n            }\n        }\n        return null;\n    },\n    onChange: PropTypes.func,\n    step: PropTypes.number,\n    min: function (props, propName, componentName) {\n        var prop = props[propName];\n        var min = props.min;\n        var max = props.max;\n        if (min === undefined) {\n            return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be undefined.\\n                \");\n        }\n        if (prop && min >= max) {\n            return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be equal to or bigger than the max value.\\n                \");\n        }\n        return null;\n    },\n    max: function (props, propName, componentName) {\n        var prop = props[propName];\n        var min = props.min;\n        var max = props.max;\n        if (max === undefined) {\n            return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be undefined.\\n                \");\n        }\n        if (prop && max <= min) {\n            return new Error(\"Invalid prop + \" + propName + \" supplied to \" + componentName + \".\\n                \" + propName + \" value can not be equal to or smaller than the min value.\\n                \");\n        }\n        return null;\n    },\n    vertical: PropTypes.bool,\n    disabled: PropTypes.bool,\n    dir: PropTypes.oneOf(['ltr', 'rtl'])\n};\nvar defaultProps = {\n    step: 1,\n    defaultValue: {\n        start: 0,\n        end: 0\n    },\n    vertical: false,\n    disabled: false\n};\nRangeSlider.displayName = 'KendoReactRangeSlider';\n// TODO: delete casting when @types/react is updated!\nRangeSlider.propTypes = propTypes;\nRangeSlider.defaultProps = defaultProps;\n//# sourceMappingURL=RangeSlider.js.map"]},"metadata":{},"sourceType":"module"}