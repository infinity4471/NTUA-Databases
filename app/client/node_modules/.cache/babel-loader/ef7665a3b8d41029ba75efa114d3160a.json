{"ast":null,"code":"import BaseNode from '../core/base-node';\nimport renderAllAttr from './utils/render-all-attributes';\nimport renderAttr from './utils/render-attribute';\nimport renderStyle from './utils/render-style';\nimport NODE_MAP from './node-map';\nimport renderSVG from './utils/render-svg';\nimport { SVG_NS, NONE } from './constants';\nimport { support } from '../common';\nimport { defined } from '../util';\nvar TRANSFORM = \"transform\";\nvar DefinitionMap = {\n  clip: \"clip-path\",\n  fill: \"fill\"\n};\n\nfunction isDefinition(type, value) {\n  return type === \"clip\" || type === \"fill\" && (!value || value.nodeType === \"Gradient\");\n}\n\nfunction baseUrl() {\n  var base = document.getElementsByTagName(\"base\")[0];\n  var href = document.location.href;\n  var url = \"\";\n\n  if (base && !(support.browser || {}).msie) {\n    var hashIndex = href.indexOf(\"#\");\n\n    if (hashIndex !== -1) {\n      href = href.substring(0, hashIndex);\n    }\n\n    url = href;\n  }\n\n  return url;\n}\n\nvar Node = function (BaseNode) {\n  function Node(srcElement, options) {\n    BaseNode.call(this, srcElement);\n    this.definitions = {};\n    this.options = options;\n  }\n\n  if (BaseNode) Node.__proto__ = BaseNode;\n  Node.prototype = Object.create(BaseNode && BaseNode.prototype);\n  Node.prototype.constructor = Node;\n\n  Node.prototype.destroy = function destroy() {\n    if (this.element) {\n      this.element._kendoNode = null;\n      this.element = null;\n    }\n\n    this.clearDefinitions();\n    BaseNode.prototype.destroy.call(this);\n  };\n\n  Node.prototype.load = function load(elements, pos) {\n    var this$1 = this;\n\n    for (var i = 0; i < elements.length; i++) {\n      var srcElement = elements[i];\n      var children = srcElement.children;\n      var childNode = new NODE_MAP[srcElement.nodeType](srcElement, this$1.options);\n\n      if (defined(pos)) {\n        this$1.insertAt(childNode, pos);\n      } else {\n        this$1.append(childNode);\n      }\n\n      childNode.createDefinitions();\n\n      if (children && children.length > 0) {\n        childNode.load(children);\n      }\n\n      var element = this$1.element;\n\n      if (element) {\n        childNode.attachTo(element, pos);\n      }\n    }\n  };\n\n  Node.prototype.root = function root() {\n    var root = this;\n\n    while (root.parent) {\n      root = root.parent;\n    }\n\n    return root;\n  };\n\n  Node.prototype.attachTo = function attachTo(domElement, pos) {\n    var container = document.createElement(\"div\");\n    renderSVG(container, \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" + this.render() + \"</svg>\");\n    var element = container.firstChild.firstChild;\n\n    if (element) {\n      if (defined(pos)) {\n        domElement.insertBefore(element, domElement.childNodes[pos] || null);\n      } else {\n        domElement.appendChild(element);\n      }\n\n      this.setElement(element);\n    }\n  };\n\n  Node.prototype.setElement = function setElement(element) {\n    if (this.element) {\n      this.element._kendoNode = null;\n    }\n\n    this.element = element;\n    this.element._kendoNode = this;\n    var nodes = this.childNodes;\n\n    for (var i = 0; i < nodes.length; i++) {\n      var childElement = element.childNodes[i];\n      nodes[i].setElement(childElement);\n    }\n  };\n\n  Node.prototype.clear = function clear() {\n    this.clearDefinitions();\n\n    if (this.element) {\n      this.element.innerHTML = \"\";\n    }\n\n    var children = this.childNodes;\n\n    for (var i = 0; i < children.length; i++) {\n      children[i].destroy();\n    }\n\n    this.childNodes = [];\n  };\n\n  Node.prototype.removeSelf = function removeSelf() {\n    if (this.element) {\n      var parentNode = this.element.parentNode;\n\n      if (parentNode) {\n        parentNode.removeChild(this.element);\n      }\n\n      this.element = null;\n    }\n\n    BaseNode.prototype.removeSelf.call(this);\n  };\n\n  Node.prototype.template = function template() {\n    return this.renderChildren();\n  };\n\n  Node.prototype.render = function render() {\n    return this.template();\n  };\n\n  Node.prototype.renderChildren = function renderChildren() {\n    var nodes = this.childNodes;\n    var output = \"\";\n\n    for (var i = 0; i < nodes.length; i++) {\n      output += nodes[i].render();\n    }\n\n    return output;\n  };\n\n  Node.prototype.optionsChange = function optionsChange(e) {\n    var field = e.field;\n    var value = e.value;\n\n    if (field === \"visible\") {\n      this.css(\"display\", value ? \"\" : NONE);\n    } else if (DefinitionMap[field] && isDefinition(field, value)) {\n      this.updateDefinition(field, value);\n    } else if (field === \"opacity\") {\n      this.attr(\"opacity\", value);\n    } else if (field === \"cursor\") {\n      this.css(\"cursor\", value);\n    } else if (field === \"id\") {\n      if (value) {\n        this.attr(\"id\", value);\n      } else {\n        this.removeAttr(\"id\");\n      }\n    }\n\n    BaseNode.prototype.optionsChange.call(this, e);\n  };\n\n  Node.prototype.attr = function attr(name, value) {\n    if (this.element) {\n      this.element.setAttribute(name, value);\n    }\n  };\n\n  Node.prototype.allAttr = function allAttr(attrs) {\n    var this$1 = this;\n\n    for (var i = 0; i < attrs.length; i++) {\n      this$1.attr(attrs[i][0], attrs[i][1]);\n    }\n  };\n\n  Node.prototype.css = function css(name, value) {\n    if (this.element) {\n      this.element.style[name] = value;\n    }\n  };\n\n  Node.prototype.allCss = function allCss(styles) {\n    var this$1 = this;\n\n    for (var i = 0; i < styles.length; i++) {\n      this$1.css(styles[i][0], styles[i][1]);\n    }\n  };\n\n  Node.prototype.removeAttr = function removeAttr(name) {\n    if (this.element) {\n      this.element.removeAttribute(name);\n    }\n  };\n\n  Node.prototype.mapTransform = function mapTransform(transform) {\n    var attrs = [];\n\n    if (transform) {\n      attrs.push([TRANSFORM, \"matrix(\" + transform.matrix().toString(6) + \")\"]);\n    }\n\n    return attrs;\n  };\n\n  Node.prototype.renderTransform = function renderTransform() {\n    return renderAllAttr(this.mapTransform(this.srcElement.transform()));\n  };\n\n  Node.prototype.transformChange = function transformChange(value) {\n    if (value) {\n      this.allAttr(this.mapTransform(value));\n    } else {\n      this.removeAttr(TRANSFORM);\n    }\n  };\n\n  Node.prototype.mapStyle = function mapStyle() {\n    var options = this.srcElement.options;\n    var style = [[\"cursor\", options.cursor]];\n\n    if (options.visible === false) {\n      style.push([\"display\", NONE]);\n    }\n\n    return style;\n  };\n\n  Node.prototype.renderStyle = function renderStyle$1() {\n    return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n  };\n\n  Node.prototype.renderOpacity = function renderOpacity() {\n    return renderAttr(\"opacity\", this.srcElement.options.opacity);\n  };\n\n  Node.prototype.renderId = function renderId() {\n    return renderAttr(\"id\", this.srcElement.options.id);\n  };\n\n  Node.prototype.createDefinitions = function createDefinitions() {\n    var srcElement = this.srcElement;\n    var definitions = this.definitions;\n\n    if (srcElement) {\n      var options = srcElement.options;\n      var hasDefinitions;\n\n      for (var field in DefinitionMap) {\n        var definition = options.get(field);\n\n        if (definition && isDefinition(field, definition)) {\n          definitions[field] = definition;\n          hasDefinitions = true;\n        }\n      }\n\n      if (hasDefinitions) {\n        this.definitionChange({\n          action: \"add\",\n          definitions: definitions\n        });\n      }\n    }\n  };\n\n  Node.prototype.definitionChange = function definitionChange(e) {\n    if (this.parent) {\n      this.parent.definitionChange(e);\n    }\n  };\n\n  Node.prototype.updateDefinition = function updateDefinition(type, value) {\n    var definitions = this.definitions;\n    var current = definitions[type];\n    var attr = DefinitionMap[type];\n    var definition = {};\n\n    if (current) {\n      definition[type] = current;\n      this.definitionChange({\n        action: \"remove\",\n        definitions: definition\n      });\n      delete definitions[type];\n    }\n\n    if (!value) {\n      if (current) {\n        this.removeAttr(attr);\n      }\n    } else {\n      definition[type] = value;\n      this.definitionChange({\n        action: \"add\",\n        definitions: definition\n      });\n      definitions[type] = value;\n      this.attr(attr, this.refUrl(value.id));\n    }\n  };\n\n  Node.prototype.clearDefinitions = function clearDefinitions() {\n    var definitions = this.definitions;\n    this.definitionChange({\n      action: \"remove\",\n      definitions: definitions\n    });\n    this.definitions = {};\n  };\n\n  Node.prototype.renderDefinitions = function renderDefinitions() {\n    return renderAllAttr(this.mapDefinitions());\n  };\n\n  Node.prototype.mapDefinitions = function mapDefinitions() {\n    var this$1 = this;\n    var definitions = this.definitions;\n    var attrs = [];\n\n    for (var field in definitions) {\n      attrs.push([DefinitionMap[field], this$1.refUrl(definitions[field].id)]);\n    }\n\n    return attrs;\n  };\n\n  Node.prototype.refUrl = function refUrl(id) {\n    var skipBaseHref = (this.options || {}).skipBaseHref;\n    var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n    var base = skipBaseHref ? '' : baseHref;\n    return \"url(\" + base + \"#\" + id + \")\";\n  };\n\n  Node.prototype.baseUrl = function baseUrl$1() {\n    return baseUrl();\n  };\n\n  return Node;\n}(BaseNode);\n\nexport default Node;","map":{"version":3,"sources":["/home/infinity/Desktop/supermarket/NTUA-Databases/app/client/node_modules/@progress/kendo-drawing/dist/es/svg/node.js"],"names":["BaseNode","renderAllAttr","renderAttr","renderStyle","NODE_MAP","renderSVG","SVG_NS","NONE","support","defined","TRANSFORM","DefinitionMap","clip","fill","isDefinition","type","value","nodeType","baseUrl","base","document","getElementsByTagName","href","location","url","browser","msie","hashIndex","indexOf","substring","Node","srcElement","options","call","definitions","__proto__","prototype","Object","create","constructor","destroy","element","_kendoNode","clearDefinitions","load","elements","pos","this$1","i","length","children","childNode","insertAt","append","createDefinitions","attachTo","root","parent","domElement","container","createElement","render","firstChild","insertBefore","childNodes","appendChild","setElement","nodes","childElement","clear","innerHTML","removeSelf","parentNode","removeChild","template","renderChildren","output","optionsChange","e","field","css","updateDefinition","attr","removeAttr","name","setAttribute","allAttr","attrs","style","allCss","styles","removeAttribute","mapTransform","transform","push","matrix","toString","renderTransform","transformChange","mapStyle","cursor","visible","renderStyle$1","renderOpacity","opacity","renderId","id","hasDefinitions","definition","get","definitionChange","action","current","refUrl","renderDefinitions","mapDefinitions","skipBaseHref","baseHref","replace","baseUrl$1"],"mappings":"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","sourcesContent":["import BaseNode from '../core/base-node';\nimport renderAllAttr from './utils/render-all-attributes';\nimport renderAttr from './utils/render-attribute';\nimport renderStyle from './utils/render-style';\nimport NODE_MAP from './node-map';\nimport renderSVG from './utils/render-svg';\nimport { SVG_NS, NONE } from './constants';\nimport { support } from '../common';\nimport { defined } from '../util';\n\nvar TRANSFORM = \"transform\";\nvar DefinitionMap = {\n    clip: \"clip-path\",\n    fill: \"fill\"\n};\n\nfunction isDefinition(type, value) {\n    return type === \"clip\" || (type === \"fill\" && (!value || value.nodeType === \"Gradient\"));\n}\n\nfunction baseUrl() {\n    var base = document.getElementsByTagName(\"base\")[0];\n    var href = document.location.href;\n    var url = \"\";\n\n    if (base && !(support.browser || {}).msie) {\n        var hashIndex = href.indexOf(\"#\");\n        if (hashIndex !== -1) {\n            href = href.substring(0, hashIndex);\n        }\n\n        url = href;\n    }\n\n    return url;\n}\n\nvar Node = (function (BaseNode) {\n    function Node(srcElement, options) {\n        BaseNode.call(this, srcElement);\n        this.definitions = {};\n\n        this.options = options;\n    }\n\n    if ( BaseNode ) Node.__proto__ = BaseNode;\n    Node.prototype = Object.create( BaseNode && BaseNode.prototype );\n    Node.prototype.constructor = Node;\n\n    Node.prototype.destroy = function destroy () {\n        if (this.element) {\n            this.element._kendoNode = null;\n            this.element = null;\n        }\n\n        this.clearDefinitions();\n        BaseNode.prototype.destroy.call(this);\n    };\n\n    Node.prototype.load = function load (elements, pos) {\n        var this$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var srcElement = elements[i];\n            var children = srcElement.children;\n\n            var childNode = new NODE_MAP[srcElement.nodeType](srcElement, this$1.options);\n\n            if (defined(pos)) {\n                this$1.insertAt(childNode, pos);\n            } else {\n                this$1.append(childNode);\n            }\n\n            childNode.createDefinitions();\n\n            if (children && children.length > 0) {\n                childNode.load(children);\n            }\n\n            var element = this$1.element;\n            if (element) {\n                childNode.attachTo(element, pos);\n            }\n        }\n    };\n\n    Node.prototype.root = function root () {\n        var root = this;\n\n        while (root.parent) {\n            root = root.parent;\n        }\n\n        return root;\n    };\n\n    Node.prototype.attachTo = function attachTo (domElement, pos) {\n        var container = document.createElement(\"div\");\n        renderSVG(container,\n            \"<svg xmlns='\" + SVG_NS + \"' version='1.1'>\" +\n                this.render() +\n            \"</svg>\"\n        );\n\n        var element = container.firstChild.firstChild;\n        if (element) {\n            if (defined(pos)) {\n                domElement.insertBefore(element, domElement.childNodes[pos] || null);\n            } else {\n                domElement.appendChild(element);\n            }\n            this.setElement(element);\n        }\n    };\n\n    Node.prototype.setElement = function setElement (element) {\n        if (this.element) {\n            this.element._kendoNode = null;\n        }\n\n        this.element = element;\n        this.element._kendoNode = this;\n\n        var nodes = this.childNodes;\n        for (var i = 0; i < nodes.length; i++) {\n            var childElement = element.childNodes[i];\n            nodes[i].setElement(childElement);\n        }\n    };\n\n    Node.prototype.clear = function clear () {\n        this.clearDefinitions();\n\n        if (this.element) {\n            this.element.innerHTML = \"\";\n        }\n\n        var children = this.childNodes;\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n\n        this.childNodes = [];\n    };\n\n    Node.prototype.removeSelf = function removeSelf () {\n        if (this.element) {\n            var parentNode = this.element.parentNode;\n            if (parentNode) {\n                parentNode.removeChild(this.element);\n            }\n            this.element = null;\n        }\n\n        BaseNode.prototype.removeSelf.call(this);\n    };\n\n    Node.prototype.template = function template () {\n        return this.renderChildren();\n    };\n\n    Node.prototype.render = function render () {\n        return this.template();\n    };\n\n    Node.prototype.renderChildren = function renderChildren () {\n        var nodes = this.childNodes;\n        var output = \"\";\n\n        for (var i = 0; i < nodes.length; i++) {\n            output += nodes[i].render();\n        }\n\n        return output;\n    };\n\n    Node.prototype.optionsChange = function optionsChange (e) {\n        var field = e.field;\n        var value = e.value;\n\n        if (field === \"visible\") {\n            this.css(\"display\", value ? \"\" : NONE);\n        } else if (DefinitionMap[field] && isDefinition(field, value)) {\n            this.updateDefinition(field, value);\n        } else if (field === \"opacity\") {\n            this.attr(\"opacity\", value);\n        } else if (field === \"cursor\") {\n            this.css(\"cursor\", value);\n        } else if (field === \"id\") {\n            if (value) {\n                this.attr(\"id\", value);\n            } else {\n                this.removeAttr(\"id\");\n            }\n        }\n\n        BaseNode.prototype.optionsChange.call(this, e);\n    };\n\n    Node.prototype.attr = function attr (name, value) {\n        if (this.element) {\n            this.element.setAttribute(name, value);\n        }\n    };\n\n    Node.prototype.allAttr = function allAttr (attrs) {\n        var this$1 = this;\n\n        for (var i = 0; i < attrs.length; i++) {\n            this$1.attr(attrs[i][0], attrs[i][1]);\n        }\n    };\n\n    Node.prototype.css = function css (name, value) {\n        if (this.element) {\n            this.element.style[name] = value;\n        }\n    };\n\n    Node.prototype.allCss = function allCss (styles) {\n        var this$1 = this;\n\n        for (var i = 0; i < styles.length; i++) {\n            this$1.css(styles[i][0], styles[i][1]);\n        }\n    };\n\n    Node.prototype.removeAttr = function removeAttr (name) {\n        if (this.element) {\n            this.element.removeAttribute(name);\n        }\n    };\n\n    Node.prototype.mapTransform = function mapTransform (transform) {\n        var attrs = [];\n        if (transform) {\n            attrs.push([\n                TRANSFORM,\n                \"matrix(\" + transform.matrix().toString(6) + \")\"\n            ]);\n        }\n\n        return attrs;\n    };\n\n    Node.prototype.renderTransform = function renderTransform () {\n        return renderAllAttr(\n            this.mapTransform(this.srcElement.transform())\n        );\n    };\n\n    Node.prototype.transformChange = function transformChange (value) {\n        if (value) {\n            this.allAttr(this.mapTransform(value));\n        } else {\n            this.removeAttr(TRANSFORM);\n        }\n    };\n\n    Node.prototype.mapStyle = function mapStyle () {\n        var options = this.srcElement.options;\n        var style = [ [ \"cursor\", options.cursor ] ];\n\n        if (options.visible === false) {\n            style.push([ \"display\", NONE ]);\n        }\n\n        return style;\n    };\n\n    Node.prototype.renderStyle = function renderStyle$1 () {\n        return renderAttr(\"style\", renderStyle(this.mapStyle(true)));\n    };\n\n    Node.prototype.renderOpacity = function renderOpacity () {\n        return renderAttr(\"opacity\", this.srcElement.options.opacity);\n    };\n\n    Node.prototype.renderId = function renderId () {\n        return renderAttr(\"id\", this.srcElement.options.id);\n    };\n\n    Node.prototype.createDefinitions = function createDefinitions () {\n        var srcElement = this.srcElement;\n        var definitions = this.definitions;\n        if (srcElement) {\n            var options = srcElement.options;\n            var hasDefinitions;\n\n            for (var field in DefinitionMap) {\n                var definition = options.get(field);\n                if (definition && isDefinition(field, definition)) {\n                    definitions[field] = definition;\n                    hasDefinitions = true;\n                }\n            }\n            if (hasDefinitions) {\n                this.definitionChange({\n                    action: \"add\",\n                    definitions: definitions\n                });\n            }\n        }\n    };\n\n    Node.prototype.definitionChange = function definitionChange (e) {\n        if (this.parent) {\n            this.parent.definitionChange(e);\n        }\n    };\n\n    Node.prototype.updateDefinition = function updateDefinition (type, value) {\n        var definitions = this.definitions;\n        var current = definitions[type];\n        var attr = DefinitionMap[type];\n        var definition = {};\n        if (current) {\n            definition[type] = current;\n            this.definitionChange({\n                action: \"remove\",\n                definitions: definition\n            });\n            delete definitions[type];\n        }\n\n        if (!value) {\n            if (current) {\n                this.removeAttr(attr);\n            }\n        } else {\n            definition[type] = value;\n            this.definitionChange({\n                action: \"add\",\n                definitions: definition\n            });\n            definitions[type] = value;\n            this.attr(attr, this.refUrl(value.id));\n        }\n    };\n\n    Node.prototype.clearDefinitions = function clearDefinitions () {\n        var definitions = this.definitions;\n\n        this.definitionChange({\n            action: \"remove\",\n            definitions: definitions\n        });\n        this.definitions = {};\n    };\n\n    Node.prototype.renderDefinitions = function renderDefinitions () {\n        return renderAllAttr(this.mapDefinitions());\n    };\n\n    Node.prototype.mapDefinitions = function mapDefinitions () {\n        var this$1 = this;\n\n        var definitions = this.definitions;\n        var attrs = [];\n\n        for (var field in definitions) {\n            attrs.push([ DefinitionMap[field], this$1.refUrl(definitions[field].id) ]);\n        }\n\n        return attrs;\n    };\n\n    Node.prototype.refUrl = function refUrl (id) {\n        var skipBaseHref = (this.options || {}).skipBaseHref;\n        var baseHref = this.baseUrl().replace(/'/g, \"\\\\'\");\n        var base = skipBaseHref ? '' : baseHref;\n        return (\"url(\" + base + \"#\" + id + \")\");\n    };\n\n    Node.prototype.baseUrl = function baseUrl$1 () {\n        return baseUrl();\n    };\n\n    return Node;\n}(BaseNode));\n\nexport default Node;\n"]},"metadata":{},"sourceType":"module"}