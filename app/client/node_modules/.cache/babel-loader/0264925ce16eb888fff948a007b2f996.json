{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { GridColumnMenuItem } from './GridColumnMenuItem';\nimport { GridColumnMenuItemGroup } from './GridColumnMenuItemGroup';\nimport { GridColumnMenuItemContent } from './GridColumnMenuItemContent';\nimport { Checkbox } from '@progress/kendo-react-inputs';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, filterClearButton, filterSubmitButton, filterTitle, searchPlaceholder, filterCheckAll } from '../messages';\nimport { filterBy } from '@progress/kendo-data-query';\n/**\n * @hidden\n */\n\nvar isArrayEqual = function (firstArray, secondArray) {\n  if (firstArray.length !== secondArray.length) {\n    return false;\n  }\n\n  return firstArray.every(function (ex, i) {\n    return ex === secondArray[i];\n  });\n};\n\nvar GridColumnMenuCheckboxFilter =\n/** @class */\nfunction (_super) {\n  __extends(GridColumnMenuCheckboxFilter, _super);\n\n  function GridColumnMenuCheckboxFilter(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.isControlled = function () {\n      return _this.props.expanded !== undefined;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.parseData = function (originalData, isUnique) {\n      var field = _this.props.column.field || '';\n      var data = originalData.map(function (item) {\n        return item[field];\n      });\n\n      if (isUnique) {\n        return data.filter(function (item, index) {\n          return data.indexOf(item) === index;\n        });\n      }\n\n      return data;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.getFilterIndex = function () {\n      var field = _this.props.column.field;\n      var currentFilter = _this.props.filter || {\n        filters: [],\n        logic: 'and'\n      };\n      var compositeFilterIndex = currentFilter.filters.findIndex(function (filter) {\n        return filter.filters && filter.filters[0].field === field;\n      });\n      return compositeFilterIndex;\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.onFilterExpand = function () {\n      var isControlled = _this.isControlled();\n\n      var nextValue = !(isControlled ? _this.props.expanded : _this.state.expanded);\n\n      if (_this.props.onExpandChange) {\n        _this.props.onExpandChange(nextValue);\n      }\n\n      if (!isControlled) {\n        _this.setState({\n          expanded: nextValue\n        });\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.handleSearchChange = function (e) {\n      var filterExpression = {\n        logic: 'and',\n        filters: [{\n          field: _this.props.column.field,\n          operator: 'startswith',\n          value: e.target.value,\n          ignoreCase: true\n        }]\n      };\n\n      _this.setState({\n        value: e.target.value,\n        data: _this.parseData(filterBy(_this.props.data || [], filterExpression), _this.props.uniqueData)\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.clear = function (e) {\n      e.preventDefault();\n\n      if (!_this.props.onFilterChange) {\n        return;\n      }\n\n      var updatedFilter = _this.state.currentFilter || null;\n\n      if (updatedFilter !== null) {\n        updatedFilter.filters.splice(_this.compositeFilterIndex, 1);\n\n        _this.props.onFilterChange(updatedFilter, e);\n      } else {\n        _this.props.onFilterChange(null, e);\n      }\n\n      if (_this.props.onCloseMenu) {\n        _this.props.onCloseMenu();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.submit = function (e) {\n      e.preventDefault();\n\n      if (!_this.props.onFilterChange) {\n        return;\n      }\n\n      var updatedFilter = _this.state.currentFilter || null;\n\n      _this.props.onFilterChange(updatedFilter, e);\n\n      if (_this.props.onCloseMenu) {\n        _this.props.onCloseMenu();\n      }\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.handleCheckBoxChange = function (e, value) {\n      var field = _this.props.column.field || '';\n\n      var newFilter = __assign({}, _this.state.currentFilter);\n\n      var filters = _this.state.currentFilter.filters.slice() || [];\n      var fieldFilters = [];\n\n      if (_this.compositeFilterIndex !== -1 && newFilter.filters[_this.compositeFilterIndex].filters) {\n        fieldFilters = newFilter.filters[_this.compositeFilterIndex].filters;\n      }\n\n      if (e.value && value === 'all') {\n        _this.state.data.forEach(function (item) {\n          fieldFilters.push({\n            field: field,\n            operator: 'eq',\n            value: item\n          });\n        });\n      } else if (e.value) {\n        fieldFilters.push({\n          field: field,\n          operator: 'eq',\n          value: value\n        });\n      } else if (_this.state.currentFilter) {\n        var index = fieldFilters.findIndex(function (filter) {\n          return filter.value === value;\n        });\n        fieldFilters.splice(index, 1);\n      }\n\n      newFilter.logic = 'and';\n\n      if (_this.compositeFilterIndex !== -1) {\n        filters[_this.compositeFilterIndex] = {\n          logic: 'or',\n          filters: fieldFilters\n        };\n      } else {\n        filters.push({\n          logic: 'or',\n          filters: fieldFilters\n        });\n      }\n\n      if (!e.value && value === 'all' || fieldFilters.length === 0) {\n        filters.splice(_this.compositeFilterIndex, 1);\n      }\n\n      newFilter.filters = filters;\n\n      _this.setState({\n        currentFilter: newFilter\n      });\n    };\n    /**\n     * @hidden\n     */\n\n\n    _this.isAllSelected = function () {\n      var isAllChecked = false;\n\n      if (_this.state.currentFilter) {\n        var filters_1 = _this.state.currentFilter.filters.slice();\n\n        if (_this.compositeFilterIndex === -1) {\n          return false;\n        }\n\n        isAllChecked = _this.state.data.every(function (item) {\n          if (_this.compositeFilterIndex !== -1 && filters_1[_this.compositeFilterIndex].filters) {\n            var index = filters_1[_this.compositeFilterIndex].filters.findIndex(function (filter) {\n              return filter.value === item;\n            });\n\n            return index >= 0;\n          }\n\n          return false;\n        });\n        return isAllChecked;\n      }\n\n      return isAllChecked;\n    };\n\n    _this.compositeFilterIndex = _this.getFilterIndex();\n    _this.state = {\n      expanded: props.expanded || false,\n      value: '',\n      data: _this.parseData(_this.props.data, _this.props.uniqueData) || [],\n      dataFromProps: _this.parseData(_this.props.data, false) || [],\n      currentFilter: _this.props.filter || {\n        filters: [],\n        logic: 'and'\n      }\n    };\n    return _this;\n  }\n  /**\n   * @hidden\n   */\n\n\n  GridColumnMenuCheckboxFilter.prototype.componentDidUpdate = function () {\n    var field = this.props.column.field || '';\n    var data = this.props.data.map(function (item) {\n      return item[field];\n    });\n\n    if (!isArrayEqual(data, this.state.dataFromProps)) {\n      this.setState({\n        data: data,\n        dataFromProps: data\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  GridColumnMenuCheckboxFilter.prototype.render = function () {\n    var _this = this;\n\n    var column = this.props.column;\n\n    if (!column || !column.field) {\n      return React.createElement(\"div\", null);\n    }\n\n    var localizationService = provideLocalizationService(this);\n    var expandState = this.isControlled() ? this.props.expanded : this.state.expanded;\n    var filterValues = [];\n\n    if (this.state.currentFilter) {\n      var currentFilter = this.state.currentFilter.filters.slice();\n      this.compositeFilterIndex = currentFilter.findIndex(function (filter) {\n        if (filter.filters && filter.filters.length > 0) {\n          return filter.filters[0].field === column.field;\n        }\n\n        return false;\n      });\n\n      if (this.compositeFilterIndex !== -1 && currentFilter[this.compositeFilterIndex].filters.length > 0) {\n        currentFilter[this.compositeFilterIndex].filters.forEach(function (filterItem) {\n          if (filterItem.field === _this.props.column.field) {\n            filterValues.push(filterItem.value);\n          }\n        });\n      }\n    }\n\n    var searchBox = this.props.searchBox ? React.createElement(this.props.searchBox, {\n      value: this.state.value,\n      onChange: this.handleSearchChange\n    }) : React.createElement(\"div\", {\n      className: \"k-textbox k-space-right\"\n    }, React.createElement(\"input\", {\n      placeholder: localizationService.toLanguageString(searchPlaceholder, messages[searchPlaceholder]),\n      value: this.state.value,\n      onChange: this.handleSearchChange\n    }), React.createElement(\"span\", {\n      className: \"k-icon k-i-zoom\"\n    }));\n    var uniqueFilterValues = filterValues.filter(function (item, index) {\n      return filterValues.indexOf(item) === index;\n    });\n    return React.createElement(GridColumnMenuItemGroup, null, React.createElement(GridColumnMenuItem, {\n      title: localizationService.toLanguageString(filterTitle, messages[filterTitle]),\n      iconClass: 'k-i-filter',\n      onClick: this.onFilterExpand\n    }), React.createElement(GridColumnMenuItemContent, {\n      show: !!expandState\n    }, React.createElement(\"div\", {\n      className: 'kendo-grid-filter-menu-container'\n    }, React.createElement(\"form\", {\n      className: 'k-filter-menu k-group k-reset k-state-border-up',\n      onSubmit: this.submit,\n      onReset: this.clear\n    }, React.createElement(\"div\", {\n      className: 'k-filter-menu-container'\n    }, searchBox, React.createElement(\"ul\", {\n      className: \"k-reset k-multicheck-wrap\"\n    }, React.createElement(\"li\", {\n      className: \"k-item\"\n    }, React.createElement(Checkbox, {\n      label: localizationService.toLanguageString(filterCheckAll, messages[filterCheckAll]),\n      onChange: function (e) {\n        return _this.handleCheckBoxChange(e, 'all');\n      },\n      checked: this.isAllSelected()\n    })), this.state.data.map(function (item, index) {\n      return React.createElement(\"li\", {\n        className: \"k-item\",\n        key: index\n      }, React.createElement(Checkbox, {\n        label: String(item),\n        onChange: function (e) {\n          return _this.handleCheckBoxChange(e, item);\n        },\n        checked: uniqueFilterValues.includes(item)\n      }));\n    })), React.createElement(\"div\", {\n      className: 'k-columnmenu-actions'\n    }, React.createElement(\"button\", {\n      className: 'k-button',\n      type: 'reset'\n    }, localizationService.toLanguageString(filterClearButton, messages[filterClearButton])), React.createElement(\"button\", {\n      className: 'k-button k-primary'\n    }, localizationService.toLanguageString(filterSubmitButton, messages[filterSubmitButton]))))))));\n  };\n  /**\n   * @hidden\n   */\n\n\n  GridColumnMenuCheckboxFilter.defaultProps = {\n    uniqueData: true\n  };\n  return GridColumnMenuCheckboxFilter;\n}(React.Component);\n\nexport { GridColumnMenuCheckboxFilter };\nregisterForLocalization(GridColumnMenuCheckboxFilter);","map":{"version":3,"sources":["../../../src/columnMenu/GridColumnMenuCheckboxFilter.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as React from 'react';\nimport { GridColumnMenuItem } from './GridColumnMenuItem';\nimport { GridColumnMenuItemGroup } from './GridColumnMenuItemGroup';\nimport { GridColumnMenuItemContent } from './GridColumnMenuItemContent';\nimport { Checkbox } from '@progress/kendo-react-inputs';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, filterClearButton, filterSubmitButton, filterTitle, searchPlaceholder, filterCheckAll } from '../messages';\nimport { filterBy } from '@progress/kendo-data-query';\n/**\n * @hidden\n */\nvar isArrayEqual = function (firstArray, secondArray) {\n    if (firstArray.length !== secondArray.length) {\n        return false;\n    }\n    return firstArray.every(function (ex, i) { return ex === secondArray[i]; });\n};\nvar GridColumnMenuCheckboxFilter = /** @class */ (function (_super) {\n    __extends(GridColumnMenuCheckboxFilter, _super);\n    function GridColumnMenuCheckboxFilter(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.isControlled = function () { return _this.props.expanded !== undefined; };\n        /**\n         * @hidden\n         */\n        _this.parseData = function (originalData, isUnique) {\n            var field = _this.props.column.field || '';\n            var data = originalData.map(function (item) { return item[field]; });\n            if (isUnique) {\n                return data.filter(function (item, index) { return data.indexOf(item) === index; });\n            }\n            return data;\n        };\n        /**\n         * @hidden\n         */\n        _this.getFilterIndex = function () {\n            var field = _this.props.column.field;\n            var currentFilter = _this.props.filter || { filters: [], logic: 'and' };\n            var compositeFilterIndex = currentFilter.filters.findIndex(function (filter) { return filter.filters && filter.filters[0].field === field; });\n            return compositeFilterIndex;\n        };\n        /**\n         * @hidden\n         */\n        _this.onFilterExpand = function () {\n            var isControlled = _this.isControlled();\n            var nextValue = !(isControlled ? _this.props.expanded : _this.state.expanded);\n            if (_this.props.onExpandChange) {\n                _this.props.onExpandChange(nextValue);\n            }\n            if (!isControlled) {\n                _this.setState({\n                    expanded: nextValue\n                });\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.handleSearchChange = function (e) {\n            var filterExpression = {\n                logic: 'and',\n                filters: [\n                    { field: _this.props.column.field, operator: 'startswith', value: e.target.value, ignoreCase: true }\n                ]\n            };\n            _this.setState({\n                value: e.target.value,\n                data: _this.parseData(filterBy(_this.props.data || [], filterExpression), _this.props.uniqueData)\n            });\n        };\n        /**\n         * @hidden\n         */\n        _this.clear = function (e) {\n            e.preventDefault();\n            if (!_this.props.onFilterChange) {\n                return;\n            }\n            var updatedFilter = _this.state.currentFilter || null;\n            if (updatedFilter !== null) {\n                updatedFilter.filters.splice(_this.compositeFilterIndex, 1);\n                _this.props.onFilterChange(updatedFilter, e);\n            }\n            else {\n                _this.props.onFilterChange(null, e);\n            }\n            if (_this.props.onCloseMenu) {\n                _this.props.onCloseMenu();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.submit = function (e) {\n            e.preventDefault();\n            if (!_this.props.onFilterChange) {\n                return;\n            }\n            var updatedFilter = _this.state.currentFilter || null;\n            _this.props.onFilterChange(updatedFilter, e);\n            if (_this.props.onCloseMenu) {\n                _this.props.onCloseMenu();\n            }\n        };\n        /**\n         * @hidden\n         */\n        _this.handleCheckBoxChange = function (e, value) {\n            var field = _this.props.column.field || '';\n            var newFilter = __assign({}, _this.state.currentFilter);\n            var filters = _this.state.currentFilter.filters.slice() || [];\n            var fieldFilters = [];\n            if (_this.compositeFilterIndex !== -1 && newFilter.filters[_this.compositeFilterIndex].filters) {\n                fieldFilters = newFilter.filters[_this.compositeFilterIndex].filters;\n            }\n            if (e.value && value === 'all') {\n                _this.state.data.forEach(function (item) {\n                    fieldFilters.push({ field: field, operator: 'eq', value: item });\n                });\n            }\n            else if (e.value) {\n                fieldFilters.push({ field: field, operator: 'eq', value: value });\n            }\n            else if (_this.state.currentFilter) {\n                var index = fieldFilters.findIndex(function (filter) { return filter.value === value; });\n                fieldFilters.splice(index, 1);\n            }\n            newFilter.logic = 'and';\n            if (_this.compositeFilterIndex !== -1) {\n                filters[_this.compositeFilterIndex] = {\n                    logic: 'or',\n                    filters: fieldFilters\n                };\n            }\n            else {\n                filters.push({\n                    logic: 'or',\n                    filters: fieldFilters\n                });\n            }\n            if (!e.value && value === 'all' || fieldFilters.length === 0) {\n                filters.splice(_this.compositeFilterIndex, 1);\n            }\n            newFilter.filters = filters;\n            _this.setState({ currentFilter: newFilter });\n        };\n        /**\n         * @hidden\n         */\n        _this.isAllSelected = function () {\n            var isAllChecked = false;\n            if (_this.state.currentFilter) {\n                var filters_1 = _this.state.currentFilter.filters.slice();\n                if (_this.compositeFilterIndex === -1) {\n                    return false;\n                }\n                isAllChecked = _this.state.data.every(function (item) {\n                    if (_this.compositeFilterIndex !== -1 && filters_1[_this.compositeFilterIndex].filters) {\n                        var index = filters_1[_this.compositeFilterIndex].filters.findIndex(function (filter) { return filter.value === item; });\n                        return index >= 0;\n                    }\n                    return false;\n                });\n                return isAllChecked;\n            }\n            return isAllChecked;\n        };\n        _this.compositeFilterIndex = _this.getFilterIndex();\n        _this.state = {\n            expanded: props.expanded || false,\n            value: '',\n            data: _this.parseData(_this.props.data, _this.props.uniqueData) || [],\n            dataFromProps: _this.parseData(_this.props.data, false) || [],\n            currentFilter: _this.props.filter || { filters: [], logic: 'and' }\n        };\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    GridColumnMenuCheckboxFilter.prototype.componentDidUpdate = function () {\n        var field = this.props.column.field || '';\n        var data = this.props.data.map(function (item) { return item[field]; });\n        if (!isArrayEqual(data, this.state.dataFromProps)) {\n            this.setState({\n                data: data,\n                dataFromProps: data\n            });\n        }\n    };\n    /**\n     * @hidden\n     */\n    GridColumnMenuCheckboxFilter.prototype.render = function () {\n        var _this = this;\n        var column = this.props.column;\n        if (!column || !column.field) {\n            return React.createElement(\"div\", null);\n        }\n        var localizationService = provideLocalizationService(this);\n        var expandState = this.isControlled() ? this.props.expanded : this.state.expanded;\n        var filterValues = [];\n        if (this.state.currentFilter) {\n            var currentFilter = this.state.currentFilter.filters.slice();\n            this.compositeFilterIndex = currentFilter.findIndex(function (filter) {\n                if (filter.filters && filter.filters.length > 0) {\n                    return filter.filters[0].field === column.field;\n                }\n                return false;\n            });\n            if (this.compositeFilterIndex !== -1 && currentFilter[this.compositeFilterIndex].filters.length > 0) {\n                currentFilter[this.compositeFilterIndex].filters.forEach(function (filterItem) {\n                    if (filterItem.field === _this.props.column.field) {\n                        filterValues.push(filterItem.value);\n                    }\n                });\n            }\n        }\n        var searchBox = this.props.searchBox ?\n            React.createElement(this.props.searchBox, { value: this.state.value, onChange: this.handleSearchChange }) :\n            (React.createElement(\"div\", { className: \"k-textbox k-space-right\" },\n                React.createElement(\"input\", { placeholder: localizationService.toLanguageString(searchPlaceholder, messages[searchPlaceholder]), value: this.state.value, onChange: this.handleSearchChange }),\n                React.createElement(\"span\", { className: \"k-icon k-i-zoom\" })));\n        var uniqueFilterValues = filterValues.filter(function (item, index) { return filterValues.indexOf(item) === index; });\n        return (React.createElement(GridColumnMenuItemGroup, null,\n            React.createElement(GridColumnMenuItem, { title: localizationService.toLanguageString(filterTitle, messages[filterTitle]), iconClass: 'k-i-filter', onClick: this.onFilterExpand }),\n            React.createElement(GridColumnMenuItemContent, { show: !!expandState },\n                React.createElement(\"div\", { className: 'kendo-grid-filter-menu-container' },\n                    React.createElement(\"form\", { className: 'k-filter-menu k-group k-reset k-state-border-up', onSubmit: this.submit, onReset: this.clear },\n                        React.createElement(\"div\", { className: 'k-filter-menu-container' },\n                            searchBox,\n                            React.createElement(\"ul\", { className: \"k-reset k-multicheck-wrap\" },\n                                React.createElement(\"li\", { className: \"k-item\" },\n                                    React.createElement(Checkbox, { label: localizationService.toLanguageString(filterCheckAll, messages[filterCheckAll]), onChange: function (e) { return _this.handleCheckBoxChange(e, 'all'); }, checked: this.isAllSelected() })),\n                                this.state.data.map(function (item, index) {\n                                    return (React.createElement(\"li\", { className: \"k-item\", key: index },\n                                        React.createElement(Checkbox, { label: String(item), onChange: function (e) { return _this.handleCheckBoxChange(e, item); }, checked: uniqueFilterValues.includes(item) })));\n                                })),\n                            React.createElement(\"div\", { className: 'k-columnmenu-actions' },\n                                React.createElement(\"button\", { className: 'k-button', type: 'reset' }, localizationService.toLanguageString(filterClearButton, messages[filterClearButton])),\n                                React.createElement(\"button\", { className: 'k-button k-primary' }, localizationService.toLanguageString(filterSubmitButton, messages[filterSubmitButton])))))))));\n    };\n    /**\n     * @hidden\n     */\n    GridColumnMenuCheckboxFilter.defaultProps = {\n        uniqueData: true\n    };\n    return GridColumnMenuCheckboxFilter;\n}(React.Component));\nexport { GridColumnMenuCheckboxFilter };\nregisterForLocalization(GridColumnMenuCheckboxFilter);\n//# sourceMappingURL=GridColumnMenuCheckboxFilter.js.map"]},"metadata":{},"sourceType":"module"}